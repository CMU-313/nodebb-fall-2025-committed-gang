<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/jsdom/lib/jsdom/living/helpers/create-element.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato-file.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="https://github.com/the-simian/es6-plato">ES6 Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
      <li class="active">
        <a href="display.html">Summary Display</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/jsdom/lib/jsdom/living/helpers/create-element.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">50.57</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">330</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">25.69</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">3.33</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">&quot;use strict&quot;;

const DOMException = require(&quot;../generated/DOMException&quot;);

const interfaces = require(&quot;../interfaces&quot;);

const { implForWrapper } = require(&quot;../generated/utils&quot;);

const { HTML_NS, SVG_NS } = require(&quot;./namespaces&quot;);
const { domSymbolTree } = require(&quot;./internal-constants&quot;);
const { validateAndExtract } = require(&quot;./validate-names&quot;);
const reportException = require(&quot;./runtime-script-errors&quot;);
const {
  isValidCustomElementName, upgradeElement, lookupCEDefinition, enqueueCEUpgradeReaction
} = require(&quot;./custom-elements&quot;);

const INTERFACE_TAG_MAPPING = {
  __proto__: null,
  // https://html.spec.whatwg.org/multipage/dom.html#elements-in-the-dom%3Aelement-interface
  // https://html.spec.whatwg.org/multipage/indices.html#elements-3
  [HTML_NS]: {
    __proto__: null,
    HTMLElement: [
      &quot;abbr&quot;, &quot;address&quot;, &quot;article&quot;, &quot;aside&quot;, &quot;b&quot;, &quot;bdi&quot;, &quot;bdo&quot;, &quot;cite&quot;, &quot;code&quot;, &quot;dd&quot;, &quot;dfn&quot;, &quot;dt&quot;, &quot;em&quot;, &quot;figcaption&quot;,
      &quot;figure&quot;, &quot;footer&quot;, &quot;header&quot;, &quot;hgroup&quot;, &quot;i&quot;, &quot;kbd&quot;, &quot;main&quot;, &quot;mark&quot;, &quot;nav&quot;, &quot;noscript&quot;, &quot;rp&quot;, &quot;rt&quot;, &quot;ruby&quot;, &quot;s&quot;,
      &quot;samp&quot;, &quot;section&quot;, &quot;small&quot;, &quot;strong&quot;, &quot;sub&quot;, &quot;summary&quot;, &quot;sup&quot;, &quot;u&quot;, &quot;var&quot;, &quot;wbr&quot;
    ],
    HTMLAnchorElement: [&quot;a&quot;],
    HTMLAreaElement: [&quot;area&quot;],
    HTMLAudioElement: [&quot;audio&quot;],
    HTMLBaseElement: [&quot;base&quot;],
    HTMLBodyElement: [&quot;body&quot;],
    HTMLBRElement: [&quot;br&quot;],
    HTMLButtonElement: [&quot;button&quot;],
    HTMLCanvasElement: [&quot;canvas&quot;],
    HTMLDataElement: [&quot;data&quot;],
    HTMLDataListElement: [&quot;datalist&quot;],
    HTMLDetailsElement: [&quot;details&quot;],
    HTMLDialogElement: [&quot;dialog&quot;],
    HTMLDirectoryElement: [&quot;dir&quot;],
    HTMLDivElement: [&quot;div&quot;],
    HTMLDListElement: [&quot;dl&quot;],
    HTMLEmbedElement: [&quot;embed&quot;],
    HTMLFieldSetElement: [&quot;fieldset&quot;],
    HTMLFontElement: [&quot;font&quot;],
    HTMLFormElement: [&quot;form&quot;],
    HTMLFrameElement: [&quot;frame&quot;],
    HTMLFrameSetElement: [&quot;frameset&quot;],
    HTMLHeadingElement: [&quot;h1&quot;, &quot;h2&quot;, &quot;h3&quot;, &quot;h4&quot;, &quot;h5&quot;, &quot;h6&quot;],
    HTMLHeadElement: [&quot;head&quot;],
    HTMLHRElement: [&quot;hr&quot;],
    HTMLHtmlElement: [&quot;html&quot;],
    HTMLIFrameElement: [&quot;iframe&quot;],
    HTMLImageElement: [&quot;img&quot;],
    HTMLInputElement: [&quot;input&quot;],
    HTMLLabelElement: [&quot;label&quot;],
    HTMLLegendElement: [&quot;legend&quot;],
    HTMLLIElement: [&quot;li&quot;],
    HTMLLinkElement: [&quot;link&quot;],
    HTMLMapElement: [&quot;map&quot;],
    HTMLMarqueeElement: [&quot;marquee&quot;],
    HTMLMediaElement: [],
    HTMLMenuElement: [&quot;menu&quot;],
    HTMLMetaElement: [&quot;meta&quot;],
    HTMLMeterElement: [&quot;meter&quot;],
    HTMLModElement: [&quot;del&quot;, &quot;ins&quot;],
    HTMLObjectElement: [&quot;object&quot;],
    HTMLOListElement: [&quot;ol&quot;],
    HTMLOptGroupElement: [&quot;optgroup&quot;],
    HTMLOptionElement: [&quot;option&quot;],
    HTMLOutputElement: [&quot;output&quot;],
    HTMLParagraphElement: [&quot;p&quot;],
    HTMLParamElement: [&quot;param&quot;],
    HTMLPictureElement: [&quot;picture&quot;],
    HTMLPreElement: [&quot;listing&quot;, &quot;pre&quot;, &quot;xmp&quot;],
    HTMLProgressElement: [&quot;progress&quot;],
    HTMLQuoteElement: [&quot;blockquote&quot;, &quot;q&quot;],
    HTMLScriptElement: [&quot;script&quot;],
    HTMLSelectElement: [&quot;select&quot;],
    HTMLSlotElement: [&quot;slot&quot;],
    HTMLSourceElement: [&quot;source&quot;],
    HTMLSpanElement: [&quot;span&quot;],
    HTMLStyleElement: [&quot;style&quot;],
    HTMLTableCaptionElement: [&quot;caption&quot;],
    HTMLTableCellElement: [&quot;th&quot;, &quot;td&quot;],
    HTMLTableColElement: [&quot;col&quot;, &quot;colgroup&quot;],
    HTMLTableElement: [&quot;table&quot;],
    HTMLTimeElement: [&quot;time&quot;],
    HTMLTitleElement: [&quot;title&quot;],
    HTMLTableRowElement: [&quot;tr&quot;],
    HTMLTableSectionElement: [&quot;thead&quot;, &quot;tbody&quot;, &quot;tfoot&quot;],
    HTMLTemplateElement: [&quot;template&quot;],
    HTMLTextAreaElement: [&quot;textarea&quot;],
    HTMLTrackElement: [&quot;track&quot;],
    HTMLUListElement: [&quot;ul&quot;],
    HTMLUnknownElement: [],
    HTMLVideoElement: [&quot;video&quot;]
  },
  [SVG_NS]: {
    __proto__: null,
    SVGElement: [],
    SVGGraphicsElement: [],
    SVGDefsElement: [&quot;defs&quot;],
    SVGDescElement: [&quot;desc&quot;],
    SVGGElement: [&quot;g&quot;],
    SVGMetadataElement: [&quot;metadata&quot;],
    SVGSVGElement: [&quot;svg&quot;],
    SVGSwitchElement: [&quot;switch&quot;],
    SVGSymbolElement: [&quot;symbol&quot;],
    SVGTitleElement: [&quot;title&quot;]
  }
};

const TAG_INTERFACE_LOOKUP = Object.create(null);

for (const namespace of [HTML_NS, SVG_NS]) {
  TAG_INTERFACE_LOOKUP[namespace] = Object.create(null);

  const interfaceNames = Object.keys(INTERFACE_TAG_MAPPING[namespace]);
  for (const interfaceName of interfaceNames) {
    const tagNames = INTERFACE_TAG_MAPPING[namespace][interfaceName];

    for (const tagName of tagNames) {
      TAG_INTERFACE_LOOKUP[namespace][tagName] = interfaceName;
    }
  }
}

const UNKNOWN_HTML_ELEMENTS_NAMES = [&quot;applet&quot;, &quot;bgsound&quot;, &quot;blink&quot;, &quot;isindex&quot;, &quot;keygen&quot;, &quot;multicol&quot;, &quot;nextid&quot;, &quot;spacer&quot;];
const HTML_ELEMENTS_NAMES = [
  &quot;acronym&quot;, &quot;basefont&quot;, &quot;big&quot;, &quot;center&quot;, &quot;nobr&quot;, &quot;noembed&quot;, &quot;noframes&quot;, &quot;plaintext&quot;, &quot;rb&quot;, &quot;rtc&quot;,
  &quot;strike&quot;, &quot;tt&quot;
];

// https://html.spec.whatwg.org/multipage/dom.html#elements-in-the-dom:element-interface
function getHTMLElementInterface(name) {
  if (UNKNOWN_HTML_ELEMENTS_NAMES.includes(name)) {
    return interfaces.getInterfaceWrapper(&quot;HTMLUnknownElement&quot;);
  }

  if (HTML_ELEMENTS_NAMES.includes(name)) {
    return interfaces.getInterfaceWrapper(&quot;HTMLElement&quot;);
  }

  const specDefinedInterface = TAG_INTERFACE_LOOKUP[HTML_NS][name];
  if (specDefinedInterface !== undefined) {
    return interfaces.getInterfaceWrapper(specDefinedInterface);
  }

  if (isValidCustomElementName(name)) {
    return interfaces.getInterfaceWrapper(&quot;HTMLElement&quot;);
  }

  return interfaces.getInterfaceWrapper(&quot;HTMLUnknownElement&quot;);
}

// https://svgwg.org/svg2-draft/types.html#ElementsInTheSVGDOM
function getSVGInterface(name) {
  const specDefinedInterface = TAG_INTERFACE_LOOKUP[SVG_NS][name];
  if (specDefinedInterface !== undefined) {
    return interfaces.getInterfaceWrapper(specDefinedInterface);
  }

  return interfaces.getInterfaceWrapper(&quot;SVGElement&quot;);
}

// Returns the list of valid tag names that can bo associated with a element given its namespace and name.
function getValidTagNames(namespace, name) {
  if (INTERFACE_TAG_MAPPING[namespace] &amp;&amp; INTERFACE_TAG_MAPPING[namespace][name]) {
    return INTERFACE_TAG_MAPPING[namespace][name];
  }

  return [];
}

// https://dom.spec.whatwg.org/#concept-create-element
function createElement(
  document,
  localName,
  namespace,
  prefix = null,
  isValue = null,
  synchronousCE = false
) {
  let result = null;

  const { _globalObject } = document;
  const definition = lookupCEDefinition(document, namespace, localName, isValue);

  if (definition !== null &amp;&amp; definition.name !== localName) {
    const elementInterface = getHTMLElementInterface(localName);

    result = elementInterface.createImpl(_globalObject, [], {
      ownerDocument: document,
      localName,
      namespace: HTML_NS,
      prefix,
      ceState: &quot;undefined&quot;,
      ceDefinition: null,
      isValue
    });

    if (synchronousCE) {
      upgradeElement(definition, result);
    } else {
      enqueueCEUpgradeReaction(result, definition);
    }
  } else if (definition !== null) {
    if (synchronousCE) {
      try {
        const C = definition.constructor;

        const resultWrapper = C.construct();
        result = implForWrapper(resultWrapper);

        if (!result._ceState || !result._ceDefinition || result._namespaceURI !== HTML_NS) {
          throw new TypeError(&quot;Internal error: Invalid custom element.&quot;);
        }

        if (result._attributeList.length !== 0) {
          throw DOMException.create(_globalObject, [&quot;Unexpected attributes.&quot;, &quot;NotSupportedError&quot;]);
        }
        if (domSymbolTree.hasChildren(result)) {
          throw DOMException.create(_globalObject, [&quot;Unexpected child nodes.&quot;, &quot;NotSupportedError&quot;]);
        }
        if (domSymbolTree.parent(result)) {
          throw DOMException.create(_globalObject, [&quot;Unexpected element parent.&quot;, &quot;NotSupportedError&quot;]);
        }
        if (result._ownerDocument !== document) {
          throw DOMException.create(_globalObject, [&quot;Unexpected element owner document.&quot;, &quot;NotSupportedError&quot;]);
        }
        if (result._namespaceURI !== namespace) {
          throw DOMException.create(_globalObject, [&quot;Unexpected element namespace URI.&quot;, &quot;NotSupportedError&quot;]);
        }
        if (result._localName !== localName) {
          throw DOMException.create(_globalObject, [&quot;Unexpected element local name.&quot;, &quot;NotSupportedError&quot;]);
        }

        result._prefix = prefix;
        result._isValue = isValue;
      } catch (error) {
        reportException(document._defaultView, error);

        const interfaceWrapper = interfaces.getInterfaceWrapper(&quot;HTMLUnknownElement&quot;);
        result = interfaceWrapper.createImpl(_globalObject, [], {
          ownerDocument: document,
          localName,
          namespace: HTML_NS,
          prefix,
          ceState: &quot;failed&quot;,
          ceDefinition: null,
          isValue: null
        });
      }
    } else {
      const interfaceWrapper = interfaces.getInterfaceWrapper(&quot;HTMLElement&quot;);
      result = interfaceWrapper.createImpl(_globalObject, [], {
        ownerDocument: document,
        localName,
        namespace: HTML_NS,
        prefix,
        ceState: &quot;undefined&quot;,
        ceDefinition: null,
        isValue: null
      });

      enqueueCEUpgradeReaction(result, definition);
    }
  } else {
    let elementInterface;

    switch (namespace) {
      case HTML_NS:
        elementInterface = getHTMLElementInterface(localName);
        break;

      case SVG_NS:
        elementInterface = getSVGInterface(localName);
        break;

      default:
        elementInterface = interfaces.getInterfaceWrapper(&quot;Element&quot;);
        break;
    }

    result = elementInterface.createImpl(_globalObject, [], {
      ownerDocument: document,
      localName,
      namespace,
      prefix,
      ceState: &quot;uncustomized&quot;,
      ceDefinition: null,
      isValue
    });

    if (namespace === HTML_NS &amp;&amp; (isValidCustomElementName(localName) || isValue !== null)) {
      result._ceState = &quot;undefined&quot;;
    }
  }

  return result;
}

// https://dom.spec.whatwg.org/#internal-createelementns-steps
function internalCreateElementNSSteps(document, namespace, qualifiedName, options) {
  const extracted = validateAndExtract(document._globalObject, namespace, qualifiedName);

  let isValue = null;
  if (options &amp;&amp; options.is !== undefined) {
    isValue = options.is;
  }

  return createElement(
    document,
    extracted.localName,
    extracted.namespace,
    extracted.prefix,
    isValue,
    true
  );
}

module.exports = {
  createElement,
  internalCreateElementNSSteps,

  getValidTagNames,
  getHTMLElementInterface
};
</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
