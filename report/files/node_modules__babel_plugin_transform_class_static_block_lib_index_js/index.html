<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/@babel/plugin-transform-class-static-block/lib/index.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato-file.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="https://github.com/the-simian/es6-plato">ES6 Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
      <li class="active">
        <a href="display.html">Summary Display</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/@babel/plugin-transform-class-static-block/lib/index.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">60.73</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">154</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">55.65</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">2.00</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">&quot;use strict&quot;;

Object.defineProperty(exports, &quot;__esModule&quot;, {
  value: true
});
exports.default = void 0;
var _helperPluginUtils = require(&quot;@babel/helper-plugin-utils&quot;);
var _helperCreateClassFeaturesPlugin = require(&quot;@babel/helper-create-class-features-plugin&quot;);
function generateUid(scope, denyList) {
  const name = &quot;&quot;;
  let uid;
  let i = 1;
  do {
    uid = `_${name}`;
    if (i &gt; 1) uid += i;
    i++;
  } while (denyList.has(uid));
  return uid;
}
function mapLast(arr, fn) {
  if (arr.length === 0) return arr;
  return [...arr.slice(0, -1), fn(arr[arr.length - 1])];
}
var _default = exports.default = (0, _helperPluginUtils.declare)(({
  types: t,
  template,
  traverse,
  assertVersion
}) =&gt; {
  assertVersion(&quot;^7.12.0 || &gt;8.0.0-alpha &lt;8.0.0-beta&quot;);
  const rawNamedEvaluationVisitor = (0, _helperCreateClassFeaturesPlugin.buildNamedEvaluationVisitor)(path =&gt; {
    if (!path.isClassExpression()) return false;
    for (let i = path.node.body.body.length - 1; i &gt;= 0; i--) {
      const el = path.node.body.body[i];
      if (t.isStaticBlock(el)) {
        return true;
      }
      if ((t.isClassProperty(el) || t.isClassPrivateProperty(el)) &amp;&amp; el.static) {
        break;
      }
    }
    return false;
  }, (classPath, state, name) =&gt; {
    const nameNode = typeof name === &quot;string&quot; ? t.stringLiteral(name) : name;
    classPath.get(&quot;body&quot;).unshiftContainer(&quot;body&quot;, t.staticBlock([template.statement.ast`
            ${state.addHelper(&quot;setFunctionName&quot;)}(this, ${nameNode});
          `]));
  });
  if (!t.classAccessorProperty) {
    delete rawNamedEvaluationVisitor.ClassAccessorProperty;
  }
  const namedEvaluationVisitor = traverse.visitors.explode(rawNamedEvaluationVisitor);
  const maybeSequenceExpression = expressions =&gt; {
    if (expressions.length === 1) {
      return expressions[0];
    } else {
      return t.sequenceExpression(expressions);
    }
  };
  const blocksToExpressions = blocks =&gt; blocks.map(block =&gt; {
    const {
      body
    } = block;
    if (body.length === 1 &amp;&amp; t.isExpressionStatement(body[0])) {
      return t.inheritsComments(t.inheritsComments(body[0].expression, body[0]), block);
    }
    return t.inheritsComments(template.expression.ast`(() =&gt; { ${body} })()`, block);
  });
  const prependToInitializer = (prop, expressions) =&gt; {
    prop.value = prop.value ? t.sequenceExpression([...expressions, prop.value]) : maybeSequenceExpression(mapLast(expressions, expr =&gt; t.unaryExpression(&quot;void&quot;, expr)));
  };
  return {
    name: &quot;transform-class-static-block&quot;,
    manipulateOptions: (_, parser) =&gt; parser.plugins.push(&quot;classStaticBlock&quot;),
    pre() {
      (0, _helperCreateClassFeaturesPlugin.enableFeature)(this.file, _helperCreateClassFeaturesPlugin.FEATURES.staticBlocks, false);
    },
    visitor: {
      ClassBody(classBody) {
        const {
          scope
        } = classBody;
        let parentPath = classBody.parentPath;
        if (parentPath.isClassExpression() &amp;&amp; !parentPath.node.id) {
          do ({
            parentPath
          } = parentPath); while (parentPath &amp;&amp; !namedEvaluationVisitor[parentPath.type] &amp;&amp; !parentPath.isStatement());
          if (parentPath) {
            var _namedEvaluationVisit;
            (_namedEvaluationVisit = namedEvaluationVisitor[parentPath.type]) == null || _namedEvaluationVisit.enter.forEach(f =&gt; f.call(this, parentPath, this));
          }
        }
        const pendingStaticBlocks = [];
        let lastStaticProp = null;
        for (const path of classBody.get(&quot;body&quot;)) {
          if (path.isStaticBlock()) {
            pendingStaticBlocks.push(path.node);
            path.remove();
          } else if (path.isClassProperty({
            static: true
          }) || path.isClassPrivateProperty({
            static: true
          })) {
            lastStaticProp = path;
            if (pendingStaticBlocks.length &gt; 0) {
              prependToInitializer(path.node, blocksToExpressions(pendingStaticBlocks));
              pendingStaticBlocks.length = 0;
            }
          }
        }
        if (pendingStaticBlocks.length &gt; 0) {
          const tmp = scope.generateDeclaredUidIdentifier(&quot;staticBlock&quot;);
          let arrowBody;
          const needsCompletionValue = classBody.parentPath.isExpression();
          if (pendingStaticBlocks.length &gt; 1 || pendingStaticBlocks[0].body.length === 1 &amp;&amp; t.isExpressionStatement(pendingStaticBlocks[0].body[0])) {
            const expressions = blocksToExpressions(pendingStaticBlocks);
            if (needsCompletionValue) {
              expressions.push(t.thisExpression());
            }
            arrowBody = maybeSequenceExpression(expressions);
          } else {
            arrowBody = t.blockStatement(pendingStaticBlocks[0].body);
            if (needsCompletionValue) {
              arrowBody.body.push(t.returnStatement(t.thisExpression()));
            }
          }
          const init = template.expression.ast`${tmp} = () =&gt; ${arrowBody}`;
          if (lastStaticProp) {
            prependToInitializer(lastStaticProp.node, [init]);
          } else {
            const privateNames = new Set();
            for (const path of classBody.get(&quot;body&quot;)) {
              if (path.isPrivate()) {
                privateNames.add(path.get(&quot;key.id&quot;).node.name);
              }
            }
            const staticBlockPrivateId = generateUid(scope, privateNames);
            const staticBlockRef = t.privateName(t.identifier(staticBlockPrivateId));
            classBody.pushContainer(&quot;body&quot;, [t.classPrivateProperty(staticBlockRef, init, [], true)]);
          }
          const staticBlockClosureCall = t.callExpression(t.cloneNode(tmp), []);
          if (classBody.parentPath.isClassExpression()) {
            classBody.parentPath.replaceWith(t.sequenceExpression([classBody.parent, staticBlockClosureCall]));
          } else {
            classBody.parentPath.insertAfter(t.expressionStatement(staticBlockClosureCall));
          }
        }
      }
    }
  };
});

//# sourceMappingURL=index.js.map
</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
