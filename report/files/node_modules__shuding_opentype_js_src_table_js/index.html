<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/@shuding/opentype.js/src/table.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato-file.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="https://github.com/the-simian/es6-plato">ES6 Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
      <li class="active">
        <a href="display.html">Summary Display</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/@shuding/opentype.js/src/table.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">62.48</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">216</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">61.97</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">2.20</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">// Table metadata

import check from &#039;./check&#039;;
import { encode, sizeOf } from &#039;./types&#039;;

/**
 * @exports opentype.Table
 * @class
 * @param {string} tableName
 * @param {Array} fields
 * @param {Object} options
 * @constructor
 */
function Table(tableName, fields, options) {
    // For coverage tables with coverage format 2, we do not want to add the coverage data directly to the table object,
    // as this will result in wrong encoding order of the coverage data on serialization to bytes.
    // The fallback of using the field values directly when not present on the table is handled in types.encode.TABLE() already.
    if (fields.length &amp;&amp; (fields[0].name !== &#039;coverageFormat&#039; || fields[0].value === 1)) {
        for (let i = 0; i &lt; fields.length; i += 1) {
            const field = fields[i];
            this[field.name] = field.value;
        }
    }

    this.tableName = tableName;
    this.fields = fields;
    if (options) {
        const optionKeys = Object.keys(options);
        for (let i = 0; i &lt; optionKeys.length; i += 1) {
            const k = optionKeys[i];
            const v = options[k];
            if (this[k] !== undefined) {
                this[k] = v;
            }
        }
    }
}

/**
 * Encodes the table and returns an array of bytes
 * @return {Array}
 */
Table.prototype.encode = function() {
    return encode.TABLE(this);
};

/**
 * Get the size of the table.
 * @return {number}
 */
Table.prototype.sizeOf = function() {
    return sizeOf.TABLE(this);
};

/**
 * @private
 */
function ushortList(itemName, list, count) {
    if (count === undefined) {
        count = list.length;
    }
    const fields = new Array(list.length + 1);
    fields[0] = {name: itemName + &#039;Count&#039;, type: &#039;USHORT&#039;, value: count};
    for (let i = 0; i &lt; list.length; i++) {
        fields[i + 1] = {name: itemName + i, type: &#039;USHORT&#039;, value: list[i]};
    }
    return fields;
}

/**
 * @private
 */
function tableList(itemName, records, itemCallback) {
    const count = records.length;
    const fields = new Array(count + 1);
    fields[0] = {name: itemName + &#039;Count&#039;, type: &#039;USHORT&#039;, value: count};
    for (let i = 0; i &lt; count; i++) {
        fields[i + 1] = {name: itemName + i, type: &#039;TABLE&#039;, value: itemCallback(records[i], i)};
    }
    return fields;
}

/**
 * @private
 */
function recordList(itemName, records, itemCallback) {
    const count = records.length;
    let fields = [];
    fields[0] = {name: itemName + &#039;Count&#039;, type: &#039;USHORT&#039;, value: count};
    for (let i = 0; i &lt; count; i++) {
        fields = fields.concat(itemCallback(records[i], i));
    }
    return fields;
}

// Common Layout Tables

/**
 * @exports opentype.Coverage
 * @class
 * @param {opentype.Table}
 * @constructor
 * @extends opentype.Table
 */
function Coverage(coverageTable) {
    if (coverageTable.format === 1) {
        Table.call(this, &#039;coverageTable&#039;,
            [{name: &#039;coverageFormat&#039;, type: &#039;USHORT&#039;, value: 1}]
            .concat(ushortList(&#039;glyph&#039;, coverageTable.glyphs))
        );
    } else if (coverageTable.format === 2) {
        Table.call(this, &#039;coverageTable&#039;,
            [{name: &#039;coverageFormat&#039;, type: &#039;USHORT&#039;, value: 2}]
            .concat(recordList(&#039;rangeRecord&#039;, coverageTable.ranges, function(RangeRecord) {
                return [
                    {name: &#039;startGlyphID&#039;, type: &#039;USHORT&#039;, value: RangeRecord.start},
                    {name: &#039;endGlyphID&#039;, type: &#039;USHORT&#039;, value: RangeRecord.end},
                    {name: &#039;startCoverageIndex&#039;, type: &#039;USHORT&#039;, value: RangeRecord.index},
                ];
            }))
        );
    } else {
        check.assert(false, &#039;Coverage format must be 1 or 2.&#039;);
    }
}
Coverage.prototype = Object.create(Table.prototype);
Coverage.prototype.constructor = Coverage;

function ScriptList(scriptListTable) {
    Table.call(this, &#039;scriptListTable&#039;,
        recordList(&#039;scriptRecord&#039;, scriptListTable, function(scriptRecord, i) {
            const script = scriptRecord.script;
            let defaultLangSys = script.defaultLangSys;
            check.assert(!!defaultLangSys, &#039;Unable to write GSUB: script &#039; + scriptRecord.tag + &#039; has no default language system.&#039;);
            return [
                {name: &#039;scriptTag&#039; + i, type: &#039;TAG&#039;, value: scriptRecord.tag},
                {name: &#039;script&#039; + i, type: &#039;TABLE&#039;, value: new Table(&#039;scriptTable&#039;, [
                    {name: &#039;defaultLangSys&#039;, type: &#039;TABLE&#039;, value: new Table(&#039;defaultLangSys&#039;, [
                        {name: &#039;lookupOrder&#039;, type: &#039;USHORT&#039;, value: 0},
                        {name: &#039;reqFeatureIndex&#039;, type: &#039;USHORT&#039;, value: defaultLangSys.reqFeatureIndex}]
                        .concat(ushortList(&#039;featureIndex&#039;, defaultLangSys.featureIndexes)))}
                    ].concat(recordList(&#039;langSys&#039;, script.langSysRecords, function(langSysRecord, i) {
                        const langSys = langSysRecord.langSys;
                        return [
                            {name: &#039;langSysTag&#039; + i, type: &#039;TAG&#039;, value: langSysRecord.tag},
                            {name: &#039;langSys&#039; + i, type: &#039;TABLE&#039;, value: new Table(&#039;langSys&#039;, [
                                {name: &#039;lookupOrder&#039;, type: &#039;USHORT&#039;, value: 0},
                                {name: &#039;reqFeatureIndex&#039;, type: &#039;USHORT&#039;, value: langSys.reqFeatureIndex}
                                ].concat(ushortList(&#039;featureIndex&#039;, langSys.featureIndexes)))}
                        ];
                    })))}
            ];
        })
    );
}
ScriptList.prototype = Object.create(Table.prototype);
ScriptList.prototype.constructor = ScriptList;

/**
 * @exports opentype.FeatureList
 * @class
 * @param {opentype.Table}
 * @constructor
 * @extends opentype.Table
 */
function FeatureList(featureListTable) {
    Table.call(this, &#039;featureListTable&#039;,
        recordList(&#039;featureRecord&#039;, featureListTable, function(featureRecord, i) {
            const feature = featureRecord.feature;
            return [
                {name: &#039;featureTag&#039; + i, type: &#039;TAG&#039;, value: featureRecord.tag},
                {name: &#039;feature&#039; + i, type: &#039;TABLE&#039;, value: new Table(&#039;featureTable&#039;, [
                    {name: &#039;featureParams&#039;, type: &#039;USHORT&#039;, value: feature.featureParams},
                    ].concat(ushortList(&#039;lookupListIndex&#039;, feature.lookupListIndexes)))}
            ];
        })
    );
}
FeatureList.prototype = Object.create(Table.prototype);
FeatureList.prototype.constructor = FeatureList;

/**
 * @exports opentype.LookupList
 * @class
 * @param {opentype.Table}
 * @param {Object}
 * @constructor
 * @extends opentype.Table
 */
function LookupList(lookupListTable, subtableMakers) {
    Table.call(this, &#039;lookupListTable&#039;, tableList(&#039;lookup&#039;, lookupListTable, function(lookupTable) {
        let subtableCallback = subtableMakers[lookupTable.lookupType];
        check.assert(!!subtableCallback, &#039;Unable to write GSUB lookup type &#039; + lookupTable.lookupType + &#039; tables.&#039;);
        return new Table(&#039;lookupTable&#039;, [
            {name: &#039;lookupType&#039;, type: &#039;USHORT&#039;, value: lookupTable.lookupType},
            {name: &#039;lookupFlag&#039;, type: &#039;USHORT&#039;, value: lookupTable.lookupFlag}
        ].concat(tableList(&#039;subtable&#039;, lookupTable.subtables, subtableCallback)));
    }));
}
LookupList.prototype = Object.create(Table.prototype);
LookupList.prototype.constructor = LookupList;

// Record = same as Table, but inlined (a Table has an offset and its data is further in the stream)
// Don&#039;t use offsets inside Records (probable bug), only in Tables.
export default {
    Table,
    Record: Table,
    Coverage,
    ScriptList,
    FeatureList,
    LookupList,
    ushortList,
    tableList,
    recordList,
};
</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
