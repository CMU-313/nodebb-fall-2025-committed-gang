<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/webpack/lib/node/RequireChunkLoadingRuntimeModule.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato-file.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="https://github.com/the-simian/es6-plato">ES6 Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
      <li class="active">
        <a href="display.html">Summary Display</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/webpack/lib/node/RequireChunkLoadingRuntimeModule.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">62.19</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">247</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">21.57</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">1.75</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">/*
	MIT License http://www.opensource.org/licenses/mit-license.php
*/

&quot;use strict&quot;;

const RuntimeGlobals = require(&quot;../RuntimeGlobals&quot;);
const RuntimeModule = require(&quot;../RuntimeModule&quot;);
const Template = require(&quot;../Template&quot;);
const {
	chunkHasJs,
	getChunkFilenameTemplate
} = require(&quot;../javascript/JavascriptModulesPlugin&quot;);
const { getInitialChunkIds } = require(&quot;../javascript/StartupHelpers&quot;);
const compileBooleanMatcher = require(&quot;../util/compileBooleanMatcher&quot;);
const { getUndoPath } = require(&quot;../util/identifier&quot;);

/** @typedef {import(&quot;../Chunk&quot;)} Chunk */
/** @typedef {import(&quot;../ChunkGraph&quot;)} ChunkGraph */
/** @typedef {import(&quot;../Compilation&quot;)} Compilation */
/** @typedef {import(&quot;../Module&quot;).ReadOnlyRuntimeRequirements} ReadOnlyRuntimeRequirements */

class RequireChunkLoadingRuntimeModule extends RuntimeModule {
	/**
	 * @param {ReadOnlyRuntimeRequirements} runtimeRequirements runtime requirements
	 */
	constructor(runtimeRequirements) {
		super(&quot;require chunk loading&quot;, RuntimeModule.STAGE_ATTACH);
		this.runtimeRequirements = runtimeRequirements;
	}

	/**
	 * @private
	 * @param {Chunk} chunk chunk
	 * @param {string} rootOutputDir root output directory
	 * @returns {string} generated code
	 */
	_generateBaseUri(chunk, rootOutputDir) {
		const options = chunk.getEntryOptions();
		if (options &amp;&amp; options.baseUri) {
			return `${RuntimeGlobals.baseURI} = ${JSON.stringify(options.baseUri)};`;
		}

		return `${RuntimeGlobals.baseURI} = require(&quot;url&quot;).pathToFileURL(${
			rootOutputDir !== &quot;./&quot;
				? `__dirname + ${JSON.stringify(`/${rootOutputDir}`)}`
				: &quot;__filename&quot;
		});`;
	}

	/**
	 * @returns {string | null} runtime code
	 */
	generate() {
		const compilation = /** @type {Compilation} */ (this.compilation);
		const chunkGraph = /** @type {ChunkGraph} */ (this.chunkGraph);
		const chunk = /** @type {Chunk} */ (this.chunk);
		const { runtimeTemplate } = compilation;
		const fn = RuntimeGlobals.ensureChunkHandlers;
		const withBaseURI = this.runtimeRequirements.has(RuntimeGlobals.baseURI);
		const withExternalInstallChunk = this.runtimeRequirements.has(
			RuntimeGlobals.externalInstallChunk
		);
		const withOnChunkLoad = this.runtimeRequirements.has(
			RuntimeGlobals.onChunksLoaded
		);
		const withLoading = this.runtimeRequirements.has(
			RuntimeGlobals.ensureChunkHandlers
		);
		const withHmr = this.runtimeRequirements.has(
			RuntimeGlobals.hmrDownloadUpdateHandlers
		);
		const withHmrManifest = this.runtimeRequirements.has(
			RuntimeGlobals.hmrDownloadManifest
		);
		const conditionMap = chunkGraph.getChunkConditionMap(chunk, chunkHasJs);
		const hasJsMatcher = compileBooleanMatcher(conditionMap);
		const initialChunkIds = getInitialChunkIds(chunk, chunkGraph, chunkHasJs);

		const outputName = compilation.getPath(
			getChunkFilenameTemplate(chunk, compilation.outputOptions),
			{
				chunk,
				contentHashType: &quot;javascript&quot;
			}
		);
		const rootOutputDir = getUndoPath(
			outputName,
			/** @type {string} */ (compilation.outputOptions.path),
			true
		);

		const stateExpression = withHmr
			? `${RuntimeGlobals.hmrRuntimeStatePrefix}_require`
			: undefined;

		return Template.asString([
			withBaseURI
				? this._generateBaseUri(chunk, rootOutputDir)
				: &quot;// no baseURI&quot;,
			&quot;&quot;,
			&quot;// object to store loaded chunks&quot;,
			&#039;// &quot;1&quot; means &quot;loaded&quot;, otherwise not loaded yet&#039;,
			`var installedChunks = ${
				stateExpression ? `${stateExpression} = ${stateExpression} || ` : &quot;&quot;
			}{`,
			Template.indent(
				Array.from(initialChunkIds, id =&gt; `${JSON.stringify(id)}: 1`).join(
					&quot;,\n&quot;
				)
			),
			&quot;};&quot;,
			&quot;&quot;,
			withOnChunkLoad
				? `${
						RuntimeGlobals.onChunksLoaded
					}.require = ${runtimeTemplate.returningFunction(
						&quot;installedChunks[chunkId]&quot;,
						&quot;chunkId&quot;
					)};`
				: &quot;// no on chunks loaded&quot;,
			&quot;&quot;,
			withLoading || withExternalInstallChunk
				? `var installChunk = ${runtimeTemplate.basicFunction(&quot;chunk&quot;, [
						&quot;var moreModules = chunk.modules, chunkIds = chunk.ids, runtime = chunk.runtime;&quot;,
						&quot;for(var moduleId in moreModules) {&quot;,
						Template.indent([
							`if(${RuntimeGlobals.hasOwnProperty}(moreModules, moduleId)) {`,
							Template.indent([
								`${RuntimeGlobals.moduleFactories}[moduleId] = moreModules[moduleId];`
							]),
							&quot;}&quot;
						]),
						&quot;}&quot;,
						`if(runtime) runtime(${RuntimeGlobals.require});`,
						&quot;for(var i = 0; i &lt; chunkIds.length; i++)&quot;,
						Template.indent(&quot;installedChunks[chunkIds[i]] = 1;&quot;),
						withOnChunkLoad ? `${RuntimeGlobals.onChunksLoaded}();` : &quot;&quot;
					])};`
				: &quot;// no chunk install function needed&quot;,
			&quot;&quot;,
			withLoading
				? Template.asString([
						&quot;// require() chunk loading for javascript&quot;,
						`${fn}.require = ${runtimeTemplate.basicFunction(
							&quot;chunkId, promises&quot;,
							hasJsMatcher !== false
								? [
										&#039;// &quot;1&quot; is the signal for &quot;already loaded&quot;&#039;,
										&quot;if(!installedChunks[chunkId]) {&quot;,
										Template.indent([
											hasJsMatcher === true
												? &quot;if(true) { // all chunks have JS&quot;
												: `if(${hasJsMatcher(&quot;chunkId&quot;)}) {`,
											Template.indent([
												`installChunk(require(${JSON.stringify(
													rootOutputDir
												)} + ${
													RuntimeGlobals.getChunkScriptFilename
												}(chunkId)));`
											]),
											&quot;} else installedChunks[chunkId] = 1;&quot;,
											&quot;&quot;
										]),
										&quot;}&quot;
									]
								: &quot;installedChunks[chunkId] = 1;&quot;
						)};`
					])
				: &quot;// no chunk loading&quot;,
			&quot;&quot;,
			withExternalInstallChunk
				? Template.asString([
						`module.exports = ${RuntimeGlobals.require};`,
						`${RuntimeGlobals.externalInstallChunk} = installChunk;`
					])
				: &quot;// no external install chunk&quot;,
			&quot;&quot;,
			withHmr
				? Template.asString([
						&quot;function loadUpdateChunk(chunkId, updatedModulesList) {&quot;,
						Template.indent([
							`var update = require(${JSON.stringify(rootOutputDir)} + ${
								RuntimeGlobals.getChunkUpdateScriptFilename
							}(chunkId));`,
							&quot;var updatedModules = update.modules;&quot;,
							&quot;var runtime = update.runtime;&quot;,
							&quot;for(var moduleId in updatedModules) {&quot;,
							Template.indent([
								`if(${RuntimeGlobals.hasOwnProperty}(updatedModules, moduleId)) {`,
								Template.indent([
									&quot;currentUpdate[moduleId] = updatedModules[moduleId];&quot;,
									&quot;if(updatedModulesList) updatedModulesList.push(moduleId);&quot;
								]),
								&quot;}&quot;
							]),
							&quot;}&quot;,
							&quot;if(runtime) currentUpdateRuntime.push(runtime);&quot;
						]),
						&quot;}&quot;,
						&quot;&quot;,
						Template.getFunctionContent(
							require(&quot;../hmr/JavascriptHotModuleReplacement.runtime.js&quot;)
						)
							.replace(/\$key\$/g, &quot;require&quot;)
							.replace(/\$installedChunks\$/g, &quot;installedChunks&quot;)
							.replace(/\$loadUpdateChunk\$/g, &quot;loadUpdateChunk&quot;)
							.replace(/\$moduleCache\$/g, RuntimeGlobals.moduleCache)
							.replace(/\$moduleFactories\$/g, RuntimeGlobals.moduleFactories)
							.replace(
								/\$ensureChunkHandlers\$/g,
								RuntimeGlobals.ensureChunkHandlers
							)
							.replace(/\$hasOwnProperty\$/g, RuntimeGlobals.hasOwnProperty)
							.replace(/\$hmrModuleData\$/g, RuntimeGlobals.hmrModuleData)
							.replace(
								/\$hmrDownloadUpdateHandlers\$/g,
								RuntimeGlobals.hmrDownloadUpdateHandlers
							)
							.replace(
								/\$hmrInvalidateModuleHandlers\$/g,
								RuntimeGlobals.hmrInvalidateModuleHandlers
							)
					])
				: &quot;// no HMR&quot;,
			&quot;&quot;,
			withHmrManifest
				? Template.asString([
						`${RuntimeGlobals.hmrDownloadManifest} = function() {`,
						Template.indent([
							&quot;return Promise.resolve().then(function() {&quot;,
							Template.indent([
								`return require(${JSON.stringify(rootOutputDir)} + ${
									RuntimeGlobals.getUpdateManifestFilename
								}());`
							]),
							&quot;})[&#039;catch&#039;](function(err) { if(err.code !== &#039;MODULE_NOT_FOUND&#039;) throw err; });&quot;
						]),
						&quot;}&quot;
					])
				: &quot;// no HMR manifest&quot;
		]);
	}
}

module.exports = RequireChunkLoadingRuntimeModule;
</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
