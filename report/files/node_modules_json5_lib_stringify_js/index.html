<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/json5/lib/stringify.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato-file.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="https://github.com/the-simian/es6-plato">ES6 Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
      <li class="active">
        <a href="display.html">Summary Display</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/json5/lib/stringify.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">49.58</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">262</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">61.05</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">2.19</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">const util = require(&#039;./util&#039;)

module.exports = function stringify (value, replacer, space) {
    const stack = []
    let indent = &#039;&#039;
    let propertyList
    let replacerFunc
    let gap = &#039;&#039;
    let quote

    if (
        replacer != null &amp;&amp;
        typeof replacer === &#039;object&#039; &amp;&amp;
        !Array.isArray(replacer)
    ) {
        space = replacer.space
        quote = replacer.quote
        replacer = replacer.replacer
    }

    if (typeof replacer === &#039;function&#039;) {
        replacerFunc = replacer
    } else if (Array.isArray(replacer)) {
        propertyList = []
        for (const v of replacer) {
            let item

            if (typeof v === &#039;string&#039;) {
                item = v
            } else if (
                typeof v === &#039;number&#039; ||
                v instanceof String ||
                v instanceof Number
            ) {
                item = String(v)
            }

            if (item !== undefined &amp;&amp; propertyList.indexOf(item) &lt; 0) {
                propertyList.push(item)
            }
        }
    }

    if (space instanceof Number) {
        space = Number(space)
    } else if (space instanceof String) {
        space = String(space)
    }

    if (typeof space === &#039;number&#039;) {
        if (space &gt; 0) {
            space = Math.min(10, Math.floor(space))
            gap = &#039;          &#039;.substr(0, space)
        }
    } else if (typeof space === &#039;string&#039;) {
        gap = space.substr(0, 10)
    }

    return serializeProperty(&#039;&#039;, {&#039;&#039;: value})

    function serializeProperty (key, holder) {
        let value = holder[key]
        if (value != null) {
            if (typeof value.toJSON5 === &#039;function&#039;) {
                value = value.toJSON5(key)
            } else if (typeof value.toJSON === &#039;function&#039;) {
                value = value.toJSON(key)
            }
        }

        if (replacerFunc) {
            value = replacerFunc.call(holder, key, value)
        }

        if (value instanceof Number) {
            value = Number(value)
        } else if (value instanceof String) {
            value = String(value)
        } else if (value instanceof Boolean) {
            value = value.valueOf()
        }

        switch (value) {
        case null: return &#039;null&#039;
        case true: return &#039;true&#039;
        case false: return &#039;false&#039;
        }

        if (typeof value === &#039;string&#039;) {
            return quoteString(value, false)
        }

        if (typeof value === &#039;number&#039;) {
            return String(value)
        }

        if (typeof value === &#039;object&#039;) {
            return Array.isArray(value) ? serializeArray(value) : serializeObject(value)
        }

        return undefined
    }

    function quoteString (value) {
        const quotes = {
            &quot;&#039;&quot;: 0.1,
            &#039;&quot;&#039;: 0.2,
        }

        const replacements = {
            &quot;&#039;&quot;: &quot;\\&#039;&quot;,
            &#039;&quot;&#039;: &#039;\\&quot;&#039;,
            &#039;\\&#039;: &#039;\\\\&#039;,
            &#039;\b&#039;: &#039;\\b&#039;,
            &#039;\f&#039;: &#039;\\f&#039;,
            &#039;\n&#039;: &#039;\\n&#039;,
            &#039;\r&#039;: &#039;\\r&#039;,
            &#039;\t&#039;: &#039;\\t&#039;,
            &#039;\v&#039;: &#039;\\v&#039;,
            &#039;\0&#039;: &#039;\\0&#039;,
            &#039;\u2028&#039;: &#039;\\u2028&#039;,
            &#039;\u2029&#039;: &#039;\\u2029&#039;,
        }

        let product = &#039;&#039;

        for (let i = 0; i &lt; value.length; i++) {
            const c = value[i]
            switch (c) {
            case &quot;&#039;&quot;:
            case &#039;&quot;&#039;:
                quotes[c]++
                product += c
                continue

            case &#039;\0&#039;:
                if (util.isDigit(value[i + 1])) {
                    product += &#039;\\x00&#039;
                    continue
                }
            }

            if (replacements[c]) {
                product += replacements[c]
                continue
            }

            if (c &lt; &#039; &#039;) {
                let hexString = c.charCodeAt(0).toString(16)
                product += &#039;\\x&#039; + (&#039;00&#039; + hexString).substring(hexString.length)
                continue
            }

            product += c
        }

        const quoteChar = quote || Object.keys(quotes).reduce((a, b) =&gt; (quotes[a] &lt; quotes[b]) ? a : b)

        product = product.replace(new RegExp(quoteChar, &#039;g&#039;), replacements[quoteChar])

        return quoteChar + product + quoteChar
    }

    function serializeObject (value) {
        if (stack.indexOf(value) &gt;= 0) {
            throw TypeError(&#039;Converting circular structure to JSON5&#039;)
        }

        stack.push(value)

        let stepback = indent
        indent = indent + gap

        let keys = propertyList || Object.keys(value)
        let partial = []
        for (const key of keys) {
            const propertyString = serializeProperty(key, value)
            if (propertyString !== undefined) {
                let member = serializeKey(key) + &#039;:&#039;
                if (gap !== &#039;&#039;) {
                    member += &#039; &#039;
                }
                member += propertyString
                partial.push(member)
            }
        }

        let final
        if (partial.length === 0) {
            final = &#039;{}&#039;
        } else {
            let properties
            if (gap === &#039;&#039;) {
                properties = partial.join(&#039;,&#039;)
                final = &#039;{&#039; + properties + &#039;}&#039;
            } else {
                let separator = &#039;,\n&#039; + indent
                properties = partial.join(separator)
                final = &#039;{\n&#039; + indent + properties + &#039;,\n&#039; + stepback + &#039;}&#039;
            }
        }

        stack.pop()
        indent = stepback
        return final
    }

    function serializeKey (key) {
        if (key.length === 0) {
            return quoteString(key, true)
        }

        const firstChar = String.fromCodePoint(key.codePointAt(0))
        if (!util.isIdStartChar(firstChar)) {
            return quoteString(key, true)
        }

        for (let i = firstChar.length; i &lt; key.length; i++) {
            if (!util.isIdContinueChar(String.fromCodePoint(key.codePointAt(i)))) {
                return quoteString(key, true)
            }
        }

        return key
    }

    function serializeArray (value) {
        if (stack.indexOf(value) &gt;= 0) {
            throw TypeError(&#039;Converting circular structure to JSON5&#039;)
        }

        stack.push(value)

        let stepback = indent
        indent = indent + gap

        let partial = []
        for (let i = 0; i &lt; value.length; i++) {
            const propertyString = serializeProperty(String(i), value)
            partial.push((propertyString !== undefined) ? propertyString : &#039;null&#039;)
        }

        let final
        if (partial.length === 0) {
            final = &#039;[]&#039;
        } else {
            if (gap === &#039;&#039;) {
                let properties = partial.join(&#039;,&#039;)
                final = &#039;[&#039; + properties + &#039;]&#039;
            } else {
                let separator = &#039;,\n&#039; + indent
                let properties = partial.join(separator)
                final = &#039;[\n&#039; + indent + properties + &#039;,\n&#039; + stepback + &#039;]&#039;
            }
        }

        stack.pop()
        indent = stepback
        return final
    }
}
</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
