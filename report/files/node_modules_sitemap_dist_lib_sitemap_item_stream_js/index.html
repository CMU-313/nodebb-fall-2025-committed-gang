<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/sitemap/dist/lib/sitemap-item-stream.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato-file.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="https://github.com/the-simian/es6-plato">ES6 Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
      <li class="active">
        <a href="display.html">Summary Display</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/sitemap/dist/lib/sitemap-item-stream.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">53.06</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">194</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">51.62</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">3.28</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">&quot;use strict&quot;;
Object.defineProperty(exports, &quot;__esModule&quot;, { value: true });
exports.SitemapItemStream = void 0;
const stream_1 = require(&quot;stream&quot;);
const errors_1 = require(&quot;./errors&quot;);
const types_1 = require(&quot;./types&quot;);
const sitemap_xml_1 = require(&quot;./sitemap-xml&quot;);
function attrBuilder(conf, keys) {
    if (typeof keys === &#039;string&#039;) {
        keys = [keys];
    }
    const iv = {};
    return keys.reduce((attrs, key) =&gt; {
        // eslint-disable-next-line
        if (conf[key] !== undefined) {
            const keyAr = key.split(&#039;:&#039;);
            if (keyAr.length !== 2) {
                throw new errors_1.InvalidAttr(key);
            }
            attrs[keyAr[1]] = conf[key];
        }
        return attrs;
    }, iv);
}
/**
 * Takes a stream of SitemapItemOptions and spits out xml for each
 * @example
 * // writes &lt;url&gt;&lt;loc&gt;https://example.com&lt;/loc&gt;&lt;url&gt;&lt;url&gt;&lt;loc&gt;https://example.com/2&lt;/loc&gt;&lt;url&gt;
 * const smis = new SitemapItemStream({level: &#039;warn&#039;})
 * smis.pipe(writestream)
 * smis.write({url: &#039;https://example.com&#039;, img: [], video: [], links: []})
 * smis.write({url: &#039;https://example.com/2&#039;, img: [], video: [], links: []})
 * smis.end()
 * @param level - Error level
 */
class SitemapItemStream extends stream_1.Transform {
    constructor(opts = { level: types_1.ErrorLevel.WARN }) {
        opts.objectMode = true;
        super(opts);
        this.level = opts.level || types_1.ErrorLevel.WARN;
    }
    _transform(item, encoding, callback) {
        this.push((0, sitemap_xml_1.otag)(types_1.TagNames.url));
        this.push((0, sitemap_xml_1.element)(types_1.TagNames.loc, item.url));
        if (item.lastmod) {
            this.push((0, sitemap_xml_1.element)(types_1.TagNames.lastmod, item.lastmod));
        }
        if (item.changefreq) {
            this.push((0, sitemap_xml_1.element)(types_1.TagNames.changefreq, item.changefreq));
        }
        if (item.priority !== undefined &amp;&amp; item.priority !== null) {
            if (item.fullPrecisionPriority) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames.priority, item.priority.toString()));
            }
            else {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames.priority, item.priority.toFixed(1)));
            }
        }
        item.video.forEach((video) =&gt; {
            this.push((0, sitemap_xml_1.otag)(types_1.TagNames[&#039;video:video&#039;]));
            this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:thumbnail_loc&#039;], video.thumbnail_loc));
            this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:title&#039;], video.title));
            this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:description&#039;], video.description));
            if (video.content_loc) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:content_loc&#039;], video.content_loc));
            }
            if (video.player_loc) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:player_loc&#039;], attrBuilder(video, [
                    &#039;player_loc:autoplay&#039;,
                    &#039;player_loc:allow_embed&#039;,
                ]), video.player_loc));
            }
            if (video.duration) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:duration&#039;], video.duration.toString()));
            }
            if (video.expiration_date) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:expiration_date&#039;], video.expiration_date));
            }
            if (video.rating !== undefined) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:rating&#039;], video.rating.toString()));
            }
            if (video.view_count !== undefined) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:view_count&#039;], video.view_count.toString()));
            }
            if (video.publication_date) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:publication_date&#039;], video.publication_date));
            }
            for (const tag of video.tag) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:tag&#039;], tag));
            }
            if (video.category) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:category&#039;], video.category));
            }
            if (video.family_friendly) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:family_friendly&#039;], video.family_friendly));
            }
            if (video.restriction) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:restriction&#039;], attrBuilder(video, &#039;restriction:relationship&#039;), video.restriction));
            }
            if (video.gallery_loc) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:gallery_loc&#039;], { title: video[&#039;gallery_loc:title&#039;] }, video.gallery_loc));
            }
            if (video.price) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:price&#039;], attrBuilder(video, [
                    &#039;price:resolution&#039;,
                    &#039;price:currency&#039;,
                    &#039;price:type&#039;,
                ]), video.price));
            }
            if (video.requires_subscription) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:requires_subscription&#039;], video.requires_subscription));
            }
            if (video.uploader) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:uploader&#039;], attrBuilder(video, &#039;uploader:info&#039;), video.uploader));
            }
            if (video.platform) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:platform&#039;], attrBuilder(video, &#039;platform:relationship&#039;), video.platform));
            }
            if (video.live) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:live&#039;], video.live));
            }
            if (video.id) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;video:id&#039;], { type: &#039;url&#039; }, video.id));
            }
            this.push((0, sitemap_xml_1.ctag)(types_1.TagNames[&#039;video:video&#039;]));
        });
        item.links.forEach((link) =&gt; {
            this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;xhtml:link&#039;], {
                rel: &#039;alternate&#039;,
                hreflang: link.lang || link.hreflang,
                href: link.url,
            }));
        });
        if (item.expires) {
            this.push((0, sitemap_xml_1.element)(types_1.TagNames.expires, new Date(item.expires).toISOString()));
        }
        if (item.androidLink) {
            this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;xhtml:link&#039;], {
                rel: &#039;alternate&#039;,
                href: item.androidLink,
            }));
        }
        if (item.ampLink) {
            this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;xhtml:link&#039;], {
                rel: &#039;amphtml&#039;,
                href: item.ampLink,
            }));
        }
        if (item.news) {
            this.push((0, sitemap_xml_1.otag)(types_1.TagNames[&#039;news:news&#039;]));
            this.push((0, sitemap_xml_1.otag)(types_1.TagNames[&#039;news:publication&#039;]));
            this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;news:name&#039;], item.news.publication.name));
            this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;news:language&#039;], item.news.publication.language));
            this.push((0, sitemap_xml_1.ctag)(types_1.TagNames[&#039;news:publication&#039;]));
            if (item.news.access) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;news:access&#039;], item.news.access));
            }
            if (item.news.genres) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;news:genres&#039;], item.news.genres));
            }
            this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;news:publication_date&#039;], item.news.publication_date));
            this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;news:title&#039;], item.news.title));
            if (item.news.keywords) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;news:keywords&#039;], item.news.keywords));
            }
            if (item.news.stock_tickers) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;news:stock_tickers&#039;], item.news.stock_tickers));
            }
            this.push((0, sitemap_xml_1.ctag)(types_1.TagNames[&#039;news:news&#039;]));
        }
        // Image handling
        item.img.forEach((image) =&gt; {
            this.push((0, sitemap_xml_1.otag)(types_1.TagNames[&#039;image:image&#039;]));
            this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;image:loc&#039;], image.url));
            if (image.caption) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;image:caption&#039;], image.caption));
            }
            if (image.geoLocation) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;image:geo_location&#039;], image.geoLocation));
            }
            if (image.title) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;image:title&#039;], image.title));
            }
            if (image.license) {
                this.push((0, sitemap_xml_1.element)(types_1.TagNames[&#039;image:license&#039;], image.license));
            }
            this.push((0, sitemap_xml_1.ctag)(types_1.TagNames[&#039;image:image&#039;]));
        });
        this.push((0, sitemap_xml_1.ctag)(types_1.TagNames.url));
        callback();
    }
}
exports.SitemapItemStream = SitemapItemStream;
</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
