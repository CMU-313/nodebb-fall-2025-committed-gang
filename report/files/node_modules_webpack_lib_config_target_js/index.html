<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/webpack/lib/config/target.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato-file.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="https://github.com/the-simian/es6-plato">ES6 Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
      <li class="active">
        <a href="display.html">Summary Display</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/webpack/lib/config/target.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">62.49</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">378</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">54.93</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">2.31</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/

&quot;use strict&quot;;

const memoize = require(&quot;../util/memoize&quot;);

const getBrowserslistTargetHandler = memoize(() =&gt;
	require(&quot;./browserslistTargetHandler&quot;)
);

/**
 * @param {string} context the context directory
 * @returns {string} default target
 */
const getDefaultTarget = context =&gt; {
	const browsers = getBrowserslistTargetHandler().load(null, context);
	return browsers ? &quot;browserslist&quot; : &quot;web&quot;;
};

/**
 * @typedef {object} PlatformTargetProperties
 * @property {boolean | null=} web web platform, importing of http(s) and std: is available
 * @property {boolean | null=} browser browser platform, running in a normal web browser
 * @property {boolean | null=} webworker (Web)Worker platform, running in a web/shared/service worker
 * @property {boolean | null=} node node platform, require of node built-in modules is available
 * @property {boolean | null=} nwjs nwjs platform, require of legacy nw.gui is available
 * @property {boolean | null=} electron electron platform, require of some electron built-in modules is available
 */

/**
 * @typedef {object} ElectronContextTargetProperties
 * @property {boolean | null} electronMain in main context
 * @property {boolean | null} electronPreload in preload context
 * @property {boolean | null} electronRenderer in renderer context with node integration
 */

/**
 * @typedef {object} ApiTargetProperties
 * @property {boolean | null} require has require function available
 * @property {boolean | null} nodeBuiltins has node.js built-in modules available
 * @property {boolean | null} nodePrefixForCoreModules node.js allows to use `node:` prefix for core modules
 * @property {boolean | null} document has document available (allows script tags)
 * @property {boolean | null} importScripts has importScripts available
 * @property {boolean | null} importScriptsInWorker has importScripts available when creating a worker
 * @property {boolean | null} fetchWasm has fetch function available for WebAssembly
 * @property {boolean | null} global has global variable available
 */

/**
 * @typedef {object} EcmaTargetProperties
 * @property {boolean | null} globalThis has globalThis variable available
 * @property {boolean | null} bigIntLiteral big int literal syntax is available
 * @property {boolean | null} const const and let variable declarations are available
 * @property {boolean | null} arrowFunction arrow functions are available
 * @property {boolean | null} forOf for of iteration is available
 * @property {boolean | null} destructuring destructuring is available
 * @property {boolean | null} dynamicImport async import() is available
 * @property {boolean | null} dynamicImportInWorker async import() is available when creating a worker
 * @property {boolean | null} module ESM syntax is available (when in module)
 * @property {boolean | null} optionalChaining optional chaining is available
 * @property {boolean | null} templateLiteral template literal is available
 * @property {boolean | null} asyncFunction async functions and await are available
 */

/**
 * @template T
 * @typedef {{ [P in keyof T]?: never }} Never&lt;T&gt;
 */

/**
 * @template A
 * @template B
 * @typedef {(A &amp; Never&lt;B&gt;) | (Never&lt;A&gt; &amp; B) | (A &amp; B)} Mix&lt;A, B&gt;
 */

/** @typedef {Mix&lt;Mix&lt;PlatformTargetProperties, ElectronContextTargetProperties&gt;, Mix&lt;ApiTargetProperties, EcmaTargetProperties&gt;&gt;} TargetProperties */

/**
 * @param {string} major major version
 * @param {string | undefined} minor minor version
 * @returns {(vMajor: number, vMinor?: number) =&gt; boolean | undefined} check if version is greater or equal
 */
const versionDependent = (major, minor) =&gt; {
	if (!major) {
		return () =&gt; /** @type {undefined} */ (undefined);
	}
	/** @type {number} */
	const nMajor = Number(major);
	/** @type {number} */
	const nMinor = minor ? Number(minor) : 0;
	return (vMajor, vMinor = 0) =&gt;
		nMajor &gt; vMajor || (nMajor === vMajor &amp;&amp; nMinor &gt;= vMinor);
};

/** @type {[string, string, RegExp, (...args: string[]) =&gt; Partial&lt;TargetProperties&gt;][]} */
const TARGETS = [
	[
		&quot;browserslist / browserslist:env / browserslist:query / browserslist:path-to-config / browserslist:path-to-config:env&quot;,
		&quot;Resolve features from browserslist. Will resolve browserslist config automatically. Only browser or node queries are supported (electron is not supported). Examples: &#039;browserslist:modern&#039; to use &#039;modern&#039; environment from browserslist config&quot;,
		/^browserslist(?::(.+))?$/,
		(rest, context) =&gt; {
			const browserslistTargetHandler = getBrowserslistTargetHandler();
			const browsers = browserslistTargetHandler.load(
				rest ? rest.trim() : null,
				context
			);
			if (!browsers) {
				throw new Error(`No browserslist config found to handle the &#039;browserslist&#039; target.
See https://github.com/browserslist/browserslist#queries for possible ways to provide a config.
The recommended way is to add a &#039;browserslist&#039; key to your package.json and list supported browsers (resp. node.js versions).
You can also more options via the &#039;target&#039; option: &#039;browserslist&#039; / &#039;browserslist:env&#039; / &#039;browserslist:query&#039; / &#039;browserslist:path-to-config&#039; / &#039;browserslist:path-to-config:env&#039;`);
			}

			return browserslistTargetHandler.resolve(browsers);
		}
	],
	[
		&quot;web&quot;,
		&quot;Web browser.&quot;,
		/^web$/,
		() =&gt; ({
			node: false,
			web: true,
			webworker: null,
			browser: true,
			electron: false,
			nwjs: false,

			document: true,
			importScriptsInWorker: true,
			fetchWasm: true,
			nodeBuiltins: false,
			importScripts: false,
			require: false,
			global: false
		})
	],
	[
		&quot;webworker&quot;,
		&quot;Web Worker, SharedWorker or Service Worker.&quot;,
		/^webworker$/,
		() =&gt; ({
			node: false,
			web: true,
			webworker: true,
			browser: true,
			electron: false,
			nwjs: false,

			importScripts: true,
			importScriptsInWorker: true,
			fetchWasm: true,
			nodeBuiltins: false,
			require: false,
			document: false,
			global: false
		})
	],
	[
		&quot;[async-]node[X[.Y]]&quot;,
		&quot;Node.js in version X.Y. The &#039;async-&#039; prefix will load chunks asynchronously via &#039;fs&#039; and &#039;vm&#039; instead of &#039;require()&#039;. Examples: node14.5, async-node10.&quot;,
		/^(async-)?node((\d+)(?:\.(\d+))?)?$/,
		(asyncFlag, _, major, minor) =&gt; {
			const v = versionDependent(major, minor);
			// see https://node.green/
			return {
				node: true,
				web: false,
				webworker: false,
				browser: false,
				electron: false,
				nwjs: false,

				require: !asyncFlag,
				nodeBuiltins: true,
				// v16.0.0, v14.18.0
				nodePrefixForCoreModules: Number(major) &lt; 15 ? v(14, 18) : v(16),
				global: true,
				document: false,
				fetchWasm: false,
				importScripts: false,
				importScriptsInWorker: false,

				globalThis: v(12),
				const: v(6),
				templateLiteral: v(4),
				optionalChaining: v(14),
				arrowFunction: v(6),
				asyncFunction: v(7, 6),
				forOf: v(5),
				destructuring: v(6),
				bigIntLiteral: v(10, 4),
				dynamicImport: v(12, 17),
				dynamicImportInWorker: major ? false : undefined,
				module: v(12, 17)
			};
		}
	],
	[
		&quot;electron[X[.Y]]-main/preload/renderer&quot;,
		&quot;Electron in version X.Y. Script is running in main, preload resp. renderer context.&quot;,
		/^electron((\d+)(?:\.(\d+))?)?-(main|preload|renderer)$/,
		(_, major, minor, context) =&gt; {
			const v = versionDependent(major, minor);
			// see https://node.green/ + https://github.com/electron/releases
			return {
				node: true,
				web: context !== &quot;main&quot;,
				webworker: false,
				browser: false,
				electron: true,
				nwjs: false,

				electronMain: context === &quot;main&quot;,
				electronPreload: context === &quot;preload&quot;,
				electronRenderer: context === &quot;renderer&quot;,

				global: true,
				nodeBuiltins: true,
				// 15.0.0	- Node.js	v16.5
				// 14.0.0 - Mode.js v14.17, but prefixes only since v14.18
				nodePrefixForCoreModules: v(15),

				require: true,
				document: context === &quot;renderer&quot;,
				fetchWasm: context === &quot;renderer&quot;,
				importScripts: false,
				importScriptsInWorker: true,

				globalThis: v(5),
				const: v(1, 1),
				templateLiteral: v(1, 1),
				optionalChaining: v(8),
				arrowFunction: v(1, 1),
				asyncFunction: v(1, 7),
				forOf: v(0, 36),
				destructuring: v(1, 1),
				bigIntLiteral: v(4),
				dynamicImport: v(11),
				dynamicImportInWorker: major ? false : undefined,
				module: v(11)
			};
		}
	],
	[
		&quot;nwjs[X[.Y]] / node-webkit[X[.Y]]&quot;,
		&quot;NW.js in version X.Y.&quot;,
		/^(?:nwjs|node-webkit)((\d+)(?:\.(\d+))?)?$/,
		(_, major, minor) =&gt; {
			const v = versionDependent(major, minor);
			// see https://node.green/ + https://github.com/nwjs/nw.js/blob/nw48/CHANGELOG.md
			return {
				node: true,
				web: true,
				webworker: null,
				browser: false,
				electron: false,
				nwjs: true,

				global: true,
				nodeBuiltins: true,
				document: false,
				importScriptsInWorker: false,
				fetchWasm: false,
				importScripts: false,
				require: false,

				globalThis: v(0, 43),
				const: v(0, 15),
				templateLiteral: v(0, 13),
				optionalChaining: v(0, 44),
				arrowFunction: v(0, 15),
				asyncFunction: v(0, 21),
				forOf: v(0, 13),
				destructuring: v(0, 15),
				bigIntLiteral: v(0, 32),
				dynamicImport: v(0, 43),
				dynamicImportInWorker: major ? false : undefined,
				module: v(0, 43)
			};
		}
	],
	[
		&quot;esX&quot;,
		&quot;EcmaScript in this version. Examples: es2020, es5.&quot;,
		/^es(\d+)$/,
		version =&gt; {
			let v = Number(version);
			if (v &lt; 1000) v = v + 2009;
			return {
				const: v &gt;= 2015,
				templateLiteral: v &gt;= 2015,
				optionalChaining: v &gt;= 2020,
				arrowFunction: v &gt;= 2015,
				forOf: v &gt;= 2015,
				destructuring: v &gt;= 2015,
				module: v &gt;= 2015,
				asyncFunction: v &gt;= 2017,
				globalThis: v &gt;= 2020,
				bigIntLiteral: v &gt;= 2020,
				dynamicImport: v &gt;= 2020,
				dynamicImportInWorker: v &gt;= 2020
			};
		}
	]
];

/**
 * @param {string} target the target
 * @param {string} context the context directory
 * @returns {TargetProperties} target properties
 */
const getTargetProperties = (target, context) =&gt; {
	for (const [, , regExp, handler] of TARGETS) {
		const match = regExp.exec(target);
		if (match) {
			const [, ...args] = match;
			const result = handler(...args, context);
			if (result) return /** @type {TargetProperties} */ (result);
		}
	}
	throw new Error(
		`Unknown target &#039;${target}&#039;. The following targets are supported:\n${TARGETS.map(
			([name, description]) =&gt; `* ${name}: ${description}`
		).join(&quot;\n&quot;)}`
	);
};

/**
 * @param {TargetProperties[]} targetProperties array of target properties
 * @returns {TargetProperties} merged target properties
 */
const mergeTargetProperties = targetProperties =&gt; {
	/** @type {Set&lt;keyof TargetProperties&gt;} */
	const keys = new Set();
	for (const tp of targetProperties) {
		for (const key of Object.keys(tp)) {
			keys.add(/** @type {keyof TargetProperties} */ (key));
		}
	}
	/** @type {TargetProperties} */
	const result = {};
	for (const key of keys) {
		let hasTrue = false;
		let hasFalse = false;
		for (const tp of targetProperties) {
			const value = tp[key];
			switch (value) {
				case true:
					hasTrue = true;
					break;
				case false:
					hasFalse = true;
					break;
			}
		}
		if (hasTrue || hasFalse)
			/** @type {TargetProperties} */
			(result)[key] = hasFalse &amp;&amp; hasTrue ? null : Boolean(hasTrue);
	}
	return result;
};

/**
 * @param {string[]} targets the targets
 * @param {string} context the context directory
 * @returns {TargetProperties} target properties
 */
const getTargetsProperties = (targets, context) =&gt;
	mergeTargetProperties(targets.map(t =&gt; getTargetProperties(t, context)));

module.exports.getDefaultTarget = getDefaultTarget;
module.exports.getTargetProperties = getTargetProperties;
module.exports.getTargetsProperties = getTargetsProperties;
</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
