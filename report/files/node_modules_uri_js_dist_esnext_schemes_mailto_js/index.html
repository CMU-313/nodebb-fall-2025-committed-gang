<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/uri-js/dist/esnext/schemes/mailto.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato-file.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="https://github.com/the-simian/es6-plato">ES6 Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
      <li class="active">
        <a href="display.html">Summary Display</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/uri-js/dist/esnext/schemes/mailto.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">48.05</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">148</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">51.70</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">2.31</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">import { pctEncChar, pctDecChars, unescapeComponent } from &quot;../uri&quot;;
import punycode from &quot;punycode&quot;;
import { merge, subexp, toUpperCase, toArray } from &quot;../util&quot;;
const O = {};
const isIRI = true;
//RFC 3986
const UNRESERVED$$ = &quot;[A-Za-z0-9\\-\\.\\_\\~&quot; + (isIRI ? &quot;\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF&quot; : &quot;&quot;) + &quot;]&quot;;
const HEXDIG$$ = &quot;[0-9A-Fa-f]&quot;; //case-insensitive
const PCT_ENCODED$ = subexp(subexp(&quot;%[EFef]&quot; + HEXDIG$$ + &quot;%&quot; + HEXDIG$$ + HEXDIG$$ + &quot;%&quot; + HEXDIG$$ + HEXDIG$$) + &quot;|&quot; + subexp(&quot;%[89A-Fa-f]&quot; + HEXDIG$$ + &quot;%&quot; + HEXDIG$$ + HEXDIG$$) + &quot;|&quot; + subexp(&quot;%&quot; + HEXDIG$$ + HEXDIG$$)); //expanded
//RFC 5322, except these symbols as per RFC 6068: @ : / ? # [ ] &amp; ; =
//const ATEXT$$ = &quot;[A-Za-z0-9\\!\\#\\$\\%\\&amp;\\&#039;\\*\\+\\-\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~]&quot;;
//const WSP$$ = &quot;[\\x20\\x09]&quot;;
//const OBS_QTEXT$$ = &quot;[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F]&quot;;  //(%d1-8 / %d11-12 / %d14-31 / %d127)
//const QTEXT$$ = merge(&quot;[\\x21\\x23-\\x5B\\x5D-\\x7E]&quot;, OBS_QTEXT$$);  //%d33 / %d35-91 / %d93-126 / obs-qtext
//const VCHAR$$ = &quot;[\\x21-\\x7E]&quot;;
//const WSP$$ = &quot;[\\x20\\x09]&quot;;
//const OBS_QP$ = subexp(&quot;\\\\&quot; + merge(&quot;[\\x00\\x0D\\x0A]&quot;, OBS_QTEXT$$));  //%d0 / CR / LF / obs-qtext
//const FWS$ = subexp(subexp(WSP$$ + &quot;*&quot; + &quot;\\x0D\\x0A&quot;) + &quot;?&quot; + WSP$$ + &quot;+&quot;);
//const QUOTED_PAIR$ = subexp(subexp(&quot;\\\\&quot; + subexp(VCHAR$$ + &quot;|&quot; + WSP$$)) + &quot;|&quot; + OBS_QP$);
//const QUOTED_STRING$ = subexp(&#039;\\&quot;&#039; + subexp(FWS$ + &quot;?&quot; + QCONTENT$) + &quot;*&quot; + FWS$ + &quot;?&quot; + &#039;\\&quot;&#039;);
const ATEXT$$ = &quot;[A-Za-z0-9\\!\\$\\%\\&#039;\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]&quot;;
const QTEXT$$ = &quot;[\\!\\$\\%\\&#039;\\(\\)\\*\\+\\,\\-\\.0-9\\&lt;\\&gt;A-Z\\x5E-\\x7E]&quot;;
const VCHAR$$ = merge(QTEXT$$, &quot;[\\\&quot;\\\\]&quot;);
const DOT_ATOM_TEXT$ = subexp(ATEXT$$ + &quot;+&quot; + subexp(&quot;\\.&quot; + ATEXT$$ + &quot;+&quot;) + &quot;*&quot;);
const QUOTED_PAIR$ = subexp(&quot;\\\\&quot; + VCHAR$$);
const QCONTENT$ = subexp(QTEXT$$ + &quot;|&quot; + QUOTED_PAIR$);
const QUOTED_STRING$ = subexp(&#039;\\&quot;&#039; + QCONTENT$ + &quot;*&quot; + &#039;\\&quot;&#039;);
//RFC 6068
const DTEXT_NO_OBS$$ = &quot;[\\x21-\\x5A\\x5E-\\x7E]&quot;; //%d33-90 / %d94-126
const SOME_DELIMS$$ = &quot;[\\!\\$\\&#039;\\(\\)\\*\\+\\,\\;\\:\\@]&quot;;
const QCHAR$ = subexp(UNRESERVED$$ + &quot;|&quot; + PCT_ENCODED$ + &quot;|&quot; + SOME_DELIMS$$);
const DOMAIN$ = subexp(DOT_ATOM_TEXT$ + &quot;|&quot; + &quot;\\[&quot; + DTEXT_NO_OBS$$ + &quot;*&quot; + &quot;\\]&quot;);
const LOCAL_PART$ = subexp(DOT_ATOM_TEXT$ + &quot;|&quot; + QUOTED_STRING$);
const ADDR_SPEC$ = subexp(LOCAL_PART$ + &quot;\\@&quot; + DOMAIN$);
const TO$ = subexp(ADDR_SPEC$ + subexp(&quot;\\,&quot; + ADDR_SPEC$) + &quot;*&quot;);
const HFNAME$ = subexp(QCHAR$ + &quot;*&quot;);
const HFVALUE$ = HFNAME$;
const HFIELD$ = subexp(HFNAME$ + &quot;\\=&quot; + HFVALUE$);
const HFIELDS2$ = subexp(HFIELD$ + subexp(&quot;\\&amp;&quot; + HFIELD$) + &quot;*&quot;);
const HFIELDS$ = subexp(&quot;\\?&quot; + HFIELDS2$);
const MAILTO_URI = new RegExp(&quot;^mailto\\:&quot; + TO$ + &quot;?&quot; + HFIELDS$ + &quot;?$&quot;);
const UNRESERVED = new RegExp(UNRESERVED$$, &quot;g&quot;);
const PCT_ENCODED = new RegExp(PCT_ENCODED$, &quot;g&quot;);
const NOT_LOCAL_PART = new RegExp(merge(&quot;[^]&quot;, ATEXT$$, &quot;[\\.]&quot;, &#039;[\\&quot;]&#039;, VCHAR$$), &quot;g&quot;);
const NOT_DOMAIN = new RegExp(merge(&quot;[^]&quot;, ATEXT$$, &quot;[\\.]&quot;, &quot;[\\[]&quot;, DTEXT_NO_OBS$$, &quot;[\\]]&quot;), &quot;g&quot;);
const NOT_HFNAME = new RegExp(merge(&quot;[^]&quot;, UNRESERVED$$, SOME_DELIMS$$), &quot;g&quot;);
const NOT_HFVALUE = NOT_HFNAME;
const TO = new RegExp(&quot;^&quot; + TO$ + &quot;$&quot;);
const HFIELDS = new RegExp(&quot;^&quot; + HFIELDS2$ + &quot;$&quot;);
function decodeUnreserved(str) {
    const decStr = pctDecChars(str);
    return (!decStr.match(UNRESERVED) ? str : decStr);
}
const handler = {
    scheme: &quot;mailto&quot;,
    parse: function (components, options) {
        const mailtoComponents = components;
        const to = mailtoComponents.to = (mailtoComponents.path ? mailtoComponents.path.split(&quot;,&quot;) : []);
        mailtoComponents.path = undefined;
        if (mailtoComponents.query) {
            let unknownHeaders = false;
            const headers = {};
            const hfields = mailtoComponents.query.split(&quot;&amp;&quot;);
            for (let x = 0, xl = hfields.length; x &lt; xl; ++x) {
                const hfield = hfields[x].split(&quot;=&quot;);
                switch (hfield[0]) {
                    case &quot;to&quot;:
                        const toAddrs = hfield[1].split(&quot;,&quot;);
                        for (let x = 0, xl = toAddrs.length; x &lt; xl; ++x) {
                            to.push(toAddrs[x]);
                        }
                        break;
                    case &quot;subject&quot;:
                        mailtoComponents.subject = unescapeComponent(hfield[1], options);
                        break;
                    case &quot;body&quot;:
                        mailtoComponents.body = unescapeComponent(hfield[1], options);
                        break;
                    default:
                        unknownHeaders = true;
                        headers[unescapeComponent(hfield[0], options)] = unescapeComponent(hfield[1], options);
                        break;
                }
            }
            if (unknownHeaders)
                mailtoComponents.headers = headers;
        }
        mailtoComponents.query = undefined;
        for (let x = 0, xl = to.length; x &lt; xl; ++x) {
            const addr = to[x].split(&quot;@&quot;);
            addr[0] = unescapeComponent(addr[0]);
            if (!options.unicodeSupport) {
                //convert Unicode IDN -&gt; ASCII IDN
                try {
                    addr[1] = punycode.toASCII(unescapeComponent(addr[1], options).toLowerCase());
                }
                catch (e) {
                    mailtoComponents.error = mailtoComponents.error || &quot;Email address&#039;s domain name can not be converted to ASCII via punycode: &quot; + e;
                }
            }
            else {
                addr[1] = unescapeComponent(addr[1], options).toLowerCase();
            }
            to[x] = addr.join(&quot;@&quot;);
        }
        return mailtoComponents;
    },
    serialize: function (mailtoComponents, options) {
        const components = mailtoComponents;
        const to = toArray(mailtoComponents.to);
        if (to) {
            for (let x = 0, xl = to.length; x &lt; xl; ++x) {
                const toAddr = String(to[x]);
                const atIdx = toAddr.lastIndexOf(&quot;@&quot;);
                const localPart = (toAddr.slice(0, atIdx)).replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_LOCAL_PART, pctEncChar);
                let domain = toAddr.slice(atIdx + 1);
                //convert IDN via punycode
                try {
                    domain = (!options.iri ? punycode.toASCII(unescapeComponent(domain, options).toLowerCase()) : punycode.toUnicode(domain));
                }
                catch (e) {
                    components.error = components.error || &quot;Email address&#039;s domain name can not be converted to &quot; + (!options.iri ? &quot;ASCII&quot; : &quot;Unicode&quot;) + &quot; via punycode: &quot; + e;
                }
                to[x] = localPart + &quot;@&quot; + domain;
            }
            components.path = to.join(&quot;,&quot;);
        }
        const headers = mailtoComponents.headers = mailtoComponents.headers || {};
        if (mailtoComponents.subject)
            headers[&quot;subject&quot;] = mailtoComponents.subject;
        if (mailtoComponents.body)
            headers[&quot;body&quot;] = mailtoComponents.body;
        const fields = [];
        for (const name in headers) {
            if (headers[name] !== O[name]) {
                fields.push(name.replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFNAME, pctEncChar) +
                    &quot;=&quot; +
                    headers[name].replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFVALUE, pctEncChar));
            }
        }
        if (fields.length) {
            components.query = fields.join(&quot;&amp;&quot;);
        }
        return components;
    }
};
export default handler;
//# sourceMappingURL=mailto.js.map</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
