<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/nodebb-plugin-emoji/build/public/lib/emoji-dialog.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato-file.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="https://github.com/the-simian/es6-plato">ES6 Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
      <li class="active">
        <a href="display.html">Summary Display</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/nodebb-plugin-emoji/build/public/lib/emoji-dialog.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">70.37</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">226</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">38.64</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">3.12</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">// eslint-disable-next-line spaced-comment
/// &lt;amd-module name=&quot;emoji-dialog&quot;/&gt;
define(&quot;emoji-dialog&quot;, [&quot;require&quot;, &quot;exports&quot;, &quot;translator&quot;, &quot;benchpress&quot;, &quot;composer/controls&quot;, &quot;scrollStop&quot;, &quot;emoji&quot;], function (require, exports, translator_1, benchpress_1, controls_1, scrollStop_1, emoji_1) {
    &quot;use strict&quot;;
    Object.defineProperty(exports, &quot;__esModule&quot;, { value: true });
    exports.dialogActions = void 0;
    exports.init = init;
    exports.toggle = toggle;
    exports.toggleForInsert = toggleForInsert;
    var $html = $(&#039;html&#039;);
    exports.dialogActions = {
        open: function (dialog) {
            $html.addClass(&#039;emoji-insert&#039;);
            dialog.addClass(&#039;open&#039;);
            dialog.appendTo(document.fullscreenElement || &#039;body&#039;);
            if (!utils.isTouchDevice()) {
                dialog.find(&#039;.emoji-dialog-search&#039;).focus();
            }
            // need this setTimeout or onDocumentClick gets triggered too early
            // and causes https://github.com/NodeBB/NodeBB/issues/10589
            setTimeout(function () {
                // eslint-disable-next-line no-use-before-define
                $(document).off(&#039;click&#039;, onDocumentClick).on(&#039;click&#039;, onDocumentClick);
            }, 0);
            return dialog;
        },
        close: function (dialog) {
            // eslint-disable-next-line no-use-before-define
            $(document).off(&#039;click&#039;, onDocumentClick);
            $html.removeClass(&#039;emoji-insert&#039;);
            return dialog.removeClass(&#039;open&#039;);
        },
    };
    function onDocumentClick(e) {
        var dialog = $(&#039;#emoji-dialog&#039;);
        if (!$(e.target).is(&#039;.emoji-dialog *&#039;) &amp;&amp; dialog.length) {
            exports.dialogActions.close(dialog);
        }
    }
    var priorities = {
        people: 10,
        nature: 9,
        food: 8,
        activity: 7,
        travel: 6,
        objects: 5,
        symbols: 4,
        flags: 3,
        regional: 2,
        modifier: 1,
        other: 0,
    };
    if (config.emojiCustomFirst) {
        priorities.custom = 100;
    }
    var translator = translator_1.Translator.create();
    function stringCompare(a, b) {
        if (a &lt; b) {
            return -1;
        }
        if (a &gt; b) {
            return 1;
        }
        return 0;
    }
    // create modal
    function init(callback) {
        Promise.all([
            $.getJSON(&quot;&quot;.concat(emoji_1.base, &quot;/emoji/categories.json?&quot;).concat(emoji_1.buster)),
            $.getJSON(&quot;&quot;.concat(emoji_1.base, &quot;/emoji/packs.json?&quot;).concat(emoji_1.buster)),
            new Promise(function (resolve) { (0, emoji_1.init)(resolve); }),
        ])
            .then(function (_a) {
            var categoriesInfo = _a[0], packs = _a[1];
            var categories = Object.keys(categoriesInfo).map(function (category) {
                var emojis = categoriesInfo[category].map(function (name) { return emoji_1.table[name]; });
                return {
                    name: category,
                    emojis: emojis.map(function (emoji) { return ({
                        name: emoji.name,
                        html: (0, emoji_1.buildEmoji)(emoji, true),
                    }); }).sort(function (a, b) { return stringCompare(a.name, b.name); }),
                };
            }).sort(function (a, b) {
                var aPriority = priorities[a.name] || 0;
                var bPriority = priorities[b.name] || 0;
                return bPriority - aPriority;
            });
            return (0, benchpress_1.render)(&#039;partials/emoji-dialog&#039;, {
                categories: categories,
                packs: packs,
            });
        })
            .then(function (result) { return translator.translate(result); }).then(function (html) {
            var dialog = $(html).appendTo(document.fullscreenElement || &#039;body&#039;);
            dialog.find(&#039;.emoji-dialog-search&#039;).on(&#039;input&#039;, function (e) {
                var value = e.target.value;
                if (!value) {
                    dialog.find(&#039;.emoji-dialog-search-results&#039;).addClass(&#039;hidden&#039;);
                    dialog.find(&#039;.nav-tabs .emoji-dialog-search-results&#039;).next().find(&#039;a&#039;).tab(&#039;show&#039;);
                    return;
                }
                var results = (0, emoji_1.search)(value)
                    .slice(0, 100)
                    .map(function (emoji) { return &quot;&lt;a class=\&quot;emoji-link\&quot; name=\&quot;&quot;.concat(emoji.name, &quot;\&quot; href=\&quot;#\&quot;&gt;&quot;).concat((0, emoji_1.buildEmoji)(emoji, false), &quot;&lt;/a&gt;&quot;); })
                    .join(&#039;\n&#039;);
                dialog.find(&#039;.tab-pane.emoji-dialog-search-results&#039;).html(results);
                dialog.find(&#039;.emoji-dialog-search-results&#039;).removeClass(&#039;hidden&#039;);
                dialog.find(&#039;.nav-tabs .emoji-dialog-search-results a&#039;).tab(&#039;show&#039;);
                dialog.find(&#039;.emoji-dialog-search&#039;).focus();
            });
            var tabContent = dialog.find(&#039;.emoji-tabs .tab-content&#039;);
            function showDeferred(container) {
                var rect = tabContent[0].getBoundingClientRect();
                var num = Math.ceil((rect.width * rect.height) / (40 * 40));
                container
                    .find(&#039;.emoji-link img.defer&#039;)
                    .filter(function (i, elem) {
                    if (i &lt;= num) {
                        return true;
                    }
                    var elemRect = elem.getBoundingClientRect();
                    return elemRect.right &gt; rect.left &amp;&amp;
                        elemRect.left &lt; rect.right &amp;&amp;
                        elemRect.bottom &gt; rect.top &amp;&amp;
                        elemRect.top &lt; rect.bottom;
                })
                    .removeClass(&#039;defer&#039;)
                    .each(function (i, elem) {
                    var src = elem.getAttribute(&#039;data-src&#039;);
                    elem.setAttribute(&#039;src&#039;, src);
                });
            }
            var firstTab = dialog.find(&#039;.emoji-tabs .nav-tabs a&#039;).click(function (e) {
                e.preventDefault();
                $(e.target).tab(&#039;show&#039;);
            }).on(&#039;show.bs.tab&#039;, function (e) {
                showDeferred($(e.target.getAttribute(&#039;href&#039;)));
            }).eq(1);
            setTimeout(function () { return firstTab.trigger(&#039;show.bs.tab&#039;); }, 10);
            tabContent.on(&#039;scroll&#039;, function () {
                showDeferred(tabContent.find(&#039;.tab-pane.active&#039;));
            });
            (0, scrollStop_1.apply)(tabContent[0]);
            var close = function () { return exports.dialogActions.close(dialog); };
            $(window).on([
                &#039;action:composer.discard&#039;,
                &#039;action:composer.submit&#039;,
                &#039;action:composer.minimize&#039;,
                &#039;action:chat.minimize&#039;,
                &#039;action:chat.closed&#039;,
            ].join(&#039; &#039;), close);
            dialog.find(&#039;.close&#039;).on(&#039;click&#039;, close);
            callback(dialog);
        })
            .catch(function (err) {
            console.error(&#039;Failed to initialize emoji dialog&#039;, err);
        });
    }
    function toggle(opener, onClick) {
        function after(dialog) {
            if (dialog.hasClass(&#039;open&#039;)) {
                exports.dialogActions.close(dialog);
                return;
            }
            dialog.off(&#039;click&#039;).on(&#039;click&#039;, &#039;.emoji-link&#039;, function (e) {
                e.preventDefault();
                var name = e.currentTarget.name;
                onClick(e, name, dialog);
            });
            // default if there&#039;s no button
            var buttonRect = opener ? opener.getBoundingClientRect() : {
                top: window.innerHeight / 3,
                left: window.innerWidth / 3,
            };
            var position = {
                bottom: &#039;auto&#039;,
                top: &#039;auto&#039;,
                right: &#039;auto&#039;,
                left: &#039;auto&#039;,
            };
            if (buttonRect.top &gt; 440) {
                position.top = &quot;&quot;.concat(buttonRect.top - 400, &quot;px&quot;);
            }
            else {
                position.top = &quot;&quot;.concat(buttonRect.top + 40, &quot;px&quot;);
            }
            if (buttonRect.left &lt; window.innerWidth / 2) {
                position.left = &quot;&quot;.concat(buttonRect.left + 40, &quot;px&quot;);
            }
            else {
                position.left = &quot;&quot;.concat(buttonRect.left - 400, &quot;px&quot;);
            }
            dialog.css(position);
            exports.dialogActions.open(dialog);
        }
        var dialog = $(&#039;#emoji-dialog&#039;);
        if (dialog.length) {
            after(dialog);
        }
        else {
            init(after);
        }
    }
    function toggleForInsert(textarea, selectStart, selectEnd, event) {
        // handle new and old API case
        var button;
        if (event &amp;&amp; event.target) {
            button = $(event.target);
        }
        else {
            button = $(textarea).parents(&#039;.composer-container&#039;).find(&#039;[data-format=&quot;emoji-add-emoji&quot;]&#039;);
        }
        button = button[0];
        toggle(button, function (e, name) {
            var text = &quot;:&quot;.concat(name, &quot;: &quot;);
            var selectionStart = textarea.selectionStart, selectionEnd = textarea.selectionEnd;
            var end = selectionEnd + text.length;
            var start = selectionStart === selectionEnd ? end : selectionStart;
            (0, controls_1.insertIntoTextarea)(textarea, text);
            (0, controls_1.updateTextareaSelection)(textarea, start, end);
            $(textarea).trigger(&#039;input&#039;);
        });
    }
});
//# sourceMappingURL=emoji-dialog.js.map</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
