<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/readable-stream/lib/ours/errors.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato-file.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="https://github.com/the-simian/es6-plato">ES6 Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
      <li class="active">
        <a href="display.html">Summary Display</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/readable-stream/lib/ours/errors.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">57.55</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">344</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">73.15</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">3.32</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">&#039;use strict&#039;

const { format, inspect } = require(&#039;./util/inspect&#039;)
const { AggregateError: CustomAggregateError } = require(&#039;./primordials&#039;)

/*
  This file is a reduced and adapted version of the main lib/internal/errors.js file defined at

  https://github.com/nodejs/node/blob/main/lib/internal/errors.js

  Don&#039;t try to replace with the original file and keep it up to date (starting from E(...) definitions)
  with the upstream file.
*/

const AggregateError = globalThis.AggregateError || CustomAggregateError
const kIsNodeError = Symbol(&#039;kIsNodeError&#039;)
const kTypes = [
  &#039;string&#039;,
  &#039;function&#039;,
  &#039;number&#039;,
  &#039;object&#039;,
  // Accept &#039;Function&#039; and &#039;Object&#039; as alternative to the lower cased version.
  &#039;Function&#039;,
  &#039;Object&#039;,
  &#039;boolean&#039;,
  &#039;bigint&#039;,
  &#039;symbol&#039;
]
const classRegExp = /^([A-Z][a-z0-9]*)+$/
const nodeInternalPrefix = &#039;__node_internal_&#039;
const codes = {}
function assert(value, message) {
  if (!value) {
    throw new codes.ERR_INTERNAL_ASSERTION(message)
  }
}

// Only use this for integers! Decimal numbers do not work with this function.
function addNumericalSeparator(val) {
  let res = &#039;&#039;
  let i = val.length
  const start = val[0] === &#039;-&#039; ? 1 : 0
  for (; i &gt;= start + 4; i -= 3) {
    res = `_${val.slice(i - 3, i)}${res}`
  }
  return `${val.slice(0, i)}${res}`
}
function getMessage(key, msg, args) {
  if (typeof msg === &#039;function&#039;) {
    assert(
      msg.length &lt;= args.length,
      // Default options do not count.
      `Code: ${key}; The provided arguments length (${args.length}) does not match the required ones (${msg.length}).`
    )
    return msg(...args)
  }
  const expectedLength = (msg.match(/%[dfijoOs]/g) || []).length
  assert(
    expectedLength === args.length,
    `Code: ${key}; The provided arguments length (${args.length}) does not match the required ones (${expectedLength}).`
  )
  if (args.length === 0) {
    return msg
  }
  return format(msg, ...args)
}
function E(code, message, Base) {
  if (!Base) {
    Base = Error
  }
  class NodeError extends Base {
    constructor(...args) {
      super(getMessage(code, message, args))
    }
    toString() {
      return `${this.name} [${code}]: ${this.message}`
    }
  }
  Object.defineProperties(NodeError.prototype, {
    name: {
      value: Base.name,
      writable: true,
      enumerable: false,
      configurable: true
    },
    toString: {
      value() {
        return `${this.name} [${code}]: ${this.message}`
      },
      writable: true,
      enumerable: false,
      configurable: true
    }
  })
  NodeError.prototype.code = code
  NodeError.prototype[kIsNodeError] = true
  codes[code] = NodeError
}
function hideStackFrames(fn) {
  // We rename the functions that will be hidden to cut off the stacktrace
  // at the outermost one
  const hidden = nodeInternalPrefix + fn.name
  Object.defineProperty(fn, &#039;name&#039;, {
    value: hidden
  })
  return fn
}
function aggregateTwoErrors(innerError, outerError) {
  if (innerError &amp;&amp; outerError &amp;&amp; innerError !== outerError) {
    if (Array.isArray(outerError.errors)) {
      // If `outerError` is already an `AggregateError`.
      outerError.errors.push(innerError)
      return outerError
    }
    const err = new AggregateError([outerError, innerError], outerError.message)
    err.code = outerError.code
    return err
  }
  return innerError || outerError
}
class AbortError extends Error {
  constructor(message = &#039;The operation was aborted&#039;, options = undefined) {
    if (options !== undefined &amp;&amp; typeof options !== &#039;object&#039;) {
      throw new codes.ERR_INVALID_ARG_TYPE(&#039;options&#039;, &#039;Object&#039;, options)
    }
    super(message, options)
    this.code = &#039;ABORT_ERR&#039;
    this.name = &#039;AbortError&#039;
  }
}
E(&#039;ERR_ASSERTION&#039;, &#039;%s&#039;, Error)
E(
  &#039;ERR_INVALID_ARG_TYPE&#039;,
  (name, expected, actual) =&gt; {
    assert(typeof name === &#039;string&#039;, &quot;&#039;name&#039; must be a string&quot;)
    if (!Array.isArray(expected)) {
      expected = [expected]
    }
    let msg = &#039;The &#039;
    if (name.endsWith(&#039; argument&#039;)) {
      // For cases like &#039;first argument&#039;
      msg += `${name} `
    } else {
      msg += `&quot;${name}&quot; ${name.includes(&#039;.&#039;) ? &#039;property&#039; : &#039;argument&#039;} `
    }
    msg += &#039;must be &#039;
    const types = []
    const instances = []
    const other = []
    for (const value of expected) {
      assert(typeof value === &#039;string&#039;, &#039;All expected entries have to be of type string&#039;)
      if (kTypes.includes(value)) {
        types.push(value.toLowerCase())
      } else if (classRegExp.test(value)) {
        instances.push(value)
      } else {
        assert(value !== &#039;object&#039;, &#039;The value &quot;object&quot; should be written as &quot;Object&quot;&#039;)
        other.push(value)
      }
    }

    // Special handle `object` in case other instances are allowed to outline
    // the differences between each other.
    if (instances.length &gt; 0) {
      const pos = types.indexOf(&#039;object&#039;)
      if (pos !== -1) {
        types.splice(types, pos, 1)
        instances.push(&#039;Object&#039;)
      }
    }
    if (types.length &gt; 0) {
      switch (types.length) {
        case 1:
          msg += `of type ${types[0]}`
          break
        case 2:
          msg += `one of type ${types[0]} or ${types[1]}`
          break
        default: {
          const last = types.pop()
          msg += `one of type ${types.join(&#039;, &#039;)}, or ${last}`
        }
      }
      if (instances.length &gt; 0 || other.length &gt; 0) {
        msg += &#039; or &#039;
      }
    }
    if (instances.length &gt; 0) {
      switch (instances.length) {
        case 1:
          msg += `an instance of ${instances[0]}`
          break
        case 2:
          msg += `an instance of ${instances[0]} or ${instances[1]}`
          break
        default: {
          const last = instances.pop()
          msg += `an instance of ${instances.join(&#039;, &#039;)}, or ${last}`
        }
      }
      if (other.length &gt; 0) {
        msg += &#039; or &#039;
      }
    }
    switch (other.length) {
      case 0:
        break
      case 1:
        if (other[0].toLowerCase() !== other[0]) {
          msg += &#039;an &#039;
        }
        msg += `${other[0]}`
        break
      case 2:
        msg += `one of ${other[0]} or ${other[1]}`
        break
      default: {
        const last = other.pop()
        msg += `one of ${other.join(&#039;, &#039;)}, or ${last}`
      }
    }
    if (actual == null) {
      msg += `. Received ${actual}`
    } else if (typeof actual === &#039;function&#039; &amp;&amp; actual.name) {
      msg += `. Received function ${actual.name}`
    } else if (typeof actual === &#039;object&#039;) {
      var _actual$constructor
      if (
        (_actual$constructor = actual.constructor) !== null &amp;&amp;
        _actual$constructor !== undefined &amp;&amp;
        _actual$constructor.name
      ) {
        msg += `. Received an instance of ${actual.constructor.name}`
      } else {
        const inspected = inspect(actual, {
          depth: -1
        })
        msg += `. Received ${inspected}`
      }
    } else {
      let inspected = inspect(actual, {
        colors: false
      })
      if (inspected.length &gt; 25) {
        inspected = `${inspected.slice(0, 25)}...`
      }
      msg += `. Received type ${typeof actual} (${inspected})`
    }
    return msg
  },
  TypeError
)
E(
  &#039;ERR_INVALID_ARG_VALUE&#039;,
  (name, value, reason = &#039;is invalid&#039;) =&gt; {
    let inspected = inspect(value)
    if (inspected.length &gt; 128) {
      inspected = inspected.slice(0, 128) + &#039;...&#039;
    }
    const type = name.includes(&#039;.&#039;) ? &#039;property&#039; : &#039;argument&#039;
    return `The ${type} &#039;${name}&#039; ${reason}. Received ${inspected}`
  },
  TypeError
)
E(
  &#039;ERR_INVALID_RETURN_VALUE&#039;,
  (input, name, value) =&gt; {
    var _value$constructor
    const type =
      value !== null &amp;&amp;
      value !== undefined &amp;&amp;
      (_value$constructor = value.constructor) !== null &amp;&amp;
      _value$constructor !== undefined &amp;&amp;
      _value$constructor.name
        ? `instance of ${value.constructor.name}`
        : `type ${typeof value}`
    return `Expected ${input} to be returned from the &quot;${name}&quot;` + ` function but got ${type}.`
  },
  TypeError
)
E(
  &#039;ERR_MISSING_ARGS&#039;,
  (...args) =&gt; {
    assert(args.length &gt; 0, &#039;At least one arg needs to be specified&#039;)
    let msg
    const len = args.length
    args = (Array.isArray(args) ? args : [args]).map((a) =&gt; `&quot;${a}&quot;`).join(&#039; or &#039;)
    switch (len) {
      case 1:
        msg += `The ${args[0]} argument`
        break
      case 2:
        msg += `The ${args[0]} and ${args[1]} arguments`
        break
      default:
        {
          const last = args.pop()
          msg += `The ${args.join(&#039;, &#039;)}, and ${last} arguments`
        }
        break
    }
    return `${msg} must be specified`
  },
  TypeError
)
E(
  &#039;ERR_OUT_OF_RANGE&#039;,
  (str, range, input) =&gt; {
    assert(range, &#039;Missing &quot;range&quot; argument&#039;)
    let received
    if (Number.isInteger(input) &amp;&amp; Math.abs(input) &gt; 2 ** 32) {
      received = addNumericalSeparator(String(input))
    } else if (typeof input === &#039;bigint&#039;) {
      received = String(input)
      const limit = BigInt(2) ** BigInt(32)
      if (input &gt; limit || input &lt; -limit) {
        received = addNumericalSeparator(received)
      }
      received += &#039;n&#039;
    } else {
      received = inspect(input)
    }
    return `The value of &quot;${str}&quot; is out of range. It must be ${range}. Received ${received}`
  },
  RangeError
)
E(&#039;ERR_MULTIPLE_CALLBACK&#039;, &#039;Callback called multiple times&#039;, Error)
E(&#039;ERR_METHOD_NOT_IMPLEMENTED&#039;, &#039;The %s method is not implemented&#039;, Error)
E(&#039;ERR_STREAM_ALREADY_FINISHED&#039;, &#039;Cannot call %s after a stream was finished&#039;, Error)
E(&#039;ERR_STREAM_CANNOT_PIPE&#039;, &#039;Cannot pipe, not readable&#039;, Error)
E(&#039;ERR_STREAM_DESTROYED&#039;, &#039;Cannot call %s after a stream was destroyed&#039;, Error)
E(&#039;ERR_STREAM_NULL_VALUES&#039;, &#039;May not write null values to stream&#039;, TypeError)
E(&#039;ERR_STREAM_PREMATURE_CLOSE&#039;, &#039;Premature close&#039;, Error)
E(&#039;ERR_STREAM_PUSH_AFTER_EOF&#039;, &#039;stream.push() after EOF&#039;, Error)
E(&#039;ERR_STREAM_UNSHIFT_AFTER_END_EVENT&#039;, &#039;stream.unshift() after end event&#039;, Error)
E(&#039;ERR_STREAM_WRITE_AFTER_END&#039;, &#039;write after end&#039;, Error)
E(&#039;ERR_UNKNOWN_ENCODING&#039;, &#039;Unknown encoding: %s&#039;, TypeError)
module.exports = {
  AbortError,
  aggregateTwoErrors: hideStackFrames(aggregateTwoErrors),
  hideStackFrames,
  codes
}
</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
