<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/fast-uri/test/uri-js.test.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato-file.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="https://github.com/the-simian/es6-plato">ES6 Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
      <li class="active">
        <a href="display.html">Summary Display</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/fast-uri/test/uri-js.test.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">51.68</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">913</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">66.23</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">17.46</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">&#039;use strict&#039;

const test = require(&#039;tape&#039;)
const fastURI = require(&#039;..&#039;)

/**
 * URI.js
 *
 * @fileoverview An RFC 3986 compliant, scheme extendable URI parsing/normalizing/resolving/serializing library for JavaScript.
 * @author &lt;a href=&quot;mailto:gary.court@gmail.com&quot;&gt;Gary Court&lt;/a&gt;
 * @see http://github.com/garycourt/uri-js
 */

/**
 * Copyright 2011 Gary Court. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, are
 * permitted provided that the following conditions are met:
 *
 *    1. Redistributions of source code must retain the above copyright notice, this list of
 *       conditions and the following disclaimer.
 *
 *    2. Redistributions in binary form must reproduce the above copyright notice, this list
 *       of conditions and the following disclaimer in the documentation and/or other materials
 *       provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS&#039;&#039; AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * The views and conclusions contained in the software and documentation are those of the
 * authors and should not be interpreted as representing official policies, either expressed
 * or implied, of Gary Court.
 */

test(&#039;Acquire URI&#039;, (t) =&gt; {
  t.ok(fastURI)
  t.end()
})

test(&#039;URI Parsing&#039;, (t) =&gt; {
  let components

  // scheme
  components = fastURI.parse(&#039;uri:&#039;)
  t.equal(components.error, undefined, &#039;scheme errors&#039;)
  t.equal(components.scheme, &#039;uri&#039;, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, undefined, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, undefined, &#039;fragment&#039;)

  // userinfo
  components = fastURI.parse(&#039;//@&#039;)
  t.equal(components.error, undefined, &#039;userinfo errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, &#039;&#039;, &#039;userinfo&#039;)
  t.equal(components.host, &#039;&#039;, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, undefined, &#039;fragment&#039;)

  // host
  components = fastURI.parse(&#039;//&#039;)
  t.equal(components.error, undefined, &#039;host errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, &#039;&#039;, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, undefined, &#039;fragment&#039;)

  // port
  components = fastURI.parse(&#039;//:&#039;)
  t.equal(components.error, undefined, &#039;port errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, &#039;&#039;, &#039;host&#039;)
  t.equal(components.port, &#039;&#039;, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, undefined, &#039;fragment&#039;)

  // path
  components = fastURI.parse(&#039;&#039;)
  t.equal(components.error, undefined, &#039;path errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, undefined, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, undefined, &#039;fragment&#039;)

  // query
  components = fastURI.parse(&#039;?&#039;)
  t.equal(components.error, undefined, &#039;query errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, undefined, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, &#039;&#039;, &#039;query&#039;)
  t.equal(components.fragment, undefined, &#039;fragment&#039;)

  // fragment
  components = fastURI.parse(&#039;#&#039;)
  t.equal(components.error, undefined, &#039;fragment errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, undefined, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, &#039;&#039;, &#039;fragment&#039;)

  // fragment with character tabulation
  components = fastURI.parse(&#039;#\t&#039;)
  t.equal(components.error, undefined, &#039;path errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, undefined, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, &#039;%09&#039;, &#039;fragment&#039;)

  // fragment with line feed
  components = fastURI.parse(&#039;#\n&#039;)
  t.equal(components.error, undefined, &#039;path errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, undefined, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, &#039;%0A&#039;, &#039;fragment&#039;)

  // fragment with line tabulation
  components = fastURI.parse(&#039;#\v&#039;)
  t.equal(components.error, undefined, &#039;path errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, undefined, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, &#039;%0B&#039;, &#039;fragment&#039;)

  // fragment with form feed
  components = fastURI.parse(&#039;#\f&#039;)
  t.equal(components.error, undefined, &#039;path errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, undefined, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, &#039;%0C&#039;, &#039;fragment&#039;)

  // fragment with carriage return
  components = fastURI.parse(&#039;#\r&#039;)
  t.equal(components.error, undefined, &#039;path errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, undefined, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, &#039;%0D&#039;, &#039;fragment&#039;)

  // all
  components = fastURI.parse(&#039;uri://user:pass@example.com:123/one/two.three?q1=a1&amp;q2=a2#body&#039;)
  t.equal(components.error, undefined, &#039;all errors&#039;)
  t.equal(components.scheme, &#039;uri&#039;, &#039;scheme&#039;)
  t.equal(components.userinfo, &#039;user:pass&#039;, &#039;userinfo&#039;)
  t.equal(components.host, &#039;example.com&#039;, &#039;host&#039;)
  t.equal(components.port, 123, &#039;port&#039;)
  t.equal(components.path, &#039;/one/two.three&#039;, &#039;path&#039;)
  t.equal(components.query, &#039;q1=a1&amp;q2=a2&#039;, &#039;query&#039;)
  t.equal(components.fragment, &#039;body&#039;, &#039;fragment&#039;)

  // IPv4address
  components = fastURI.parse(&#039;//10.10.10.10&#039;)
  t.equal(components.error, undefined, &#039;IPv4address errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, &#039;10.10.10.10&#039;, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, undefined, &#039;fragment&#039;)

  // IPv6address
  components = fastURI.parse(&#039;//[2001:db8::7]&#039;)
  t.equal(components.error, undefined, &#039;IPv4address errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, &#039;2001:db8::7&#039;, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, undefined, &#039;fragment&#039;)

  // mixed IPv4address &amp; IPv6address
  components = fastURI.parse(&#039;//[::ffff:129.144.52.38]&#039;)
  t.equal(components.error, undefined, &#039;IPv4address errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, &#039;::ffff:129.144.52.38&#039;, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, undefined, &#039;fragment&#039;)

  // mixed IPv4address &amp; reg-name, example from terion-name (https://github.com/garycourt/uri-js/issues/4)
  components = fastURI.parse(&#039;uri://10.10.10.10.example.com/en/process&#039;)
  t.equal(components.error, undefined, &#039;mixed errors&#039;)
  t.equal(components.scheme, &#039;uri&#039;, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, &#039;10.10.10.10.example.com&#039;, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;/en/process&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, undefined, &#039;fragment&#039;)

  // IPv6address, example from bkw (https://github.com/garycourt/uri-js/pull/16)
  components = fastURI.parse(&#039;//[2606:2800:220:1:248:1893:25c8:1946]/test&#039;)
  t.equal(components.error, undefined, &#039;IPv6address errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, &#039;2606:2800:220:1:248:1893:25c8:1946&#039;, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;/test&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, undefined, &#039;fragment&#039;)

  // IPv6address, example from RFC 5952
  components = fastURI.parse(&#039;//[2001:db8::1]:80&#039;)
  t.equal(components.error, undefined, &#039;IPv6address errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, &#039;2001:db8::1&#039;, &#039;host&#039;)
  t.equal(components.port, 80, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, undefined, &#039;fragment&#039;)

  // IPv6address with zone identifier, RFC 6874
  components = fastURI.parse(&#039;//[fe80::a%25en1]&#039;)
  t.equal(components.error, undefined, &#039;IPv4address errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, &#039;fe80::a%en1&#039;, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, undefined, &#039;fragment&#039;)

  // IPv6address with an unescaped interface specifier, example from pekkanikander (https://github.com/garycourt/uri-js/pull/22)
  components = fastURI.parse(&#039;//[2001:db8::7%en0]&#039;)
  t.equal(components.error, undefined, &#039;IPv6address interface errors&#039;)
  t.equal(components.scheme, undefined, &#039;scheme&#039;)
  t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
  t.equal(components.host, &#039;2001:db8::7%en0&#039;, &#039;host&#039;)
  t.equal(components.port, undefined, &#039;port&#039;)
  t.equal(components.path, &#039;&#039;, &#039;path&#039;)
  t.equal(components.query, undefined, &#039;query&#039;)
  t.equal(components.fragment, undefined, &#039;fragment&#039;)

  t.end()
})

test(&#039;URI Serialization&#039;, (t) =&gt; {
  let components = {
    scheme: undefined,
    userinfo: undefined,
    host: undefined,
    port: undefined,
    path: undefined,
    query: undefined,
    fragment: undefined
  }
  t.equal(fastURI.serialize(components), &#039;&#039;, &#039;Undefined Components&#039;)

  components = {
    scheme: &#039;&#039;,
    userinfo: &#039;&#039;,
    host: &#039;&#039;,
    port: 0,
    path: &#039;&#039;,
    query: &#039;&#039;,
    fragment: &#039;&#039;
  }
  t.equal(fastURI.serialize(components), &#039;//@:0?#&#039;, &#039;Empty Components&#039;)

  components = {
    scheme: &#039;uri&#039;,
    userinfo: &#039;foo:bar&#039;,
    host: &#039;example.com&#039;,
    port: 1,
    path: &#039;path&#039;,
    query: &#039;query&#039;,
    fragment: &#039;fragment&#039;
  }
  t.equal(fastURI.serialize(components), &#039;uri://foo:bar@example.com:1/path?query#fragment&#039;, &#039;All Components&#039;)

  components = {
    scheme: &#039;uri&#039;,
    host: &#039;example.com&#039;,
    port: &#039;9000&#039;
  }
  t.equal(fastURI.serialize(components), &#039;uri://example.com:9000&#039;, &#039;String port&#039;)

  t.equal(fastURI.serialize({ path: &#039;//path&#039; }), &#039;/%2Fpath&#039;, &#039;Double slash path&#039;)
  t.equal(fastURI.serialize({ path: &#039;foo:bar&#039; }), &#039;foo%3Abar&#039;, &#039;Colon path&#039;)
  t.equal(fastURI.serialize({ path: &#039;?query&#039; }), &#039;%3Fquery&#039;, &#039;Query path&#039;)

  // mixed IPv4address &amp; reg-name, example from terion-name (https://github.com/garycourt/uri-js/issues/4)
  t.equal(fastURI.serialize({ host: &#039;10.10.10.10.example.com&#039; }), &#039;//10.10.10.10.example.com&#039;, &#039;Mixed IPv4address &amp; reg-name&#039;)

  // IPv6address
  t.equal(fastURI.serialize({ host: &#039;2001:db8::7&#039; }), &#039;//[2001:db8::7]&#039;, &#039;IPv6 Host&#039;)
  t.equal(fastURI.serialize({ host: &#039;::ffff:129.144.52.38&#039; }), &#039;//[::ffff:129.144.52.38]&#039;, &#039;IPv6 Mixed Host&#039;)
  t.equal(fastURI.serialize({ host: &#039;2606:2800:220:1:248:1893:25c8:1946&#039; }), &#039;//[2606:2800:220:1:248:1893:25c8:1946]&#039;, &#039;IPv6 Full Host&#039;)

  // IPv6address with zone identifier, RFC 6874
  t.equal(fastURI.serialize({ host: &#039;fe80::a%en1&#039; }), &#039;//[fe80::a%25en1]&#039;, &#039;IPv6 Zone Unescaped Host&#039;)
  t.equal(fastURI.serialize({ host: &#039;fe80::a%25en1&#039; }), &#039;//[fe80::a%25en1]&#039;, &#039;IPv6 Zone Escaped Host&#039;)

  t.end()
})

test(&#039;URI Resolving&#039;, { skip: true }, (t) =&gt; {
  // normal examples from RFC 3986
  const base = &#039;uri://a/b/c/d;p?q&#039;
  t.equal(fastURI.resolve(base, &#039;g:h&#039;), &#039;g:h&#039;, &#039;g:h&#039;)
  t.equal(fastURI.resolve(base, &#039;g&#039;), &#039;uri://a/b/c/g&#039;, &#039;g&#039;)
  t.equal(fastURI.resolve(base, &#039;./g&#039;), &#039;uri://a/b/c/g&#039;, &#039;./g&#039;)
  t.equal(fastURI.resolve(base, &#039;g/&#039;), &#039;uri://a/b/c/g/&#039;, &#039;g/&#039;)
  t.equal(fastURI.resolve(base, &#039;/g&#039;), &#039;uri://a/g&#039;, &#039;/g&#039;)
  t.equal(fastURI.resolve(base, &#039;//g&#039;), &#039;uri://g&#039;, &#039;//g&#039;)
  t.equal(fastURI.resolve(base, &#039;?y&#039;), &#039;uri://a/b/c/d;p?y&#039;, &#039;?y&#039;)
  t.equal(fastURI.resolve(base, &#039;g?y&#039;), &#039;uri://a/b/c/g?y&#039;, &#039;g?y&#039;)
  t.equal(fastURI.resolve(base, &#039;#s&#039;), &#039;uri://a/b/c/d;p?q#s&#039;, &#039;#s&#039;)
  t.equal(fastURI.resolve(base, &#039;g#s&#039;), &#039;uri://a/b/c/g#s&#039;, &#039;g#s&#039;)
  t.equal(fastURI.resolve(base, &#039;g?y#s&#039;), &#039;uri://a/b/c/g?y#s&#039;, &#039;g?y#s&#039;)
  t.equal(fastURI.resolve(base, &#039;;x&#039;), &#039;uri://a/b/c/;x&#039;, &#039;;x&#039;)
  t.equal(fastURI.resolve(base, &#039;g;x&#039;), &#039;uri://a/b/c/g;x&#039;, &#039;g;x&#039;)
  t.equal(fastURI.resolve(base, &#039;g;x?y#s&#039;), &#039;uri://a/b/c/g;x?y#s&#039;, &#039;g;x?y#s&#039;)
  t.equal(fastURI.resolve(base, &#039;&#039;), &#039;uri://a/b/c/d;p?q&#039;, &#039;&#039;)
  t.equal(fastURI.resolve(base, &#039;.&#039;), &#039;uri://a/b/c/&#039;, &#039;.&#039;)
  t.equal(fastURI.resolve(base, &#039;./&#039;), &#039;uri://a/b/c/&#039;, &#039;./&#039;)
  t.equal(fastURI.resolve(base, &#039;..&#039;), &#039;uri://a/b/&#039;, &#039;..&#039;)
  t.equal(fastURI.resolve(base, &#039;../&#039;), &#039;uri://a/b/&#039;, &#039;../&#039;)
  t.equal(fastURI.resolve(base, &#039;../g&#039;), &#039;uri://a/b/g&#039;, &#039;../g&#039;)
  t.equal(fastURI.resolve(base, &#039;../..&#039;), &#039;uri://a/&#039;, &#039;../..&#039;)
  t.equal(fastURI.resolve(base, &#039;../../&#039;), &#039;uri://a/&#039;, &#039;../../&#039;)
  t.equal(fastURI.resolve(base, &#039;../../g&#039;), &#039;uri://a/g&#039;, &#039;../../g&#039;)

  // abnormal examples from RFC 3986
  t.equal(fastURI.resolve(base, &#039;../../../g&#039;), &#039;uri://a/g&#039;, &#039;../../../g&#039;)
  t.equal(fastURI.resolve(base, &#039;../../../../g&#039;), &#039;uri://a/g&#039;, &#039;../../../../g&#039;)

  t.equal(fastURI.resolve(base, &#039;/./g&#039;), &#039;uri://a/g&#039;, &#039;/./g&#039;)
  t.equal(fastURI.resolve(base, &#039;/../g&#039;), &#039;uri://a/g&#039;, &#039;/../g&#039;)
  t.equal(fastURI.resolve(base, &#039;g.&#039;), &#039;uri://a/b/c/g.&#039;, &#039;g.&#039;)
  t.equal(fastURI.resolve(base, &#039;.g&#039;), &#039;uri://a/b/c/.g&#039;, &#039;.g&#039;)
  t.equal(fastURI.resolve(base, &#039;g..&#039;), &#039;uri://a/b/c/g..&#039;, &#039;g..&#039;)
  t.equal(fastURI.resolve(base, &#039;..g&#039;), &#039;uri://a/b/c/..g&#039;, &#039;..g&#039;)

  t.equal(fastURI.resolve(base, &#039;./../g&#039;), &#039;uri://a/b/g&#039;, &#039;./../g&#039;)
  t.equal(fastURI.resolve(base, &#039;./g/.&#039;), &#039;uri://a/b/c/g/&#039;, &#039;./g/.&#039;)
  t.equal(fastURI.resolve(base, &#039;g/./h&#039;), &#039;uri://a/b/c/g/h&#039;, &#039;g/./h&#039;)
  t.equal(fastURI.resolve(base, &#039;g/../h&#039;), &#039;uri://a/b/c/h&#039;, &#039;g/../h&#039;)
  t.equal(fastURI.resolve(base, &#039;g;x=1/./y&#039;), &#039;uri://a/b/c/g;x=1/y&#039;, &#039;g;x=1/./y&#039;)
  t.equal(fastURI.resolve(base, &#039;g;x=1/../y&#039;), &#039;uri://a/b/c/y&#039;, &#039;g;x=1/../y&#039;)

  t.equal(fastURI.resolve(base, &#039;g?y/./x&#039;), &#039;uri://a/b/c/g?y/./x&#039;, &#039;g?y/./x&#039;)
  t.equal(fastURI.resolve(base, &#039;g?y/../x&#039;), &#039;uri://a/b/c/g?y/../x&#039;, &#039;g?y/../x&#039;)
  t.equal(fastURI.resolve(base, &#039;g#s/./x&#039;), &#039;uri://a/b/c/g#s/./x&#039;, &#039;g#s/./x&#039;)
  t.equal(fastURI.resolve(base, &#039;g#s/../x&#039;), &#039;uri://a/b/c/g#s/../x&#039;, &#039;g#s/../x&#039;)

  t.equal(fastURI.resolve(base, &#039;uri:g&#039;), &#039;uri:g&#039;, &#039;uri:g&#039;)
  t.equal(fastURI.resolve(base, &#039;uri:g&#039;, { tolerant: true }), &#039;uri://a/b/c/g&#039;, &#039;uri:g&#039;)

  // examples by PAEz
  t.equal(fastURI.resolve(&#039;//www.g.com/&#039;, &#039;/adf\ngf&#039;), &#039;//www.g.com/adf%0Agf&#039;, &#039;/adf\\ngf&#039;)
  t.equal(fastURI.resolve(&#039;//www.g.com/error\n/bleh/bleh&#039;, &#039;..&#039;), &#039;//www.g.com/error%0A/&#039;, &#039;//www.g.com/error\\n/bleh/bleh&#039;)

  t.end()
})

test(&#039;URI Normalizing&#039;, { skip: true }, (t) =&gt; {
  // test from RFC 3987
  t.equal(fastURI.normalize(&#039;uri://www.example.org/red%09ros\xE9#red&#039;), &#039;uri://www.example.org/red%09ros%C3%A9#red&#039;)

  // IPv4address
  t.equal(fastURI.normalize(&#039;//192.068.001.000&#039;), &#039;//192.68.1.0&#039;)

  // IPv6address, example from RFC 3513
  t.equal(fastURI.normalize(&#039;http://[1080::8:800:200C:417A]/&#039;), &#039;http://[1080::8:800:200c:417a]/&#039;)

  // IPv6address, examples from RFC 5952
  t.equal(fastURI.normalize(&#039;//[2001:0db8::0001]/&#039;), &#039;//[2001:db8::1]/&#039;)
  t.equal(fastURI.normalize(&#039;//[2001:db8::1:0000:1]/&#039;), &#039;//[2001:db8::1:0:1]/&#039;)
  t.equal(fastURI.normalize(&#039;//[2001:db8:0:0:0:0:2:1]/&#039;), &#039;//[2001:db8::2:1]/&#039;)
  t.equal(fastURI.normalize(&#039;//[2001:db8:0:1:1:1:1:1]/&#039;), &#039;//[2001:db8:0:1:1:1:1:1]/&#039;)
  t.equal(fastURI.normalize(&#039;//[2001:0:0:1:0:0:0:1]/&#039;), &#039;//[2001:0:0:1::1]/&#039;)
  t.equal(fastURI.normalize(&#039;//[2001:db8:0:0:1:0:0:1]/&#039;), &#039;//[2001:db8::1:0:0:1]/&#039;)
  t.equal(fastURI.normalize(&#039;//[2001:DB8::1]/&#039;), &#039;//[2001:db8::1]/&#039;)
  t.equal(fastURI.normalize(&#039;//[0:0:0:0:0:ffff:192.0.2.1]/&#039;), &#039;//[::ffff:192.0.2.1]/&#039;)

  // Mixed IPv4 and IPv6 address
  t.equal(fastURI.normalize(&#039;//[1:2:3:4:5:6:192.0.2.1]/&#039;), &#039;//[1:2:3:4:5:6:192.0.2.1]/&#039;)
  t.equal(fastURI.normalize(&#039;//[1:2:3:4:5:6:192.068.001.000]/&#039;), &#039;//[1:2:3:4:5:6:192.68.1.0]/&#039;)

  t.end()
})

test(&#039;URI Equals&#039;, (t) =&gt; {
  // test from RFC 3986
  t.equal(fastURI.equal(&#039;example://a/b/c/%7Bfoo%7D&#039;, &#039;eXAMPLE://a/./b/../b/%63/%7bfoo%7d&#039;), true)

  // test from RFC 3987
  t.equal(fastURI.equal(&#039;http://example.org/~user&#039;, &#039;http://example.org/%7euser&#039;), true)

  t.end()
})

test(&#039;Escape Component&#039;, { skip: true }, (t) =&gt; {
  let chr
  for (let d = 0; d &lt;= 129; ++d) {
    chr = String.fromCharCode(d)
    if (!chr.match(/[$&amp;+,;=]/)) {
      t.equal(fastURI.escapeComponent(chr), encodeURIComponent(chr))
    } else {
      t.equal(fastURI.escapeComponent(chr), chr)
    }
  }
  t.equal(fastURI.escapeComponent(&#039;\u00c0&#039;), encodeURIComponent(&#039;\u00c0&#039;))
  t.equal(fastURI.escapeComponent(&#039;\u07ff&#039;), encodeURIComponent(&#039;\u07ff&#039;))
  t.equal(fastURI.escapeComponent(&#039;\u0800&#039;), encodeURIComponent(&#039;\u0800&#039;))
  t.equal(fastURI.escapeComponent(&#039;\u30a2&#039;), encodeURIComponent(&#039;\u30a2&#039;))
  t.end()
})

test(&#039;Unescape Component&#039;, { skip: true }, (t) =&gt; {
  let chr
  for (let d = 0; d &lt;= 129; ++d) {
    chr = String.fromCharCode(d)
    t.equal(fastURI.unescapeComponent(encodeURIComponent(chr)), chr)
  }
  t.equal(fastURI.unescapeComponent(encodeURIComponent(&#039;\u00c0&#039;)), &#039;\u00c0&#039;)
  t.equal(fastURI.unescapeComponent(encodeURIComponent(&#039;\u07ff&#039;)), &#039;\u07ff&#039;)
  t.equal(fastURI.unescapeComponent(encodeURIComponent(&#039;\u0800&#039;)), &#039;\u0800&#039;)
  t.equal(fastURI.unescapeComponent(encodeURIComponent(&#039;\u30a2&#039;)), &#039;\u30a2&#039;)
  t.end()
})

const IRI_OPTION = { iri: true, unicodeSupport: true }

test(&#039;IRI Parsing&#039;, { skip: true }, (t) =&gt; {
  const components = fastURI.parse(&#039;uri://us\xA0er:pa\uD7FFss@example.com:123/o\uF900ne/t\uFDCFwo.t\uFDF0hree?q1=a1\uF8FF\uE000&amp;q2=a2#bo\uFFEFdy&#039;, IRI_OPTION)
  t.equal(components.error, undefined, &#039;all errors&#039;)
  t.equal(components.scheme, &#039;uri&#039;, &#039;scheme&#039;)
  t.equal(components.userinfo, &#039;us\xA0er:pa\uD7FFss&#039;, &#039;userinfo&#039;)
  t.equal(components.host, &#039;example.com&#039;, &#039;host&#039;)
  t.equal(components.port, 123, &#039;port&#039;)
  t.equal(components.path, &#039;/o\uF900ne/t\uFDCFwo.t\uFDF0hree&#039;, &#039;path&#039;)
  t.equal(components.query, &#039;q1=a1\uF8FF\uE000&amp;q2=a2&#039;, &#039;query&#039;)
  t.equal(components.fragment, &#039;bo\uFFEFdy&#039;, &#039;fragment&#039;)
  t.end()
})

test(&#039;IRI Serialization&#039;, { skip: true }, (t) =&gt; {
  const components = {
    scheme: &#039;uri&#039;,
    userinfo: &#039;us\xA0er:pa\uD7FFss&#039;,
    host: &#039;example.com&#039;,
    port: 123,
    path: &#039;/o\uF900ne/t\uFDCFwo.t\uFDF0hree&#039;,
    query: &#039;q1=a1\uF8FF\uE000&amp;q2=a2&#039;,
    fragment: &#039;bo\uFFEFdy\uE001&#039;
  }
  t.equal(fastURI.serialize(components, IRI_OPTION), &#039;uri://us\xA0er:pa\uD7FFss@example.com:123/o\uF900ne/t\uFDCFwo.t\uFDF0hree?q1=a1\uF8FF\uE000&amp;q2=a2#bo\uFFEFdy%EE%80%81&#039;)
  t.end()
})

test(&#039;IRI Normalizing&#039;, { skip: true }, (t) =&gt; {
  t.equal(fastURI.normalize(&#039;uri://www.example.org/red%09ros\xE9#red&#039;, IRI_OPTION), &#039;uri://www.example.org/red%09ros\xE9#red&#039;)
  t.end()
})

test(&#039;IRI Equals&#039;, { skip: true }, (t) =&gt; {
  // example from RFC 3987
  t.equal(fastURI.equal(&#039;example://a/b/c/%7Bfoo%7D/ros\xE9&#039;, &#039;eXAMPLE://a/./b/../b/%63/%7bfoo%7d/ros%C3%A9&#039;, IRI_OPTION), true)
  t.end()
})

test(&#039;Convert IRI to URI&#039;, { skip: true }, (t) =&gt; {
  // example from RFC 3987
  t.equal(fastURI.serialize(fastURI.parse(&#039;uri://www.example.org/red%09ros\xE9#red&#039;, IRI_OPTION)), &#039;uri://www.example.org/red%09ros%C3%A9#red&#039;)

  // Internationalized Domain Name conversion via punycode example from RFC 3987
  t.equal(fastURI.serialize(fastURI.parse(&#039;uri://r\xE9sum\xE9.example.org&#039;, { iri: true, domainHost: true }), { domainHost: true }), &#039;uri://xn--rsum-bpad.example.org&#039;)
  t.end()
})

test(&#039;Convert URI to IRI&#039;, { skip: true }, (t) =&gt; {
  // examples from RFC 3987
  t.equal(fastURI.serialize(fastURI.parse(&#039;uri://www.example.org/D%C3%BCrst&#039;), IRI_OPTION), &#039;uri://www.example.org/D\xFCrst&#039;)
  t.equal(fastURI.serialize(fastURI.parse(&#039;uri://www.example.org/D%FCrst&#039;), IRI_OPTION), &#039;uri://www.example.org/D%FCrst&#039;)
  t.equal(fastURI.serialize(fastURI.parse(&#039;uri://xn--99zt52a.example.org/%e2%80%ae&#039;), IRI_OPTION), &#039;uri://xn--99zt52a.example.org/%E2%80%AE&#039;) // or uri://\u7D0D\u8C46.example.org/%E2%80%AE

  // Internationalized Domain Name conversion via punycode example from RFC 3987
  t.equal(fastURI.serialize(fastURI.parse(&#039;uri://xn--rsum-bpad.example.org&#039;, { domainHost: true }), { iri: true, domainHost: true }), &#039;uri://r\xE9sum\xE9.example.org&#039;)
  t.end()
})

if (fastURI.SCHEMES.http) {
  test(&#039;HTTP Equals&#039;, (t) =&gt; {
    // test from RFC 2616
    t.equal(fastURI.equal(&#039;http://abc.com:80/~smith/home.html&#039;, &#039;http://abc.com/~smith/home.html&#039;), true)
    t.equal(fastURI.equal(&#039;http://ABC.com/%7Esmith/home.html&#039;, &#039;http://abc.com/~smith/home.html&#039;), true)
    t.equal(fastURI.equal(&#039;http://ABC.com:/%7esmith/home.html&#039;, &#039;http://abc.com/~smith/home.html&#039;), true)
    t.equal(fastURI.equal(&#039;HTTP://ABC.COM&#039;, &#039;http://abc.com/&#039;), true)
    // test from RFC 3986
    t.equal(fastURI.equal(&#039;http://example.com:/&#039;, &#039;http://example.com:80/&#039;), true)
    t.end()
  })
}

if (fastURI.SCHEMES.https) {
  test(&#039;HTTPS Equals&#039;, (t) =&gt; {
    t.equal(fastURI.equal(&#039;https://example.com&#039;, &#039;https://example.com:443/&#039;), true)
    t.equal(fastURI.equal(&#039;https://example.com:/&#039;, &#039;https://example.com:443/&#039;), true)
    t.end()
  })
}

if (fastURI.SCHEMES.urn) {
  test(&#039;URN Parsing&#039;, (t) =&gt; {
    // example from RFC 2141
    const components = fastURI.parse(&#039;urn:foo:a123,456&#039;)
    t.equal(components.error, undefined, &#039;errors&#039;)
    t.equal(components.scheme, &#039;urn&#039;, &#039;scheme&#039;)
    t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
    t.equal(components.host, undefined, &#039;host&#039;)
    t.equal(components.port, undefined, &#039;port&#039;)
    t.equal(components.path, undefined, &#039;path&#039;)
    t.equal(components.query, undefined, &#039;query&#039;)
    t.equal(components.fragment, undefined, &#039;fragment&#039;)
    t.equal(components.nid, &#039;foo&#039;, &#039;nid&#039;)
    t.equal(components.nss, &#039;a123,456&#039;, &#039;nss&#039;)
    t.end()
  })

  test(&#039;URN Serialization&#039;, (t) =&gt; {
    // example from RFC 2141
    const components = {
      scheme: &#039;urn&#039;,
      nid: &#039;foo&#039;,
      nss: &#039;a123,456&#039;
    }
    t.equal(fastURI.serialize(components), &#039;urn:foo:a123,456&#039;)
    t.end()
  })

  test(&#039;URN Equals&#039;, { skip: true }, (t) =&gt; {
    // test from RFC 2141
    t.equal(fastURI.equal(&#039;urn:foo:a123,456&#039;, &#039;urn:foo:a123,456&#039;), true)
    t.equal(fastURI.equal(&#039;urn:foo:a123,456&#039;, &#039;URN:foo:a123,456&#039;), true)
    t.equal(fastURI.equal(&#039;urn:foo:a123,456&#039;, &#039;urn:FOO:a123,456&#039;), true)
    t.equal(fastURI.equal(&#039;urn:foo:a123,456&#039;, &#039;urn:foo:A123,456&#039;), false)
    t.equal(fastURI.equal(&#039;urn:foo:a123%2C456&#039;, &#039;URN:FOO:a123%2c456&#039;), true)
    t.end()
  })

  test(&#039;URN Resolving&#039;, (t) =&gt; {
    // example from epoberezkin
    t.equal(fastURI.resolve(&#039;&#039;, &#039;urn:some:ip:prop&#039;), &#039;urn:some:ip:prop&#039;)
    t.equal(fastURI.resolve(&#039;#&#039;, &#039;urn:some:ip:prop&#039;), &#039;urn:some:ip:prop&#039;)
    t.equal(fastURI.resolve(&#039;urn:some:ip:prop&#039;, &#039;urn:some:ip:prop&#039;), &#039;urn:some:ip:prop&#039;)
    t.equal(fastURI.resolve(&#039;urn:some:other:prop&#039;, &#039;urn:some:ip:prop&#039;), &#039;urn:some:ip:prop&#039;)
    t.end()
  })

  test(&#039;UUID Parsing&#039;, (t) =&gt; {
    // example from RFC 4122
    let components = fastURI.parse(&#039;urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6&#039;)
    t.equal(components.error, undefined, &#039;errors&#039;)
    t.equal(components.scheme, &#039;urn&#039;, &#039;scheme&#039;)
    t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
    t.equal(components.host, undefined, &#039;host&#039;)
    t.equal(components.port, undefined, &#039;port&#039;)
    t.equal(components.path, undefined, &#039;path&#039;)
    t.equal(components.query, undefined, &#039;query&#039;)
    t.equal(components.fragment, undefined, &#039;fragment&#039;)
    t.equal(components.nid, &#039;uuid&#039;, &#039;nid&#039;)
    t.equal(components.nss, undefined, &#039;nss&#039;)
    t.equal(components.uuid, &#039;f81d4fae-7dec-11d0-a765-00a0c91e6bf6&#039;, &#039;uuid&#039;)

    components = fastURI.parse(&#039;urn:uuid:notauuid-7dec-11d0-a765-00a0c91e6bf6&#039;)
    t.notEqual(components.error, undefined, &#039;errors&#039;)
    t.end()
  })

  test(&#039;UUID Serialization&#039;, (t) =&gt; {
    // example from RFC 4122
    let components = {
      scheme: &#039;urn&#039;,
      nid: &#039;uuid&#039;,
      uuid: &#039;f81d4fae-7dec-11d0-a765-00a0c91e6bf6&#039;
    }
    t.equal(fastURI.serialize(components), &#039;urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6&#039;)

    components = {
      scheme: &#039;urn&#039;,
      nid: &#039;uuid&#039;,
      uuid: &#039;notauuid-7dec-11d0-a765-00a0c91e6bf6&#039;
    }
    t.equal(fastURI.serialize(components), &#039;urn:uuid:notauuid-7dec-11d0-a765-00a0c91e6bf6&#039;)
    t.end()
  })

  test(&#039;UUID Equals&#039;, (t) =&gt; {
    t.equal(fastURI.equal(&#039;URN:UUID:F81D4FAE-7DEC-11D0-A765-00A0C91E6BF6&#039;, &#039;urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6&#039;), true)
    t.end()
  })

  test(&#039;URN NID Override&#039;, (t) =&gt; {
    let components = fastURI.parse(&#039;urn:foo:f81d4fae-7dec-11d0-a765-00a0c91e6bf6&#039;, { nid: &#039;uuid&#039; })
    t.equal(components.error, undefined, &#039;errors&#039;)
    t.equal(components.scheme, &#039;urn&#039;, &#039;scheme&#039;)
    t.equal(components.path, undefined, &#039;path&#039;)
    t.equal(components.nid, &#039;foo&#039;, &#039;nid&#039;)
    t.equal(components.nss, undefined, &#039;nss&#039;)
    t.equal(components.uuid, &#039;f81d4fae-7dec-11d0-a765-00a0c91e6bf6&#039;, &#039;uuid&#039;)

    components = {
      scheme: &#039;urn&#039;,
      nid: &#039;foo&#039;,
      uuid: &#039;f81d4fae-7dec-11d0-a765-00a0c91e6bf6&#039;
    }
    t.equal(fastURI.serialize(components, { nid: &#039;uuid&#039; }), &#039;urn:foo:f81d4fae-7dec-11d0-a765-00a0c91e6bf6&#039;)
    t.end()
  })
}

if (fastURI.SCHEMES.mailto) {
  test(&#039;Mailto Parse&#039;, (t) =&gt; {
    let components

    // tests from RFC 6068

    components = fastURI.parse(&#039;mailto:chris@example.com&#039;)
    t.equal(components.error, undefined, &#039;error&#039;)
    t.equal(components.scheme, &#039;mailto&#039;, &#039;scheme&#039;)
    t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
    t.equal(components.host, undefined, &#039;host&#039;)
    t.equal(components.port, undefined, &#039;port&#039;)
    t.equal(components.path, undefined, &#039;path&#039;)
    t.equal(components.query, undefined, &#039;query&#039;)
    t.equal(components.fragment, undefined, &#039;fragment&#039;)
    t.deepEqual(components.to, [&#039;chris@example.com&#039;], &#039;to&#039;)
    t.equal(components.subject, undefined, &#039;subject&#039;)
    t.equal(components.body, undefined, &#039;body&#039;)
    t.equal(components.headers, undefined, &#039;headers&#039;)

    components = fastURI.parse(&#039;mailto:infobot@example.com?subject=current-issue&#039;)
    t.deepEqual(components.to, [&#039;infobot@example.com&#039;], &#039;to&#039;)
    t.equal(components.subject, &#039;current-issue&#039;, &#039;subject&#039;)

    components = fastURI.parse(&#039;mailto:infobot@example.com?body=send%20current-issue&#039;)
    t.deepEqual(components.to, [&#039;infobot@example.com&#039;], &#039;to&#039;)
    t.equal(components.body, &#039;send current-issue&#039;, &#039;body&#039;)

    components = fastURI.parse(&#039;mailto:infobot@example.com?body=send%20current-issue%0D%0Asend%20index&#039;)
    t.deepEqual(components.to, [&#039;infobot@example.com&#039;], &#039;to&#039;)
    t.equal(components.body, &#039;send current-issue\x0D\x0Asend index&#039;, &#039;body&#039;)

    components = fastURI.parse(&#039;mailto:list@example.org?In-Reply-To=%3C3469A91.D10AF4C@example.com%3E&#039;)
    t.deepEqual(components.to, [&#039;list@example.org&#039;], &#039;to&#039;)
    t.deepEqual(components.headers, { &#039;In-Reply-To&#039;: &#039;&lt;3469A91.D10AF4C@example.com&gt;&#039; }, &#039;headers&#039;)

    components = fastURI.parse(&#039;mailto:majordomo@example.com?body=subscribe%20bamboo-l&#039;)
    t.deepEqual(components.to, [&#039;majordomo@example.com&#039;], &#039;to&#039;)
    t.equal(components.body, &#039;subscribe bamboo-l&#039;, &#039;body&#039;)

    components = fastURI.parse(&#039;mailto:joe@example.com?cc=bob@example.com&amp;body=hello&#039;)
    t.deepEqual(components.to, [&#039;joe@example.com&#039;], &#039;to&#039;)
    t.equal(components.body, &#039;hello&#039;, &#039;body&#039;)
    t.deepEqual(components.headers, { cc: &#039;bob@example.com&#039; }, &#039;headers&#039;)

    components = fastURI.parse(&#039;mailto:joe@example.com?cc=bob@example.com?body=hello&#039;)
    if (fastURI.VALIDATE_SUPPORT) t.ok(components.error, &#039;invalid header fields&#039;)

    components = fastURI.parse(&#039;mailto:gorby%25kremvax@example.com&#039;)
    t.deepEqual(components.to, [&#039;gorby%kremvax@example.com&#039;], &#039;to gorby%kremvax@example.com&#039;)

    components = fastURI.parse(&#039;mailto:unlikely%3Faddress@example.com?blat=foop&#039;)
    t.deepEqual(components.to, [&#039;unlikely?address@example.com&#039;], &#039;to unlikely?address@example.com&#039;)
    t.deepEqual(components.headers, { blat: &#039;foop&#039; }, &#039;headers&#039;)

    components = fastURI.parse(&#039;mailto:Mike%26family@example.org&#039;)
    t.deepEqual(components.to, [&#039;Mike&amp;family@example.org&#039;], &#039;to Mike&amp;family@example.org&#039;)

    components = fastURI.parse(&#039;mailto:%22not%40me%22@example.org&#039;)
    t.deepEqual(components.to, [&#039;&quot;not@me&quot;@example.org&#039;], &#039;to &#039; + &#039;&quot;not@me&quot;@example.org&#039;)

    components = fastURI.parse(&#039;mailto:%22oh%5C%5Cno%22@example.org&#039;)
    t.deepEqual(components.to, [&#039;&quot;oh\\\\no&quot;@example.org&#039;], &#039;to &#039; + &#039;&quot;oh\\\\no&quot;@example.org&#039;)

    components = fastURI.parse(&quot;mailto:%22%5C%5C%5C%22it&#039;s%5C%20ugly%5C%5C%5C%22%22@example.org&quot;)
    t.deepEqual(components.to, [&#039;&quot;\\\\\\&quot;it\&#039;s\\ ugly\\\\\\&quot;&quot;@example.org&#039;], &#039;to &#039; + &#039;&quot;\\\\\\&quot;it\&#039;s\\ ugly\\\\\\&quot;&quot;@example.org&#039;)

    components = fastURI.parse(&#039;mailto:user@example.org?subject=caf%C3%A9&#039;)
    t.deepEqual(components.to, [&#039;user@example.org&#039;], &#039;to&#039;)
    t.equal(components.subject, &#039;caf\xE9&#039;, &#039;subject&#039;)

    components = fastURI.parse(&#039;mailto:user@example.org?subject=%3D%3Futf-8%3FQ%3Fcaf%3DC3%3DA9%3F%3D&#039;)
    t.deepEqual(components.to, [&#039;user@example.org&#039;], &#039;to&#039;)
    t.equal(components.subject, &#039;=?utf-8?Q?caf=C3=A9?=&#039;, &#039;subject&#039;) // TODO: Verify this

    components = fastURI.parse(&#039;mailto:user@example.org?subject=%3D%3Fiso-8859-1%3FQ%3Fcaf%3DE9%3F%3D&#039;)
    t.deepEqual(components.to, [&#039;user@example.org&#039;], &#039;to&#039;)
    t.equal(components.subject, &#039;=?iso-8859-1?Q?caf=E9?=&#039;, &#039;subject&#039;) // TODO: Verify this

    components = fastURI.parse(&#039;mailto:user@example.org?subject=caf%C3%A9&amp;body=caf%C3%A9&#039;)
    t.deepEqual(components.to, [&#039;user@example.org&#039;], &#039;to&#039;)
    t.equal(components.subject, &#039;caf\xE9&#039;, &#039;subject&#039;)
    t.equal(components.body, &#039;caf\xE9&#039;, &#039;body&#039;)

    if (fastURI.IRI_SUPPORT) {
      components = fastURI.parse(&#039;mailto:user@%E7%B4%8D%E8%B1%86.example.org?subject=Test&amp;body=NATTO&#039;)
      t.deepEqual(components.to, [&#039;user@xn--99zt52a.example.org&#039;], &#039;to&#039;)
      t.equal(components.subject, &#039;Test&#039;, &#039;subject&#039;)
      t.equal(components.body, &#039;NATTO&#039;, &#039;body&#039;)
    }

    t.end()
  })

  test(&#039;Mailto Serialize&#039;, (t) =&gt; {
    // tests from RFC 6068
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;chris@example.com&#039;] }), &#039;mailto:chris@example.com&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;infobot@example.com&#039;], body: &#039;current-issue&#039; }), &#039;mailto:infobot@example.com?body=current-issue&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;infobot@example.com&#039;], body: &#039;send current-issue&#039; }), &#039;mailto:infobot@example.com?body=send%20current-issue&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;infobot@example.com&#039;], body: &#039;send current-issue\x0D\x0Asend index&#039; }), &#039;mailto:infobot@example.com?body=send%20current-issue%0D%0Asend%20index&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;list@example.org&#039;], headers: { &#039;In-Reply-To&#039;: &#039;&lt;3469A91.D10AF4C@example.com&gt;&#039; } }), &#039;mailto:list@example.org?In-Reply-To=%3C3469A91.D10AF4C@example.com%3E&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;majordomo@example.com&#039;], body: &#039;subscribe bamboo-l&#039; }), &#039;mailto:majordomo@example.com?body=subscribe%20bamboo-l&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;joe@example.com&#039;], headers: { cc: &#039;bob@example.com&#039;, body: &#039;hello&#039; } }), &#039;mailto:joe@example.com?cc=bob@example.com&amp;body=hello&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;gorby%25kremvax@example.com&#039;] }), &#039;mailto:gorby%25kremvax@example.com&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;unlikely%3Faddress@example.com&#039;], headers: { blat: &#039;foop&#039; } }), &#039;mailto:unlikely%3Faddress@example.com?blat=foop&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;Mike&amp;family@example.org&#039;] }), &#039;mailto:Mike%26family@example.org&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;&quot;not@me&quot;@example.org&#039;] }), &#039;mailto:%22not%40me%22@example.org&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;&quot;oh\\\\no&quot;@example.org&#039;] }), &#039;mailto:%22oh%5C%5Cno%22@example.org&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;&quot;\\\\\\&quot;it\&#039;s\\ ugly\\\\\\&quot;&quot;@example.org&#039;] }), &quot;mailto:%22%5C%5C%5C%22it&#039;s%5C%20ugly%5C%5C%5C%22%22@example.org&quot;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;user@example.org&#039;], subject: &#039;caf\xE9&#039; }), &#039;mailto:user@example.org?subject=caf%C3%A9&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;user@example.org&#039;], subject: &#039;=?utf-8?Q?caf=C3=A9?=&#039; }), &#039;mailto:user@example.org?subject=%3D%3Futf-8%3FQ%3Fcaf%3DC3%3DA9%3F%3D&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;user@example.org&#039;], subject: &#039;=?iso-8859-1?Q?caf=E9?=&#039; }), &#039;mailto:user@example.org?subject=%3D%3Fiso-8859-1%3FQ%3Fcaf%3DE9%3F%3D&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;user@example.org&#039;], subject: &#039;caf\xE9&#039;, body: &#039;caf\xE9&#039; }), &#039;mailto:user@example.org?subject=caf%C3%A9&amp;body=caf%C3%A9&#039;)
    if (fastURI.IRI_SUPPORT) {
      t.equal(fastURI.serialize({ scheme: &#039;mailto&#039;, to: [&#039;us\xE9r@\u7d0d\u8c46.example.org&#039;], subject: &#039;Test&#039;, body: &#039;NATTO&#039; }), &#039;mailto:us%C3%A9r@xn--99zt52a.example.org?subject=Test&amp;body=NATTO&#039;)
    }
    t.end()
  })

  test(&#039;Mailto Equals&#039;, (t) =&gt; {
    // tests from RFC 6068
    t.equal(fastURI.equal(&#039;mailto:addr1@an.example,addr2@an.example&#039;, &#039;mailto:?to=addr1@an.example,addr2@an.example&#039;), true)
    t.equal(fastURI.equal(&#039;mailto:?to=addr1@an.example,addr2@an.example&#039;, &#039;mailto:addr1@an.example?to=addr2@an.example&#039;), true)
    t.end()
  })
}

if (fastURI.SCHEMES.ws) {
  test(&#039;WS Parse&#039;, (t) =&gt; {
    let components

    // example from RFC 6455, Sec 4.1
    components = fastURI.parse(&#039;ws://example.com/chat&#039;)
    t.equal(components.error, undefined, &#039;error&#039;)
    t.equal(components.scheme, &#039;ws&#039;, &#039;scheme&#039;)
    t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
    t.equal(components.host, &#039;example.com&#039;, &#039;host&#039;)
    t.equal(components.port, undefined, &#039;port&#039;)
    t.equal(components.path, undefined, &#039;path&#039;)
    t.equal(components.query, undefined, &#039;query&#039;)
    t.equal(components.fragment, undefined, &#039;fragment&#039;)
    t.equal(components.resourceName, &#039;/chat&#039;, &#039;resourceName&#039;)
    t.equal(components.secure, false, &#039;secure&#039;)

    components = fastURI.parse(&#039;ws://example.com/foo?bar=baz&#039;)
    t.equal(components.error, undefined, &#039;error&#039;)
    t.equal(components.scheme, &#039;ws&#039;, &#039;scheme&#039;)
    t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
    t.equal(components.host, &#039;example.com&#039;, &#039;host&#039;)
    t.equal(components.port, undefined, &#039;port&#039;)
    t.equal(components.path, undefined, &#039;path&#039;)
    t.equal(components.query, undefined, &#039;query&#039;)
    t.equal(components.fragment, undefined, &#039;fragment&#039;)
    t.equal(components.resourceName, &#039;/foo?bar=baz&#039;, &#039;resourceName&#039;)
    t.equal(components.secure, false, &#039;secure&#039;)

    components = fastURI.parse(&#039;ws://example.com/?bar=baz&#039;)
    t.equal(components.resourceName, &#039;/?bar=baz&#039;, &#039;resourceName&#039;)

    t.end()
  })

  test(&#039;WS Serialize&#039;, (t) =&gt; {
    t.equal(fastURI.serialize({ scheme: &#039;ws&#039; }), &#039;ws:&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;ws&#039;, host: &#039;example.com&#039; }), &#039;ws://example.com&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;ws&#039;, resourceName: &#039;/&#039; }), &#039;ws:&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;ws&#039;, resourceName: &#039;/foo&#039; }), &#039;ws:/foo&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;ws&#039;, resourceName: &#039;/foo?bar&#039; }), &#039;ws:/foo?bar&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;ws&#039;, secure: false }), &#039;ws:&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;ws&#039;, secure: true }), &#039;wss:&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;ws&#039;, host: &#039;example.com&#039;, resourceName: &#039;/foo&#039; }), &#039;ws://example.com/foo&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;ws&#039;, host: &#039;example.com&#039;, resourceName: &#039;/foo?bar&#039; }), &#039;ws://example.com/foo?bar&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;ws&#039;, host: &#039;example.com&#039;, secure: false }), &#039;ws://example.com&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;ws&#039;, host: &#039;example.com&#039;, secure: true }), &#039;wss://example.com&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;ws&#039;, host: &#039;example.com&#039;, resourceName: &#039;/foo?bar&#039;, secure: false }), &#039;ws://example.com/foo?bar&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;ws&#039;, host: &#039;example.com&#039;, resourceName: &#039;/foo?bar&#039;, secure: true }), &#039;wss://example.com/foo?bar&#039;)
    t.end()
  })

  test(&#039;WS Equal&#039;, (t) =&gt; {
    t.equal(fastURI.equal(&#039;WS://ABC.COM:80/chat#one&#039;, &#039;ws://abc.com/chat&#039;), true)
    t.end()
  })

  test(&#039;WS Normalize&#039;, (t) =&gt; {
    t.equal(fastURI.normalize(&#039;ws://example.com:80/foo#hash&#039;), &#039;ws://example.com/foo&#039;)
    t.end()
  })
}

if (fastURI.SCHEMES.wss) {
  test(&#039;WSS Parse&#039;, (t) =&gt; {
    let components

    // example from RFC 6455, Sec 4.1
    components = fastURI.parse(&#039;wss://example.com/chat&#039;)
    t.equal(components.error, undefined, &#039;error&#039;)
    t.equal(components.scheme, &#039;wss&#039;, &#039;scheme&#039;)
    t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
    t.equal(components.host, &#039;example.com&#039;, &#039;host&#039;)
    t.equal(components.port, undefined, &#039;port&#039;)
    t.equal(components.path, undefined, &#039;path&#039;)
    t.equal(components.query, undefined, &#039;query&#039;)
    t.equal(components.fragment, undefined, &#039;fragment&#039;)
    t.equal(components.resourceName, &#039;/chat&#039;, &#039;resourceName&#039;)
    t.equal(components.secure, true, &#039;secure&#039;)

    components = fastURI.parse(&#039;wss://example.com/foo?bar=baz&#039;)
    t.equal(components.error, undefined, &#039;error&#039;)
    t.equal(components.scheme, &#039;wss&#039;, &#039;scheme&#039;)
    t.equal(components.userinfo, undefined, &#039;userinfo&#039;)
    t.equal(components.host, &#039;example.com&#039;, &#039;host&#039;)
    t.equal(components.port, undefined, &#039;port&#039;)
    t.equal(components.path, undefined, &#039;path&#039;)
    t.equal(components.query, undefined, &#039;query&#039;)
    t.equal(components.fragment, undefined, &#039;fragment&#039;)
    t.equal(components.resourceName, &#039;/foo?bar=baz&#039;, &#039;resourceName&#039;)
    t.equal(components.secure, true, &#039;secure&#039;)

    components = fastURI.parse(&#039;wss://example.com/?bar=baz&#039;)
    t.equal(components.resourceName, &#039;/?bar=baz&#039;, &#039;resourceName&#039;)

    t.end()
  })

  test(&#039;WSS Serialize&#039;, (t) =&gt; {
    t.equal(fastURI.serialize({ scheme: &#039;wss&#039; }), &#039;wss:&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;wss&#039;, host: &#039;example.com&#039; }), &#039;wss://example.com&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;wss&#039;, resourceName: &#039;/&#039; }), &#039;wss:&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;wss&#039;, resourceName: &#039;/foo&#039; }), &#039;wss:/foo&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;wss&#039;, resourceName: &#039;/foo?bar&#039; }), &#039;wss:/foo?bar&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;wss&#039;, secure: false }), &#039;ws:&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;wss&#039;, secure: true }), &#039;wss:&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;wss&#039;, host: &#039;example.com&#039;, resourceName: &#039;/foo&#039; }), &#039;wss://example.com/foo&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;wss&#039;, host: &#039;example.com&#039;, resourceName: &#039;/foo?bar&#039; }), &#039;wss://example.com/foo?bar&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;wss&#039;, host: &#039;example.com&#039;, secure: false }), &#039;ws://example.com&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;wss&#039;, host: &#039;example.com&#039;, secure: true }), &#039;wss://example.com&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;wss&#039;, host: &#039;example.com&#039;, resourceName: &#039;/foo?bar&#039;, secure: false }), &#039;ws://example.com/foo?bar&#039;)
    t.equal(fastURI.serialize({ scheme: &#039;wss&#039;, host: &#039;example.com&#039;, resourceName: &#039;/foo?bar&#039;, secure: true }), &#039;wss://example.com/foo?bar&#039;)
    t.end()
  })

  test(&#039;WSS Equal&#039;, (t) =&gt; {
    t.equal(fastURI.equal(&#039;WSS://ABC.COM:443/chat#one&#039;, &#039;wss://abc.com/chat&#039;), true)
    t.end()
  })

  test(&#039;WSS Normalize&#039;, (t) =&gt; {
    t.equal(fastURI.normalize(&#039;wss://example.com:443/foo#hash&#039;), &#039;wss://example.com/foo&#039;)
    t.end()
  })
}
</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
