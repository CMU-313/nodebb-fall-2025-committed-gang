<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/jquery-form/test/test.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato-file.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="https://github.com/the-simian/es6-plato">ES6 Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
      <li class="active">
        <a href="display.html">Summary Display</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/jquery-form/test/test.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">70.03</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">915</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">77.83</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">11.63</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">/* global chai, scriptCount */

&#039;use strict&#039;;

// helper method
var arrayCount = function(arr, key) {
	var count = 0;
	for (var i = 0; i &lt; arr.length; i++) {
		if (arr[i].name === key) {
			count++;
		}
	}
	return count;
};

// helper method
var arrayValue = function(arr, key) {
	for (var i = 0; i &lt; arr.length; i++) {
		if (arr[i].name === key) {
			return arr[i].value;
		}
	}
	return undefined;
};


var assert = chai.assert;
var fixture;

describe(&#039;form&#039;, function() {
	before(function() {
		fixture = $(&#039;#main&#039;).html();
	});

	beforeEach(function() {
		$(&#039;#main&#039;).html(fixture);
	});


	it(&#039;&quot;action&quot; and &quot;method&quot; form attributes&#039;, function() {
		var f = $(&#039;#form1&#039;);
		assert.strictEqual(f.attr(&#039;action&#039;), &#039;ajax/text.html&#039;, &#039;form &quot;action&quot;&#039;);
		assert.strictEqual(f.attr(&#039;method&#039;), &#039;get&#039;, &#039;form &quot;method&quot;&#039;);
	});

	it(&#039;formToArray: multi-select&#039;, function() {
		var a = $(&#039;#form1&#039;).formToArray();
		assert.strictEqual(a.constructor, Array, &#039;type check&#039;);
		assert.strictEqual(a.length, 13, &#039;array length&#039;);
		assert.strictEqual(arrayCount(a, &#039;Multiple&#039;), 3, &#039;multi-select&#039;);
	});

	it(&#039;formToArray: &quot;action&quot; and &quot;method&quot; inputs&#039;, function() {
		var a = $(&#039;#form1&#039;).formToArray();
		assert.strictEqual(a.constructor, Array, &#039;type check&#039;);
		assert.strictEqual(arrayValue(a, &#039;action&#039;), &#039;1&#039;, &#039;input name=action&#039;);
		assert.strictEqual(arrayValue(a, &#039;method&#039;), &#039;2&#039;, &#039;input name=method&#039;);
	});

	it(&#039;formToArray: semantic test&#039;, function() {
		var formData = $(&#039;#form2&#039;).formToArray(true);
		var testData = [&#039;a&#039;,&#039;b&#039;,&#039;c&#039;,&#039;d&#039;,&#039;e&#039;,&#039;f&#039;];
		for (var i = 0; i &lt; 6; i++) {
			assert.strictEqual(formData[i].name, testData[i], &#039;match value at index=&#039; + i);
		}
	});

	it(&#039;formToArray: text promotion for missing value attributes&#039;, function() {
		var expected = [
			{ name: &#039;A&#039;, value: &#039;&#039;},
			{ name: &#039;B&#039;, value: &#039;MISSING_ATTR&#039;},
			{ name: &#039;C&#039;, value: &#039;&#039;},
			{ name: &#039;C&#039;, value: &#039;MISSING_ATTR&#039;}
		];
		var a = $(&#039;#form6&#039;).formToArray(true);

		// verify all the option values
		for (var i = 0; i &lt; a.length; i++) {
			assert.strictEqual(a[i].name, expected[i].name, &#039;Name: &#039; + a[i].name + &#039; = &#039; + expected[i].name);
			assert.strictEqual(a[i].value, expected[i].value, &#039;Value: &#039; + a[i].value + &#039; = &#039; + expected[i].value);
		}
	});

	it(&#039;formToArray: outside fields&#039;, function() {
		var formData = $(&#039;#form10&#039;).formToArray();
		assert.strictEqual(formData.length, 2, &#039;There are two &quot;successful&quot; elements of the form&#039;);
	});

	// test string serialization
	it(&#039;serialize: param count&#039;, function() {
		var s = $(&#039;#form1&#039;).formSerialize();
		assert.ok(s.constructor == String, &#039;type check&#039;);
		assert.ok(s.split(&#039;&amp;&#039;).length == 13, &#039;string array length&#039;);
	});

	// test support for input elements not contained within a form
	it(&#039;serialize: pseudo form&#039;, function() {
		var s = $(&#039;#pseudo *&#039;).fieldSerialize();
		assert.ok(s.constructor == String, &#039;type check&#039;);
		assert.ok(s.split(&#039;&amp;&#039;).length == 3, &#039;string array length&#039;);
	});


	// test resetForm
	it(&#039;resetForm (text input)&#039;, function() {
		var $el = $(&#039;#form1 input[name=Name]&#039;);
		var val = $el.val();
		assert.ok(&#039;MyName1&#039; == val, &#039;beforeSubmit: &#039; + val);
		$el.val(&#039;test&#039;);
		val = $el.val();
		assert.ok(&#039;test&#039; == $el.val(), &#039;update: &#039; + val);
		$(&#039;#form1&#039;).resetForm();
		val = $el.val();
		assert.ok(&#039;MyName1&#039; == val, &#039;success: &#039; + val);
	});

	// test resetForm
	it(&#039;resetForm (select)&#039;, function() {
		var $el = $(&#039;#form1 select[name=Single]&#039;);
		var val = $el.val();
		assert.ok(&#039;one&#039; == val, &#039;beforeSubmit: &#039; + val);
		$el.val(&#039;two&#039;);
		val = $el.val();
		assert.ok(&#039;two&#039; == $el.val(), &#039;update: &#039; + val);
		$(&#039;#form1&#039;).resetForm();
		val = $el.val();
		assert.ok(&#039;one&#039; == val, &#039;success: &#039; + val);
	});

	// test resetForm
	it(&#039;resetForm (textarea)&#039;, function() {
		var $el = $(&#039;#form1 textarea&#039;);
		var val = $el.val();
		assert.ok(&#039;This is Form1&#039; == val, &#039;beforeSubmit: &#039; + val);
		$el.val(&#039;test&#039;);
		val = $el.val();
		assert.ok(&#039;test&#039; == val, &#039;udpate: &#039; + val);
		$(&#039;#form1&#039;).resetForm();
		val = $el.val();
		assert.ok(&#039;This is Form1&#039; == val, &#039;success: &#039; + val);
	});

	// test resetForm
	it(&#039;resetForm (checkbox)&#039;, function() {
		var el = $(&#039;#form1 input:checkbox:checked&#039;)[0];
		var val = el.value;
		assert.ok(el.checked, &#039;beforeSubmit: &#039; + el.checked);
		el.checked = false;
		assert.ok(!el.checked, &#039;update: &#039; + el.checked);
		$(&#039;#form1&#039;).resetForm();
		assert.ok(el.checked, &#039;success: &#039; + el.checked);
	});

	// test resetForm
	it(&#039;resetForm (radio)&#039;, function() {
		var el = $(&#039;#form1 input:radio:checked&#039;)[0];
		var val = el.value;
		assert.ok(el.checked, &#039;beforeSubmit: &#039; + el.checked);
		el.checked = false;
		assert.ok(!el.checked, &#039;update: &#039; + el.checked);
		$(&#039;#form1&#039;).resetForm();
		assert.ok(el.checked, &#039;success: &#039; + el.checked);
	});


	// test clearForm
	it(&#039;clearForm (text input)&#039;, function() {
		var $el = $(&#039;#form1 input[name=Name]&#039;);
		var val = $el.val();
		assert.ok(&#039;MyName1&#039; == val, &#039;beforeSubmit: &#039; + val);
		$(&#039;#form1&#039;).clearForm();
		val = $el.val();
		assert.ok(&#039;&#039; == val, &#039;success: &#039; + val);
	});

	// test clearForm
	it(&#039;clearForm (select)&#039;, function() {
		var $el = $(&#039;#form1 select[name=Single]&#039;);
		var val = $el.val();
		assert.ok(&#039;one&#039; == val, &#039;beforeSubmit: &#039; + val);
		$(&#039;#form1&#039;).clearForm();
		val = $el.val();
		assert.ok(!val, &#039;success: &#039; + val);
	});

	// test clearForm; here we&#039;re testing that a hidden field is NOT cleared
	it(&#039;clearForm: (hidden input)&#039;, function() {
		var $el = $(&#039;#form1 input:hidden&#039;);
		var val = $el.val();
		assert.ok(&#039;hiddenValue&#039; == val, &#039;beforeSubmit: &#039; + val);
		$(&#039;#form1&#039;).clearForm();
		val = $el.val();
		assert.ok(&#039;hiddenValue&#039; == val, &#039;success: &#039; + val);
	});


	// test clearForm; here we&#039;re testing that a submit element is NOT cleared
	it(&#039;clearForm: (submit input)&#039;, function() {
		var $el = $(&#039;#form1 input:submit&#039;);
		var val = $el.val();
		assert.ok(&#039;Submit1&#039; == val, &#039;beforeSubmit: &#039; + val);
		$(&#039;#form1&#039;).clearForm();
		val = $el.val();
		assert.ok(&#039;Submit1&#039; == val, &#039;success: &#039; + val);
	});

	// test clearForm
	it(&#039;clearForm (checkbox)&#039;, function() {
		var el = $(&#039;#form1 input:checkbox:checked&#039;)[0];
		assert.ok(el.checked, &#039;beforeSubmit: &#039; + el.checked);
		$(&#039;#form1&#039;).clearForm();
		assert.ok(!el.checked, &#039;success: &#039; + el.checked);
	});

	// test clearForm
	it(&#039;clearForm (radio)&#039;, function() {
		var el = $(&#039;#form1 input:radio:checked&#039;)[0];
		assert.ok(el.checked, &#039;beforeSubmit: &#039; + el.checked);
		$(&#039;#form1&#039;).clearForm();
		assert.ok(!el.checked, &#039;success: &#039; + el.checked);
	});

	// test ajaxSubmit target update
	it(&#039;ajaxSubmit: target == String&#039;, function() {
		$(&#039;#targetDiv&#039;).empty();
		// stop();
		var opts = {
			target: &#039;#targetDiv&#039;,
			success: function() { // post-callback
				assert.ok(true, &#039;post-callback&#039;);
				assert.ok($(&#039;#targetDiv&#039;).text().match(&#039;Lorem ipsum&#039;), &#039;targetDiv updated&#039;);
				// start();
			}
		};

		// expect(2);
		$(&#039;#form3&#039;).ajaxSubmit(opts);
	});

	// test passing jQuery object as the target
	it(&#039;ajaxSubmit: target == jQuery object&#039;, function() {
		// stop();
		var target = $(&#039;#targetDiv&#039;);
		target.empty();

		var opts = {
			target: target,
			success: function(responseText) { // post-callback
				assert.ok(true, &#039;post-callback&#039;);
				assert.ok($(&#039;#targetDiv&#039;).text().match(&#039;Lorem ipsum&#039;), &#039;targetDiv updated&#039;);
				// start();
			}
		};

		// expect(2);
		$(&#039;#form2&#039;).ajaxSubmit(opts);
	});

	// test passing DOM element as the target
	it(&#039;ajaxSubmit: target == DOM element&#039;, function() {
		// stop();
		$(&#039;#targetDiv&#039;).empty();
		var el = $(&#039;#targetDiv&#039;)[0];

		var opts = {
			target: &#039;#targetDiv&#039;,
			success: function(responseText) { // post-callback
				assert.ok(true, &#039;post-callback&#039;);
				assert.ok($(&#039;#targetDiv&#039;).text().match(&#039;Lorem ipsum&#039;), &#039;targetDiv updated&#039;);
				// start();
			}
		};

		// expect(2);
		$(&#039;#form2&#039;).ajaxSubmit(opts);
	});

	// test simulated $.load behavior
	it(&#039;ajaxSubmit: load target with scripts&#039;, function() {
		// stop();
		$(&#039;#targetDiv&#039;).empty();

		var opts = {
			target: &#039;#targetDiv&#039;,
			url:	&#039;ajax/doc-with-scripts.html?&#039; + new Date().getTime(),
			success: function(responseText) { // post-callback
				assert.ok(true, &#039;success-callback&#039;);
				assert.ok($(&#039;#targetDiv&#039;).text().match(&#039;Lorem ipsum&#039;), &#039;targetDiv updated&#039;);
				assert.ok(typeof unitTestVariable1 != &#039;undefined&#039;, &#039;first script block executed&#039;);
				assert.ok(typeof unitTestVariable2 != &#039;undefined&#039;, &#039;second script block executed&#039;);
				assert.ok(typeof scriptCount != &#039;undefined&#039;, &#039;third script block executed&#039;);
				assert.ok(scriptCount == 1, &#039;scripts executed once: &#039; + scriptCount);
				// start();
			}
		};

		// expect(6);
		$(&#039;#form2&#039;).ajaxSubmit(opts);
	});

	// test ajaxSubmit pre-submit callback
	it(&#039;ajaxSubmit: pre-submit callback&#039;, function() {
		var opts = {
			beforeSubmit: function(a, jq) { // pre-submit callback
				assert.ok(true, &#039;pre-submit callback&#039;);
				assert.ok(a.constructor == Array, &#039;type check array&#039;);
				assert.ok(jq.jquery, &#039;type check jQuery&#039;);
				assert.ok(jq[0].tagName.toLowerCase() == &#039;form&#039;, &#039;jQuery arg == &quot;form&quot;: &#039; + jq[0].tagName.toLowerCase());
			}
		};

		// expect(4);
		$(&#039;#form3&#039;).ajaxSubmit(opts);
	});

	// test ajaxSubmit post-submit callback for response and status text
	it(&#039;ajaxSubmit: post-submit callback&#039;, function() {
		// stop();

		var opts = {
			success: function(responseText, statusText) { // post-submit callback
				assert.ok(true, &#039;post-submit callback&#039;);
				assert.ok(responseText.match(&#039;Lorem ipsum&#039;), &#039;responseText&#039;);
				assert.ok(statusText == &#039;success&#039;, &#039;statusText&#039;);
				// start();
			}
		};

		// expect(3);
		$(&#039;#form3&#039;).ajaxSubmit(opts);
	});

	// test ajaxSubmit with function argument
	it(&#039;ajaxSubmit: function arg&#039;, function() {
		// stop();

		// expect(1);
		$(&#039;#form3&#039;).ajaxSubmit(function() {
			assert.ok(true, &#039;callback hit&#039;);
			// start();
		});
	});

	// test semantic support via ajaxSubmit&#039;s pre-submit callback
	it(&#039;ajaxSubmit: semantic test&#039;, function() {
		var testData = [&#039;a&#039;,&#039;b&#039;,&#039;c&#039;,&#039;d&#039;,&#039;e&#039;,&#039;f&#039;];

		var opts = {
			semantic: true,
			beforeSubmit: function(a, jq) { // pre-submit callback
				assert.ok(true, &#039;pre-submit callback&#039;);
				assert.ok(a.constructor == Array, &#039;type check&#039;);
				assert.ok(jq.jquery, &#039;type check jQuery&#039;);
				for (var i = 0; i &lt; a.length; i++) {
					assert.ok(a[i].name == testData[i], &#039;match value at index=&#039; + i);
				}
			}
		};

		// expect(9);
		$(&#039;#form2&#039;).ajaxSubmit(opts);
	});

	// test json datatype
	it(&#039;ajaxSubmit: dataType == json&#039;, function() {
		// stop();

		var opts = {
			url: &#039;ajax/json.json&#039;,
			dataType: &#039;json&#039;,
			success: function(data, statusText) { // post-submit callback
				// assert that the json data was evaluated
				assert.ok(typeof data == &#039;object&#039;, &#039;json data type&#039;);
				assert.ok(data.name == &#039;jquery-test&#039;, &#039;json data contents&#039;);
				// start();
			}
		};

		// expect(2);
		$(&#039;#form2&#039;).ajaxSubmit(opts);
	});


	// test script datatype
	it(&#039;ajaxSubmit: dataType == script&#039;, function() {
		// stop();

		var opts = {
			url: &#039;ajax/script.txt?&#039; + new Date().getTime(), // don&#039;t let ie cache it
			dataType: &#039;script&#039;,
			success: function(responseText, statusText) { // post-submit callback
				assert.ok(typeof formScriptTest == &#039;function&#039;, &#039;script evaluated&#039;);
				assert.ok(responseText.match(&#039;formScriptTest&#039;), &#039;script returned&#039;);
				// start();
			}
		};

		// expect(2);
		$(&#039;#form2&#039;).ajaxSubmit(opts);
	});

	// test xml datatype
	it(&#039;ajaxSubmit: dataType == xml&#039;, function() {
		// stop();

		var opts = {
			url: &#039;ajax/test.xml&#039;,
			dataType: &#039;xml&#039;,
			success: function(responseXML, statusText) { // post-submit callback
				assert.ok(typeof responseXML == &#039;object&#039;, &#039;data type xml&#039;);
				assert.ok($(&#039;test&#039;, responseXML).length == 3, &#039;xml data query&#039;);
				// start();
			}
		};

		// expect(2);
		$(&#039;#form2&#039;).ajaxSubmit(opts);
	});


	// test that args embedded in the action are honored; no real way
	// to assert this so successful callback is used to signal success
	it(&#039;ajaxSubmit: existing args in action attr&#039;, function() {
		// stop();

		var opts = {
			success: function() { // post-submit callback
				assert.ok(true, &#039;post callback&#039;);
				// start();
			}
		};

		// expect(1);
		$(&#039;#form5&#039;).ajaxSubmit(opts);
	});

	// test ajaxSubmit using pre-submit callback to cancel submit
	it(&#039;ajaxSubmit: cancel submit&#039;, function() {

		var opts = {
			beforeSubmit: function(a, jq) {		// pre-submit callback
				assert.ok(true, &#039;pre-submit callback&#039;);
				assert.ok(a.constructor == Array, &#039;type check&#039;);
				assert.ok(jq.jquery, &#039;type check jQuery&#039;);
				return false;		// return false to abort submit
			},
			success: function() {	// post-submit callback
				assert.ok(false, &#039;should not hit this post-submit callback&#039;);
			}
		};

		// expect(3);
		$(&#039;#form3&#039;).ajaxSubmit(opts);
	});

	// test submitting a pseudo-form
	it(&#039;ajaxSubmit: pseudo-form&#039;, function() {
		// stop();

		var opts = {
			beforeSubmit: function(a, jq) { // pre-submit callback
				assert.ok(true, &#039;pre-submit callback&#039;);
				assert.ok(a.constructor == Array, &#039;type check&#039;);
				assert.ok(jq.jquery, &#039;type check jQuery&#039;);
				assert.ok(jq[0].tagName.toLowerCase() == &#039;div&#039;, &#039;jQuery arg == &quot;div&quot;&#039;);
			},
			success: function() { // post-submit callback
				assert.ok(true, &#039;post-submit callback&#039;);
				// start();
			},
			// url and method must be provided for a pseudo form since they can
			// not be extracted from the markup
			url:  &#039;ajax/text.html&#039;,
			type: &#039;post&#039;
		};

		// expect(5);
		$(&#039;#pseudo&#039;).ajaxSubmit(opts);
	});

	// test eval of json response
	it(&#039;ajaxSubmit: evaluate response&#039;, function() {
		// stop();

		var opts = {
			success: function(responseText) { // post-callback
				assert.ok(true, &#039;post-callback&#039;);
				var data = eval.call(window, &#039;(&#039; + responseText + &#039;)&#039;);
				assert.ok(data.name == &#039;jquery-test&#039;, &#039;evaled response&#039;);
				// start();
			},
			url: &#039;ajax/json.txt&#039;
		};

		// expect(2);
		$(&#039;#form2&#039;).ajaxSubmit(opts);
	});


	// test pre and post callbacks for ajaxForm
	it(&#039;ajaxForm: pre and post callbacks&#039;, function() {
		// stop();

		var opts = {
			beforeSubmit: function(a, jq) {	// pre-submit callback
				assert.ok(true, &#039;pre-submit callback&#039;);
				assert.ok(a.constructor == Array, &#039;type check&#039;);
				assert.ok(jq.jquery, &#039;type check jQuery&#039;);
			},
			success: function() {			// post-submit callback
				assert.ok(true, &#039;post-submit callback&#039;);
				// start();
			}
		};

		// expect(4);
		$(&#039;#form4&#039;).ajaxForm(opts);
		$(&#039;#submitForm4&#039;)[0].click();		// trigger the submit button
	});

	// test that the value of the submit button is captured
	it(&#039;ajaxForm: capture submit element&#039;, function() {

		var opts = {
			beforeSubmit: function(a, jq) { // pre-callback
				assert.ok(true, &#039;pre-callback&#039;);
				assert.ok(a.constructor == Array, &#039;type check&#039;);
				assert.ok(jq.jquery, &#039;type check jQuery&#039;);
				assert.ok(arrayValue(a, &#039;form4inputName&#039;) !== null, &#039;submit button&#039;);
			}
		};

		// expect(4);
		$(&#039;#form4&#039;).ajaxForm(opts);
		$(&#039;#submitForm4withName&#039;)[0].click();
	});

	// test image submit support
	it(&#039;ajaxForm: capture submit image coordinates&#039;, function() {

		var opts = {
			beforeSubmit: function(a, jq) { // pre-callback
				assert.ok(true, &#039;pre-callback&#039;);
				assert.ok(a.constructor == Array, &#039;type check&#039;);
				assert.ok(jq.jquery, &#039;type check jQuery&#039;);
				assert.ok(arrayValue(a, &#039;myImage.x&#039;) !== null, &#039;x coord&#039;);
				assert.ok(arrayValue(a, &#039;myImage.y&#039;) !== null, &#039;y coord&#039;);
			}
		};

		// expect(5);
		$(&#039;#form4&#039;).ajaxForm(opts);
		$(&#039;#form4imageSubmit&#039;)[0].click();
	});

	// test image submit support
	it(&#039;ajaxForm: capture submit image coordinates (semantic=true)&#039;, function() {

		var opts = {
			semantic: true,
			beforeSubmit: function(a, jq) { // pre-callback
				assert.ok(true, &#039;pre-callback&#039;);
				assert.ok(a.constructor == Array, &#039;type check&#039;);
				assert.ok(jq.jquery, &#039;type check jQuery&#039;);
				assert.ok(arrayValue(a, &#039;myImage.x&#039;) !== null, &#039;x coord&#039;);
				assert.ok(arrayValue(a, &#039;myImage.y&#039;) !== null, &#039;y coord&#039;);
			}
		};

		// expect(5);
		$(&#039;#form4&#039;).ajaxForm(opts);
		$(&#039;#form4imageSubmit&#039;)[0].click();
	});

	// test that the targetDiv gets updated
	it(&#039;ajaxForm: update target div&#039;, function() {
		$(&#039;#targetDiv&#039;).empty();
		// stop();

		var opts = {
			target: &#039;#targetDiv&#039;,
			beforeSubmit: function(a, jq) { // pre-callback
				assert.ok(true, &#039;pre-callback&#039;);
				assert.ok(a.constructor == Array, &#039;type check&#039;);
				assert.ok(jq.jquery, &#039;type check jQuery&#039;);
			},
			success: function() {
				assert.ok(true, &#039;post-callback&#039;);
				assert.ok($(&#039;#targetDiv&#039;).text().match(&#039;Lorem ipsum&#039;), &#039;targetDiv updated&#039;);
				// start();
			}
		};

		// expect(5);
		$(&#039;#form4&#039;).ajaxForm(opts);
		$(&#039;#submitForm4&#039;)[0].click();
	});

	it(&#039;&quot;success&quot; callback&#039;, function() {
		$(&#039;#targetDiv&#039;).empty();
		// stop();

		var opts = {
			success: function() {
				assert.ok(true, &#039;post-callback&#039;);
				// start();
			}
		};

		// expect(1);
		$(&#039;#form3&#039;).ajaxSubmit(opts);
	});

	it(&#039;&quot;error&quot; callback&#039;, function() {
		$(&#039;#targetDiv&#039;).empty();
		// stop();

		var opts = {
			url: &#039;ajax/404.html&#039;,
			error: function() {
				assert.ok(true, &#039;error-callback&#039;);
				// start();
			},
			success: function() { // post-submit callback
				assert.ok(false, &#039;should not hit post-submit callback&#039;);
			}
		};

		// expect(1);
		$(&#039;#form3&#039;).ajaxSubmit(opts);
	});


	it(&#039;fieldValue(true)&#039;, function() {
		var i;

		assert.ok(&#039;5&#039;  == $(&#039;#fieldTest input&#039;).fieldValue(true)[0], &#039;input&#039;);
		assert.ok(&#039;1&#039;  == $(&#039;#fieldTest :input&#039;).fieldValue(true)[0], &#039;:input&#039;);
		assert.ok(&#039;5&#039;  == $(&#039;#fieldTest input:hidden&#039;).fieldValue(true)[0], &#039;:hidden&#039;);
		assert.ok(&#039;14&#039; == $(&#039;#fieldTest :password&#039;).fieldValue(true)[0], &#039;:password&#039;);
		assert.ok(&#039;12&#039; == $(&#039;#fieldTest :radio&#039;).fieldValue(true)[0], &#039;:radio&#039;);
		assert.ok(&#039;1&#039;  == $(&#039;#fieldTest select&#039;).fieldValue(true)[0], &#039;select&#039;);

		var expected = [&#039;8&#039;,&#039;10&#039;];
		var result = $(&#039;#fieldTest :checkbox&#039;).fieldValue(true);
		assert.ok(result.length == expected.length, &#039;result size check (checkbox): &#039; + result.length + &#039;=&#039; + expected.length);
		for (i = 0; i &lt; result.length; i++) {
			assert.ok(result[i] == expected[i], expected[i]);
		}

		expected = [&#039;3&#039;,&#039;4&#039;];
		result = $(&#039;#fieldTest [name=B]&#039;).fieldValue(true);
		assert.ok(result.length == expected.length, &#039;result size check (select-multiple): &#039; + result.length + &#039;=&#039; + expected.length);
		for (i = 0; i &lt; result.length; i++) {
			assert.ok(result[i] == expected[i], expected[i]);
		}
	});

	it(&#039;fieldValue(false)&#039;, function() {
		var i;

		assert.ok(&#039;5&#039;  == $(&#039;#fieldTest input&#039;).fieldValue(false)[0], &#039;input&#039;);
		assert.ok(&#039;1&#039;  == $(&#039;#fieldTest :input&#039;).fieldValue(false)[0], &#039;:input&#039;);
		assert.ok(&#039;5&#039;  == $(&#039;#fieldTest input:hidden&#039;).fieldValue(false)[0], &#039;:hidden&#039;);
		assert.ok(&#039;14&#039; == $(&#039;#fieldTest :password&#039;).fieldValue(false)[0], &#039;:password&#039;);
		assert.ok(&#039;1&#039;  == $(&#039;#fieldTest select&#039;).fieldValue(false)[0], &#039;select&#039;);

		var expected = [&#039;8&#039;,&#039;9&#039;,&#039;10&#039;];
		var result = $(&#039;#fieldTest :checkbox&#039;).fieldValue(false);
		assert.ok(result.length == expected.length, &#039;result size check (checkbox): &#039; + result.length + &#039;=&#039; + expected.length);
		for (i = 0; i &lt; result.length; i++) {
			assert.ok(result[i] == expected[i], expected[i]);
		}

		expected = [&#039;11&#039;,&#039;12&#039;,&#039;13&#039;];
		result = $(&#039;#fieldTest :radio&#039;).fieldValue(false);
		assert.ok(result.length == expected.length, &#039;result size check (radio): &#039; + result.length + &#039;=&#039; + expected.length);
		for (i = 0; i &lt; result.length; i++) {
			assert.ok(result[i] == expected[i], expected[i]);
		}

		expected = [&#039;3&#039;,&#039;4&#039;];
		result = $(&#039;#fieldTest [name=B]&#039;).fieldValue(false);
		assert.ok(result.length == expected.length, &#039;result size check (select-multiple): &#039; + result.length + &#039;=&#039; + expected.length);
		for (i = 0; i &lt; result.length; i++) {
			assert.ok(result[i] == expected[i], expected[i]);
		}
	});

	it(&#039;fieldSerialize(true) input&#039;, function() {
		var expected = [&#039;C=5&#039;, &#039;D=6&#039;, &#039;F=8&#039;, &#039;F=10&#039;, &#039;G=12&#039;, &#039;H=14&#039;];

		var result = $(&#039;#fieldTest input&#039;).fieldSerialize(true);
		result = result.split(&#039;&amp;&#039;);

		assert.ok(result.length == expected.length, &#039;result size check: &#039; + result.length + &#039;=&#039; + expected.length);
		for (var i = 0; i &lt; result.length; i++) {
			assert.ok(result[i] == expected[i], expected[i] + &#039; = &#039; + result[i]);
		}
	});

	it(&#039;fieldSerialize(true) :input&#039;, function() {
		var expected = [&#039;A=1&#039;,&#039;B=3&#039;,&#039;B=4&#039;,&#039;C=5&#039;,&#039;D=6&#039;,&#039;E=7&#039;,&#039;F=8&#039;,&#039;F=10&#039;,&#039;G=12&#039;,&#039;H=14&#039;];

		var result = $(&#039;#fieldTest :input&#039;).fieldSerialize(true);
		result = result.split(&#039;&amp;&#039;);

		assert.ok(result.length == expected.length, &#039;result size check: &#039; + result.length + &#039;=&#039; + expected.length);
		for (var i = 0; i &lt; result.length; i++) {
			assert.ok(result[i] == expected[i], expected[i] + &#039; = &#039; + result[i]);
		}
	});

	it(&#039;fieldSerialize(false) :input&#039;, function() {
		var expected = [&#039;A=1&#039;,&#039;B=3&#039;,&#039;B=4&#039;,&#039;C=5&#039;,&#039;D=6&#039;,&#039;E=7&#039;,&#039;F=8&#039;,&#039;F=9&#039;,&#039;F=10&#039;,&#039;G=11&#039;,&#039;G=12&#039;,&#039;G=13&#039;,&#039;H=14&#039;,&#039;I=15&#039;,&#039;J=16&#039;];

		var result = $(&#039;#fieldTest :input&#039;).fieldSerialize(false);
		result = result.split(&#039;&amp;&#039;);

		assert.ok(result.length == expected.length, &#039;result size check: &#039; + result.length + &#039;=&#039; + expected.length);
		for (var i = 0; i &lt; result.length; i++) {
			assert.ok(result[i] == expected[i], expected[i] + &#039; = &#039; + result[i]);
		}
	});

	it(&#039;fieldSerialize(true) select-mulitple&#039;, function() {
		var expected = [&#039;B=3&#039;,&#039;B=4&#039;];

		var result = $(&#039;#fieldTest [name=B]&#039;).fieldSerialize(true);
		result = result.split(&#039;&amp;&#039;);

		assert.ok(result.length == expected.length, &#039;result size check: &#039; + result.length + &#039;=&#039; + expected.length);
		for (var i = 0; i &lt; result.length; i++) {
			assert.ok(result[i] == expected[i], expected[i] + &#039; = &#039; + result[i]);
		}
	});

	it(&#039;fieldSerialize(true) :checkbox&#039;, function() {
		var expected = [&#039;F=8&#039;,&#039;F=10&#039;];

		var result = $(&#039;#fieldTest :checkbox&#039;).fieldSerialize(true);
		result = result.split(&#039;&amp;&#039;);

		assert.ok(result.length == expected.length, &#039;result size check: &#039; + result.length + &#039;=&#039; + expected.length);
		for (var i = 0; i &lt; result.length; i++) {
			assert.ok(result[i] == expected[i], expected[i] + &#039; = &#039; + result[i]);
		}
	});

	it(&#039;fieldSerialize(false) :checkbox&#039;, function() {
		var expected = [&#039;F=8&#039;,&#039;F=9&#039;,&#039;F=10&#039;];

		var result = $(&#039;#fieldTest :checkbox&#039;).fieldSerialize(false);
		result = result.split(&#039;&amp;&#039;);

		assert.ok(result.length == expected.length, &#039;result size check: &#039; + result.length + &#039;=&#039; + expected.length);
		for (var i = 0; i &lt; result.length; i++) {
			assert.ok(result[i] == expected[i], expected[i] + &#039; = &#039; + result[i]);
		}
	});

	it(&#039;fieldSerialize(true) :radio&#039;, function() {
		var expected = [&#039;G=12&#039;];

		var result = $(&#039;#fieldTest :radio&#039;).fieldSerialize(true);
		result = result.split(&#039;&amp;&#039;);

		assert.ok(result.length == expected.length, &#039;result size check: &#039; + result.length + &#039;=&#039; + expected.length);
		for (var i = 0; i &lt; result.length; i++) {
			assert.ok(result[i] == expected[i], expected[i] + &#039; = &#039; + result[i]);
		}
	});

	it(&#039;fieldSerialize(false) :radio&#039;, function() {
		var expected = [&#039;G=11&#039;,&#039;G=12&#039;,&#039;G=13&#039;];

		var result = $(&#039;#fieldTest :radio&#039;).fieldSerialize(false);
		result = result.split(&#039;&amp;&#039;);

		assert.ok(result.length == expected.length, &#039;result size check: &#039; + result.length + &#039;=&#039; + expected.length);
		for (var i = 0; i &lt; result.length; i++) {
			assert.ok(result[i] == expected[i], expected[i] + &#039; = &#039; + result[i]);
		}
	});

	it(&#039;ajaxForm - auto unbind&#039;, function() {
		$(&#039;#targetDiv&#039;).empty();
		// stop();

		var opts = {
			target: &#039;#targetDiv&#039;,
			beforeSubmit: function(a, jq) { // pre-callback
				assert.ok(true, &#039;pre-callback&#039;);
			},
			success: function() {
				assert.ok(true, &#039;post-callback&#039;);
				// start();
			}
		};

		// expect(2);
		// multiple binds
		$(&#039;#form8&#039;).ajaxForm(opts).ajaxForm(opts).ajaxForm(opts);
		$(&#039;#submitForm8&#039;)[0].click();
	});

	it(&#039;ajaxFormUnbind&#039;, function() {
		$(&#039;#targetDiv&#039;).empty();
		// stop();

		var opts = {
			target: &#039;#targetDiv&#039;,
			beforeSubmit: function(a, jq) { // pre-callback
				assert.ok(true, &#039;pre-callback&#039;);
			},
			success: function() {
				assert.ok(true, &#039;post-callback&#039;);
				// start();
			}
		};

		// expect(0);
		// multiple binds
		$(&#039;#form9&#039;).ajaxForm(opts).submit(function() {
			return false;
		});
		$(&#039;#form9&#039;).ajaxFormUnbind(opts);
		$(&#039;#submitForm9&#039;)[0].click();

		// setTimeout(start, 500);
	});

	it(&#039;naked hash&#039;, function() {
		$(&#039;#actionTest1&#039;).ajaxSubmit({
			beforeSerialize: function($f, opts) {
				assert.ok(true, &#039;url=&#039; + opts.url);
			}
		});
		assert.ok(true, &#039;ajaxSubmit passed&#039;);
	});
	it(&#039;hash only&#039;, function() {
		$(&#039;#actionTest2&#039;).ajaxSubmit({
			beforeSerialize: function($f, opts) {
				assert.ok(true, &#039;url=&#039; + opts.url);
			}
		});
		assert.ok(true, &#039;ajaxSubmit passed&#039;);
	});
	it(&#039;empty action&#039;, function() {
		$(&#039;#actionTest3&#039;).ajaxSubmit({
			beforeSerialize: function($f, opts) {
				assert.ok(true, &#039;url=&#039; + opts.url);
			}
		});
		assert.ok(true, &#039;ajaxSubmit passed&#039;);
	});
	it(&#039;missing action&#039;, function() {
		$(&#039;#actionTest4&#039;).ajaxSubmit({
			beforeSerialize: function($f, opts) {
				assert.ok(true, &#039;url=&#039; + opts.url);
			}
		});
		assert.ok(true, &#039;ajaxSubmit passed&#039;);
	});

	it(&#039;success callback params&#039;, function() {
		var $testForm;

		$(&#039;#targetDiv&#039;).empty();
		// stop();

		if (/^1\.3/.test($.fn.jquery)) {
			// expect(3);
			$testForm = $(&#039;#form3&#039;).ajaxSubmit({
				success: function(data, status, $form) { // jQuery 1.4+ signature
					assert.ok(true, &#039;success callback invoked&#039;);
					assert.ok(status === &#039;success&#039;, &#039;status === success&#039;);
					assert.ok($form === $testForm, &#039;$form param is valid&#039;);
					// start();
				}
			});

		} else {	// if (/^1\.4/.test($.fn.jquery)) {
			// expect(6);
			$testForm = $(&#039;#form3&#039;).ajaxSubmit({
				success: function(data, status, xhr, $form) { // jQuery 1.4+ signature
					assert.ok(true, &#039;success callback invoked&#039;);
					assert.ok(status === &#039;success&#039;, &#039;status === success&#039;);
					assert.ok(true, &#039;third arg: &#039; + typeof xhr != undefined);
					assert.ok(!!xhr != false, &#039;xhr != false&#039;);
					assert.ok(xhr.status, &#039;xhr.status == &#039; + xhr.status);
					assert.ok($form === $testForm, &#039;$form param is valid&#039;);
					// start();
				}
			});
		}
	});

	it(&#039;forceSync&#039;, function() {
		$(&#039;#targetDiv&#039;).empty();
		// stop();

		// expect(2);
		var $testForm = $(&#039;#form3&#039;).ajaxSubmit({
			forceSync: true,
			success: function(data, status, $form) { // jQuery 1.4+ signature
				assert.ok(true, &#039;success callback invoked&#039;);
				assert.ok(status === &#039;success&#039;, &#039;status === success&#039;);
				// start();
			}
		});
	});

});
</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
