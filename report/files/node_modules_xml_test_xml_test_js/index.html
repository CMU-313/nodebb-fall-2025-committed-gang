<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/xml/test/xml.test.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato-file.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="https://github.com/the-simian/es6-plato">ES6 Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
      <li class="active">
        <a href="display.html">Summary Display</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/xml/test/xml.test.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">63.35</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">151</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">27.73</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">2.13</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">import test from &#039;ava&#039;;
import xml from &#039;../lib/xml&#039;;

test(&#039;no elements&#039;, t =&gt; {
    t.is(xml(), &#039;&#039;);
    t.is(xml([]), &#039;&#039;);
    t.is(xml(&#039;test&#039;), &#039;test&#039;);
    t.is(xml(&#039;scotch &amp; whisky&#039;), &#039;scotch &amp;amp; whisky&#039;);
    t.is(xml(&#039;bob\&#039;s escape character&#039;), &#039;bob&amp;apos;s escape character&#039;);
});

test(&#039;simple options&#039;, t =&gt; {
    t.is(xml([{a: {}}]), &#039;&lt;a/&gt;&#039;);
    t.is(xml([{a: null}]), &#039;&lt;a/&gt;&#039;);
    t.is(xml([{a: []}]), &#039;&lt;a&gt;&lt;/a&gt;&#039;);
    t.is(xml([{a: -1}]), &#039;&lt;a&gt;-1&lt;/a&gt;&#039;);
    t.is(xml([{a: false}]), &#039;&lt;a&gt;false&lt;/a&gt;&#039;);
    t.is(xml([{a: &#039;test&#039;}]), &#039;&lt;a&gt;test&lt;/a&gt;&#039;);
    t.is(xml({a: {}}), &#039;&lt;a/&gt;&#039;);
    t.is(xml({a: null}), &#039;&lt;a/&gt;&#039;);
    t.is(xml({a: []}), &#039;&lt;a&gt;&lt;/a&gt;&#039;);
    t.is(xml({a: -1}), &#039;&lt;a&gt;-1&lt;/a&gt;&#039;);
    t.is(xml({a: false}), &#039;&lt;a&gt;false&lt;/a&gt;&#039;);
    t.is(xml({a: &#039;test&#039;}), &#039;&lt;a&gt;test&lt;/a&gt;&#039;);
    t.is(xml([{a: &#039;test&#039;}, {b: 123}, {c: -0.5}]), &#039;&lt;a&gt;test&lt;/a&gt;&lt;b&gt;123&lt;/b&gt;&lt;c&gt;-0.5&lt;/c&gt;&#039;);
});

test(&#039;deeply nested objects&#039;, t =&gt; {
    t.is(xml([{a: [{b: [{c: 1}, {c: 2}, {c: 3}]}]}]), &#039;&lt;a&gt;&lt;b&gt;&lt;c&gt;1&lt;/c&gt;&lt;c&gt;2&lt;/c&gt;&lt;c&gt;3&lt;/c&gt;&lt;/b&gt;&lt;/a&gt;&#039;);
});

test(&#039;indents property&#039;, t =&gt; {
    t.is(xml([{a: [{b: [{c: 1}, {c: 2}, {c: 3}]}]}], true), &#039;&lt;a&gt;\n    &lt;b&gt;\n        &lt;c&gt;1&lt;/c&gt;\n        &lt;c&gt;2&lt;/c&gt;\n        &lt;c&gt;3&lt;/c&gt;\n    &lt;/b&gt;\n&lt;/a&gt;&#039;);
    t.is(xml([{a: [{b: [{c: 1}, {c: 2}, {c: 3}]}]}], &#039;  &#039;), &#039;&lt;a&gt;\n  &lt;b&gt;\n    &lt;c&gt;1&lt;/c&gt;\n    &lt;c&gt;2&lt;/c&gt;\n    &lt;c&gt;3&lt;/c&gt;\n  &lt;/b&gt;\n&lt;/a&gt;&#039;);
    t.is(xml([{a: [{b: [{c: 1}, {c: 2}, {c: 3}]}]}], &#039;\t&#039;), &#039;&lt;a&gt;\n\t&lt;b&gt;\n\t\t&lt;c&gt;1&lt;/c&gt;\n\t\t&lt;c&gt;2&lt;/c&gt;\n\t\t&lt;c&gt;3&lt;/c&gt;\n\t&lt;/b&gt;\n&lt;/a&gt;&#039;);
    t.is(xml({guid: [{_attr: {premalink: true}}, &#039;content&#039;]}, true), &#039;&lt;guid premalink=&quot;true&quot;&gt;content&lt;/guid&gt;&#039;);
});

test(&#039;supports xml attributes&#039;, t =&gt; {
    t.is(xml([{b: {_attr: {}}}]), &#039;&lt;b/&gt;&#039;);
    t.is(xml([{
        a: {
            _attr: {
                attribute1: &#039;some value&#039;,
                attribute2: 12345
            }
        }
    }]), &#039;&lt;a attribute1=&quot;some value&quot; attribute2=&quot;12345&quot;/&gt;&#039;);
    t.is(xml([{
        a: [{
            _attr: {
                attribute1: &#039;some value&#039;,
                attribute2: 12345
            }
        }]
    }]), &#039;&lt;a attribute1=&quot;some value&quot; attribute2=&quot;12345&quot;&gt;&lt;/a&gt;&#039;);
    t.is(xml([{
        a: [{
            _attr: {
                attribute1: &#039;some value&#039;,
                attribute2: 12345
            }
        }, &#039;content&#039;]
    }]), &#039;&lt;a attribute1=&quot;some value&quot; attribute2=&quot;12345&quot;&gt;content&lt;/a&gt;&#039;);
});

test(&#039;supports cdata&#039;, t =&gt; {
    t.is(xml([{a: {_cdata: &#039;This is some &lt;strong&gt;CDATA&lt;/strong&gt;&#039;}}]), &#039;&lt;a&gt;&lt;![CDATA[This is some &lt;strong&gt;CDATA&lt;/strong&gt;]]&gt;&lt;/a&gt;&#039;);
    t.is(xml([{
        a: {
            _attr: {attribute1: &#039;some value&#039;, attribute2: 12345},
            _cdata: &#039;This is some &lt;strong&gt;CDATA&lt;/strong&gt;&#039;
        }
    }]), &#039;&lt;a attribute1=&quot;some value&quot; attribute2=&quot;12345&quot;&gt;&lt;![CDATA[This is some &lt;strong&gt;CDATA&lt;/strong&gt;]]&gt;&lt;/a&gt;&#039;);
    t.is(xml([{a: {_cdata: &#039;This is some &lt;strong&gt;CDATA&lt;/strong&gt; with ]]&gt; and then again ]]&gt;&#039;}}]), &#039;&lt;a&gt;&lt;![CDATA[This is some &lt;strong&gt;CDATA&lt;/strong&gt; with ]]]]&gt;&lt;![CDATA[&gt; and then again ]]]]&gt;&lt;![CDATA[&gt;]]&gt;&lt;/a&gt;&#039;);
});

test(&#039;supports encoding&#039;, t =&gt; {
    t.is(xml([{
        a: [{
            _attr: {
                anglebrackets: &#039;this is &lt;strong&gt;strong&lt;/strong&gt;&#039;,
                url: &#039;http://google.com?s=opower&amp;y=fun&#039;
            }
        }, &#039;text&#039;]
    }]), &#039;&lt;a anglebrackets=&quot;this is &amp;lt;strong&amp;gt;strong&amp;lt;/strong&amp;gt;&quot; url=&quot;http://google.com?s=opower&amp;amp;y=fun&quot;&gt;text&lt;/a&gt;&#039;);
});

test(&#039;supports stream interface&#039;, t =&gt; {
    const elem = xml.element({_attr: {decade: &#039;80s&#039;, locale: &#039;US&#039;}});
    const xmlStream = xml({toys: elem}, {stream: true});
    const results = [&#039;&lt;toys decade=&quot;80s&quot; locale=&quot;US&quot;&gt;&#039;, &#039;&lt;toy&gt;Transformers&lt;/toy&gt;&#039;, &#039;&lt;toy&gt;&lt;name&gt;He-man&lt;/name&gt;&lt;/toy&gt;&#039;, &#039;&lt;toy&gt;GI Joe&lt;/toy&gt;&#039;, &#039;&lt;/toys&gt;&#039;];

    elem.push({toy: &#039;Transformers&#039;});
    elem.push({toy: [{name: &#039;He-man&#039;}]});
    elem.push({toy: &#039;GI Joe&#039;});
    elem.close();

    xmlStream.on(&#039;data&#039;, stanza =&gt; {
        t.is(stanza, results.shift());
    });

    return new Promise( (resolve, reject) =&gt; {
        xmlStream.on(&#039;close&#039;, () =&gt; {
            t.same(results, []);
            resolve();
        });
        xmlStream.on(&#039;error&#039;, reject);
    });
});

test(&#039;streams end properly&#039;, t =&gt; {
    const elem = xml.element({ _attr: { decade: &#039;80s&#039;, locale: &#039;US&#039;} });
    const xmlStream = xml({ toys: elem }, { stream: true });

    let gotData;

    t.plan(7);

    elem.push({ toy: &#039;Transformers&#039; });
    elem.push({ toy: &#039;GI Joe&#039; });
    elem.push({ toy: [{name:&#039;He-man&#039;}] });
    elem.close();

    xmlStream.on(&#039;data&#039;,  data =&gt; {
        t.ok(data);
        gotData = true;
    });

    xmlStream.on(&#039;end&#039;,  () =&gt; {
        t.ok(gotData);
    });

    return new Promise( (resolve, reject) =&gt; {
        xmlStream.on(&#039;close&#039;,  () =&gt; {
            t.ok(gotData);
            resolve();
        });
        xmlStream.on(&#039;error&#039;, reject);
    });
});

test(&#039;xml declaration options&#039;, t =&gt; {
    t.is(xml([{a: &#039;test&#039;}], {declaration: true}), &#039;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;a&gt;test&lt;/a&gt;&#039;);
    t.is(xml([{a: &#039;test&#039;}], {declaration: {encoding: &#039;foo&#039;}}), &#039;&lt;?xml version=&quot;1.0&quot; encoding=&quot;foo&quot;?&gt;&lt;a&gt;test&lt;/a&gt;&#039;);
    t.is(xml([{a: &#039;test&#039;}], {declaration: {standalone: &#039;yes&#039;}}), &#039;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;&lt;a&gt;test&lt;/a&gt;&#039;);
    t.is(xml([{a: &#039;test&#039;}], {declaration: false}), &#039;&lt;a&gt;test&lt;/a&gt;&#039;);
    t.is(xml([{a: &#039;test&#039;}], {declaration: true, indent: &#039;\n&#039;}), &#039;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;a&gt;test&lt;/a&gt;&#039;);
    t.is(xml([{a: &#039;test&#039;}], {}), &#039;&lt;a&gt;test&lt;/a&gt;&#039;);
});
</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
