<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/istanbul-reports/lib/html/index.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato.css" rel="stylesheet" type="text/css">
  <link href="../../assets/css/plato-file.css" rel="stylesheet" type="text/css">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="https://github.com/the-simian/es6-plato">ES6 Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
      <li class="active">
        <a href="display.html">Summary Display</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/istanbul-reports/lib/html/index.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">69.66</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">422</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">39.74</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">4.01</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">&#039;use strict&#039;;
/*
 Copyright 2012-2015, Yahoo Inc.
 Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.
 */
const fs = require(&#039;fs&#039;);
const path = require(&#039;path&#039;);
const html = require(&#039;html-escaper&#039;);
const { ReportBase } = require(&#039;istanbul-lib-report&#039;);
const annotator = require(&#039;./annotator&#039;);

function htmlHead(details) {
    return `
&lt;head&gt;
    &lt;title&gt;Code coverage report for ${html.escape(details.entity)}&lt;/title&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;${html.escape(details.prettify.css)}&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;${html.escape(details.base.css)}&quot; /&gt;
    &lt;link rel=&quot;shortcut icon&quot; type=&quot;image/x-icon&quot; href=&quot;${html.escape(
        details.favicon
    )}&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;
    &lt;style type=&#039;text/css&#039;&gt;
        .coverage-summary .sorter {
            background-image: url(${html.escape(details.sorter.image)});
        }
    &lt;/style&gt;
&lt;/head&gt;
    `;
}

function headerTemplate(details) {
    function metricsTemplate({ pct, covered, total }, kind) {
        return `
            &lt;div class=&#039;fl pad1y space-right2&#039;&gt;
                &lt;span class=&quot;strong&quot;&gt;${pct}% &lt;/span&gt;
                &lt;span class=&quot;quiet&quot;&gt;${kind}&lt;/span&gt;
                &lt;span class=&#039;fraction&#039;&gt;${covered}/${total}&lt;/span&gt;
            &lt;/div&gt;
        `;
    }

    function skipTemplate(metrics) {
        const statements = metrics.statements.skipped;
        const branches = metrics.branches.skipped;
        const functions = metrics.functions.skipped;

        const countLabel = (c, label, plural) =&gt;
            c === 0 ? [] : `${c} ${label}${c === 1 ? &#039;&#039; : plural}`;
        const skips = [].concat(
            countLabel(statements, &#039;statement&#039;, &#039;s&#039;),
            countLabel(functions, &#039;function&#039;, &#039;s&#039;),
            countLabel(branches, &#039;branch&#039;, &#039;es&#039;)
        );

        if (skips.length === 0) {
            return &#039;&#039;;
        }

        return `
            &lt;div class=&#039;fl pad1y&#039;&gt;
                &lt;span class=&quot;strong&quot;&gt;${skips.join(&#039;, &#039;)}&lt;/span&gt;
                &lt;span class=&quot;quiet&quot;&gt;Ignored&lt;/span&gt;  &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;
            &lt;/div&gt;
        `;
    }

    return `
&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
${htmlHead(details)}
&lt;body&gt;
&lt;div class=&#039;wrapper&#039;&gt;
    &lt;div class=&#039;pad1&#039;&gt;
        &lt;h1&gt;${details.pathHtml}&lt;/h1&gt;
        &lt;div class=&#039;clearfix&#039;&gt;
            ${metricsTemplate(details.metrics.statements, &#039;Statements&#039;)}
            ${metricsTemplate(details.metrics.branches, &#039;Branches&#039;)}
            ${metricsTemplate(details.metrics.functions, &#039;Functions&#039;)}
            ${metricsTemplate(details.metrics.lines, &#039;Lines&#039;)}
            ${skipTemplate(details.metrics)}
        &lt;/div&gt;
        &lt;p class=&quot;quiet&quot;&gt;
            Press &lt;em&gt;n&lt;/em&gt; or &lt;em&gt;j&lt;/em&gt; to go to the next uncovered block, &lt;em&gt;b&lt;/em&gt;, &lt;em&gt;p&lt;/em&gt; or &lt;em&gt;k&lt;/em&gt; for the previous block.
        &lt;/p&gt;
        &lt;template id=&quot;filterTemplate&quot;&gt;
            &lt;div class=&quot;quiet&quot;&gt;
                Filter:
                &lt;input type=&quot;search&quot; id=&quot;fileSearch&quot;&gt;
            &lt;/div&gt;
        &lt;/template&gt;
    &lt;/div&gt;
    &lt;div class=&#039;status-line ${details.reportClass}&#039;&gt;&lt;/div&gt;
    `;
}

function footerTemplate(details) {
    return `
                &lt;div class=&#039;push&#039;&gt;&lt;/div&gt;&lt;!-- for sticky footer --&gt;
            &lt;/div&gt;&lt;!-- /wrapper --&gt;
            &lt;div class=&#039;footer quiet pad2 space-top1 center small&#039;&gt;
                Code coverage generated by
                &lt;a href=&quot;https://istanbul.js.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;istanbul&lt;/a&gt;
                at ${html.escape(details.datetime)}
            &lt;/div&gt;
        &lt;script src=&quot;${html.escape(details.prettify.js)}&quot;&gt;&lt;/script&gt;
        &lt;script&gt;
            window.onload = function () {
                prettyPrint();
            };
        &lt;/script&gt;
        &lt;script src=&quot;${html.escape(details.sorter.js)}&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;${html.escape(details.blockNavigation.js)}&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
    `;
}

function detailTemplate(data) {
    const lineNumbers = new Array(data.maxLines).fill().map((_, i) =&gt; i + 1);
    const lineLink = num =&gt;
        `&lt;a name=&#039;L${num}&#039;&gt;&lt;/a&gt;&lt;a href=&#039;#L${num}&#039;&gt;${num}&lt;/a&gt;`;
    const lineCount = line =&gt;
        `&lt;span class=&quot;cline-any cline-${line.covered}&quot;&gt;${line.hits}&lt;/span&gt;`;

    /* This is rendered in a `&lt;pre&gt;`, need control of all whitespace. */
    return [
        &#039;&lt;tr&gt;&#039;,
        `&lt;td class=&quot;line-count quiet&quot;&gt;${lineNumbers
            .map(lineLink)
            .join(&#039;\n&#039;)}&lt;/td&gt;`,
        `&lt;td class=&quot;line-coverage quiet&quot;&gt;${data.lineCoverage
            .map(lineCount)
            .join(&#039;\n&#039;)}&lt;/td&gt;`,
        `&lt;td class=&quot;text&quot;&gt;&lt;pre class=&quot;prettyprint lang-js&quot;&gt;${data.annotatedCode.join(
            &#039;\n&#039;
        )}&lt;/pre&gt;&lt;/td&gt;`,
        &#039;&lt;/tr&gt;&#039;
    ].join(&#039;&#039;);
}
const summaryTableHeader = [
    &#039;&lt;div class=&quot;pad1&quot;&gt;&#039;,
    &#039;&lt;table class=&quot;coverage-summary&quot;&gt;&#039;,
    &#039;&lt;thead&gt;&#039;,
    &#039;&lt;tr&gt;&#039;,
    &#039;   &lt;th data-col=&quot;file&quot; data-fmt=&quot;html&quot; data-html=&quot;true&quot; class=&quot;file&quot;&gt;File&lt;/th&gt;&#039;,
    &#039;   &lt;th data-col=&quot;pic&quot; data-type=&quot;number&quot; data-fmt=&quot;html&quot; data-html=&quot;true&quot; class=&quot;pic&quot;&gt;&lt;/th&gt;&#039;,
    &#039;   &lt;th data-col=&quot;statements&quot; data-type=&quot;number&quot; data-fmt=&quot;pct&quot; class=&quot;pct&quot;&gt;Statements&lt;/th&gt;&#039;,
    &#039;   &lt;th data-col=&quot;statements_raw&quot; data-type=&quot;number&quot; data-fmt=&quot;html&quot; class=&quot;abs&quot;&gt;&lt;/th&gt;&#039;,
    &#039;   &lt;th data-col=&quot;branches&quot; data-type=&quot;number&quot; data-fmt=&quot;pct&quot; class=&quot;pct&quot;&gt;Branches&lt;/th&gt;&#039;,
    &#039;   &lt;th data-col=&quot;branches_raw&quot; data-type=&quot;number&quot; data-fmt=&quot;html&quot; class=&quot;abs&quot;&gt;&lt;/th&gt;&#039;,
    &#039;   &lt;th data-col=&quot;functions&quot; data-type=&quot;number&quot; data-fmt=&quot;pct&quot; class=&quot;pct&quot;&gt;Functions&lt;/th&gt;&#039;,
    &#039;   &lt;th data-col=&quot;functions_raw&quot; data-type=&quot;number&quot; data-fmt=&quot;html&quot; class=&quot;abs&quot;&gt;&lt;/th&gt;&#039;,
    &#039;   &lt;th data-col=&quot;lines&quot; data-type=&quot;number&quot; data-fmt=&quot;pct&quot; class=&quot;pct&quot;&gt;Lines&lt;/th&gt;&#039;,
    &#039;   &lt;th data-col=&quot;lines_raw&quot; data-type=&quot;number&quot; data-fmt=&quot;html&quot; class=&quot;abs&quot;&gt;&lt;/th&gt;&#039;,
    &#039;&lt;/tr&gt;&#039;,
    &#039;&lt;/thead&gt;&#039;,
    &#039;&lt;tbody&gt;&#039;
].join(&#039;\n&#039;);

function summaryLineTemplate(details) {
    const { reportClasses, metrics, file, output } = details;
    const percentGraph = pct =&gt; {
        if (!isFinite(pct)) {
            return &#039;&#039;;
        }

        const cls = [&#039;cover-fill&#039;];
        if (pct === 100) {
            cls.push(&#039;cover-full&#039;);
        }

        pct = Math.floor(pct);
        return [
            `&lt;div class=&quot;${cls.join(&#039; &#039;)}&quot; style=&quot;width: ${pct}%&quot;&gt;&lt;/div&gt;`,
            `&lt;div class=&quot;cover-empty&quot; style=&quot;width: ${100 - pct}%&quot;&gt;&lt;/div&gt;`
        ].join(&#039;&#039;);
    };
    const summaryType = (type, showGraph = false) =&gt; {
        const info = metrics[type];
        const reportClass = reportClasses[type];
        const result = [
            `&lt;td data-value=&quot;${info.pct}&quot; class=&quot;pct ${reportClass}&quot;&gt;${info.pct}%&lt;/td&gt;`,
            `&lt;td data-value=&quot;${info.total}&quot; class=&quot;abs ${reportClass}&quot;&gt;${info.covered}/${info.total}&lt;/td&gt;`
        ];
        if (showGraph) {
            result.unshift(
                `&lt;td data-value=&quot;${info.pct}&quot; class=&quot;pic ${reportClass}&quot;&gt;`,
                `&lt;div class=&quot;chart&quot;&gt;${percentGraph(info.pct)}&lt;/div&gt;`,
                `&lt;/td&gt;`
            );
        }

        return result;
    };

    return []
        .concat(
            &#039;&lt;tr&gt;&#039;,
            `&lt;td class=&quot;file ${
                reportClasses.statements
            }&quot; data-value=&quot;${html.escape(file)}&quot;&gt;&lt;a href=&quot;${html.escape(
                output
            )}&quot;&gt;${html.escape(file)}&lt;/a&gt;&lt;/td&gt;`,
            summaryType(&#039;statements&#039;, true),
            summaryType(&#039;branches&#039;),
            summaryType(&#039;functions&#039;),
            summaryType(&#039;lines&#039;),
            &#039;&lt;/tr&gt;\n&#039;
        )
        .join(&#039;\n\t&#039;);
}

const summaryTableFooter = [&#039;&lt;/tbody&gt;&#039;, &#039;&lt;/table&gt;&#039;, &#039;&lt;/div&gt;&#039;].join(&#039;\n&#039;);
const emptyClasses = {
    statements: &#039;empty&#039;,
    lines: &#039;empty&#039;,
    functions: &#039;empty&#039;,
    branches: &#039;empty&#039;
};

const standardLinkMapper = {
    getPath(node) {
        if (typeof node === &#039;string&#039;) {
            return node;
        }
        let filePath = node.getQualifiedName();
        if (node.isSummary()) {
            if (filePath !== &#039;&#039;) {
                filePath += &#039;/index.html&#039;;
            } else {
                filePath = &#039;index.html&#039;;
            }
        } else {
            filePath += &#039;.html&#039;;
        }
        return filePath;
    },

    relativePath(source, target) {
        const targetPath = this.getPath(target);
        const sourcePath = path.dirname(this.getPath(source));
        return path.posix.relative(sourcePath, targetPath);
    },

    assetPath(node, name) {
        return this.relativePath(this.getPath(node), name);
    }
};

function fixPct(metrics) {
    Object.keys(emptyClasses).forEach(key =&gt; {
        metrics[key].pct = 0;
    });
    return metrics;
}

class HtmlReport extends ReportBase {
    constructor(opts) {
        super();

        this.verbose = opts.verbose;
        this.linkMapper = opts.linkMapper || standardLinkMapper;
        this.subdir = opts.subdir || &#039;&#039;;
        this.date = new Date().toISOString();
        this.skipEmpty = opts.skipEmpty;
    }

    getBreadcrumbHtml(node) {
        let parent = node.getParent();
        const nodePath = [];

        while (parent) {
            nodePath.push(parent);
            parent = parent.getParent();
        }

        const linkPath = nodePath.map(ancestor =&gt; {
            const target = this.linkMapper.relativePath(node, ancestor);
            const name = ancestor.getRelativeName() || &#039;All files&#039;;
            return &#039;&lt;a href=&quot;&#039; + target + &#039;&quot;&gt;&#039; + name + &#039;&lt;/a&gt;&#039;;
        });

        linkPath.reverse();
        return linkPath.length &gt; 0
            ? linkPath.join(&#039; / &#039;) + &#039; &#039; + node.getRelativeName()
            : &#039;All files&#039;;
    }

    fillTemplate(node, templateData, context) {
        const linkMapper = this.linkMapper;
        const summary = node.getCoverageSummary();
        templateData.entity = node.getQualifiedName() || &#039;All files&#039;;
        templateData.metrics = summary;
        templateData.reportClass = context.classForPercent(
            &#039;statements&#039;,
            summary.statements.pct
        );
        templateData.pathHtml = this.getBreadcrumbHtml(node);
        templateData.base = {
            css: linkMapper.assetPath(node, &#039;base.css&#039;)
        };
        templateData.sorter = {
            js: linkMapper.assetPath(node, &#039;sorter.js&#039;),
            image: linkMapper.assetPath(node, &#039;sort-arrow-sprite.png&#039;)
        };
        templateData.blockNavigation = {
            js: linkMapper.assetPath(node, &#039;block-navigation.js&#039;)
        };
        templateData.prettify = {
            js: linkMapper.assetPath(node, &#039;prettify.js&#039;),
            css: linkMapper.assetPath(node, &#039;prettify.css&#039;)
        };
        templateData.favicon = linkMapper.assetPath(node, &#039;favicon.png&#039;);
    }

    getTemplateData() {
        return { datetime: this.date };
    }

    getWriter(context) {
        if (!this.subdir) {
            return context.writer;
        }
        return context.writer.writerForDir(this.subdir);
    }

    onStart(root, context) {
        const assetHeaders = {
            &#039;.js&#039;: &#039;/* eslint-disable */\n&#039;
        };

        [&#039;.&#039;, &#039;vendor&#039;].forEach(subdir =&gt; {
            const writer = this.getWriter(context);
            const srcDir = path.resolve(__dirname, &#039;assets&#039;, subdir);
            fs.readdirSync(srcDir).forEach(f =&gt; {
                const resolvedSource = path.resolve(srcDir, f);
                const resolvedDestination = &#039;.&#039;;
                const stat = fs.statSync(resolvedSource);
                let dest;

                if (stat.isFile()) {
                    dest = resolvedDestination + &#039;/&#039; + f;
                    if (this.verbose) {
                        console.log(&#039;Write asset: &#039; + dest);
                    }
                    writer.copyFile(
                        resolvedSource,
                        dest,
                        assetHeaders[path.extname(f)]
                    );
                }
            });
        });
    }

    onSummary(node, context) {
        const linkMapper = this.linkMapper;
        const templateData = this.getTemplateData();
        const children = node.getChildren();
        const skipEmpty = this.skipEmpty;

        this.fillTemplate(node, templateData, context);
        const cw = this.getWriter(context).writeFile(linkMapper.getPath(node));
        cw.write(headerTemplate(templateData));
        cw.write(summaryTableHeader);
        children.forEach(child =&gt; {
            const metrics = child.getCoverageSummary();
            const isEmpty = metrics.isEmpty();
            if (skipEmpty &amp;&amp; isEmpty) {
                return;
            }
            const reportClasses = isEmpty
                ? emptyClasses
                : {
                      statements: context.classForPercent(
                          &#039;statements&#039;,
                          metrics.statements.pct
                      ),
                      lines: context.classForPercent(
                          &#039;lines&#039;,
                          metrics.lines.pct
                      ),
                      functions: context.classForPercent(
                          &#039;functions&#039;,
                          metrics.functions.pct
                      ),
                      branches: context.classForPercent(
                          &#039;branches&#039;,
                          metrics.branches.pct
                      )
                  };
            const data = {
                metrics: isEmpty ? fixPct(metrics) : metrics,
                reportClasses,
                file: child.getRelativeName(),
                output: linkMapper.relativePath(node, child)
            };
            cw.write(summaryLineTemplate(data) + &#039;\n&#039;);
        });
        cw.write(summaryTableFooter);
        cw.write(footerTemplate(templateData));
        cw.close();
    }

    onDetail(node, context) {
        const linkMapper = this.linkMapper;
        const templateData = this.getTemplateData();

        this.fillTemplate(node, templateData, context);
        const cw = this.getWriter(context).writeFile(linkMapper.getPath(node));
        cw.write(headerTemplate(templateData));
        cw.write(&#039;&lt;pre&gt;&lt;table class=&quot;coverage&quot;&gt;\n&#039;);
        cw.write(detailTemplate(annotator(node.getFileCoverage(), context)));
        cw.write(&#039;&lt;/table&gt;&lt;/pre&gt;\n&#039;);
        cw.write(footerTemplate(templateData));
        cw.close();
    }
}

module.exports = HtmlReport;
</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
